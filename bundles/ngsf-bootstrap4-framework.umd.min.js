!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngsf/common"),require("lodash"),require("@ngsf/widget-library"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ngsf/bootstrap4-framework",["exports","@angular/core","@ngsf/common","lodash","@ngsf/widget-library","@angular/common"],e):e(((t=t||self).ngsf=t.ngsf||{},t.ngsf["bootstrap4-framework"]={}),t.ng.core,t.common,t.lodash,t.widgetLibrary,t.ng.common)}(this,(function(t,e,s,o,i,n){"use strict";var a,r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,s=1,o=arguments.length;s<o;s++)for(var i in e=arguments[s])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},l=this&&this.__decorate||function(t,e,s,o){var i,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(n<3?i(a):n>3?i(e,s,a):i(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e){this.changeDetector=t,this.jsf=e,this.frameworkInitialized=!1,this.formControl=null,this.debugOutput="",this.debug="",this.parentArray=null,this.isOrderable=!1}return Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return!(!this.options.removable||this.options.readonly||"$ref"===this.layoutNode.type)&&(!!this.layoutNode.recursiveReference||!(!this.layoutNode.arrayItem||!this.parentArray)&&(!(this.parentArray.items.length-1<=this.parentArray.options.minItems)&&("list"===this.layoutNode.arrayItemType||this.layoutIndex[this.layoutIndex.length-1]===this.parentArray.items.length-2)))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.initializeFramework(),this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type&&(this.parentArray=this.jsf.getParentNode(this),this.parentArray&&(this.isOrderable="list"===this.layoutNode.arrayItemType&&!this.options.readonly&&this.parentArray.options.orderable))},t.prototype.ngOnChanges=function(){this.frameworkInitialized||this.initializeFramework()},t.prototype.initializeFramework=function(){var t=this;if(this.layoutNode){switch(this.options=o.cloneDeep(this.layoutNode.options),this.widgetLayoutNode=r(r({},this.layoutNode),{options:o.cloneDeep(this.layoutNode.options)}),this.widgetOptions=this.widgetLayoutNode.options,this.formControl=this.jsf.getFormControl(this),this.options.isInputWidget=s.inArray(this.layoutNode.type,["button","checkbox","checkboxes-inline","checkboxes","color","date","datetime-local","datetime","email","file","hidden","image","integer","month","number","password","radio","radiobuttons","radios-inline","radios","range","reset","search","select","submit","tel","text","textarea","time","url","week"]),this.options.title=this.setTitle(),this.options.htmlClass=s.addClasses(this.options.htmlClass,"schema-form-"+this.layoutNode.type),this.options.htmlClass="array"===this.layoutNode.type?s.addClasses(this.options.htmlClass,"list-group"):this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type?s.addClasses(this.options.htmlClass,"list-group-item"):s.addClasses(this.options.htmlClass,"form-group"),this.widgetOptions.htmlClass="",this.options.labelHtmlClass=s.addClasses(this.options.labelHtmlClass,"control-label"),this.widgetOptions.activeClass=s.addClasses(this.widgetOptions.activeClass,"active"),this.options.fieldAddonLeft=this.options.fieldAddonLeft||this.options.prepend,this.options.fieldAddonRight=this.options.fieldAddonRight||this.options.append,this.options.title&&"tab"!==this.layoutNode.type&&!this.options.notitle&&this.options.required&&!this.options.title.includes("*")&&(this.options.title+=' <strong class="text-danger">*</strong>'),this.layoutNode.type){case"checkbox":case"checkboxes":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"checkbox");break;case"checkboxes-inline":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"checkbox"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"checkbox-inline");break;case"radio":case"radios":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"radio");break;case"radios-inline":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"radio"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"radio-inline");break;case"checkboxbuttons":case"radiobuttons":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"btn-group"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,"btn"),this.widgetOptions.itemLabelHtmlClass=s.addClasses(this.widgetOptions.itemLabelHtmlClass,this.options.style||"btn-default"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"sr-only");break;case"button":case"submit":this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"btn"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-info");break;case"array":case"fieldset":case"section":case"conditional":case"advancedfieldset":case"authfieldset":case"selectfieldset":case"optionfieldset":this.options.messageLocation="top";break;case"tabarray":case"tabs":this.widgetOptions.htmlClass=s.addClasses(this.widgetOptions.htmlClass,"tab-content"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"tab-pane"),this.widgetOptions.labelHtmlClass=s.addClasses(this.widgetOptions.labelHtmlClass,"nav nav-tabs");break;case"$ref":this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"btn pull-right"),this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-default"),this.options.icon="glyphicon glyphicon-plus";break;default:this.widgetOptions.fieldHtmlClass=s.addClasses(this.widgetOptions.fieldHtmlClass,"form-control")}if(this.formControl&&(this.updateHelpBlock(this.formControl.status),this.formControl.statusChanges.subscribe((function(e){return t.updateHelpBlock(e)})),this.options.debug)){this.debugOutput=o.map([],(function(t){return JSON.stringify(t,null,2)})).join("\n")}this.frameworkInitialized=!0}},t.prototype.updateHelpBlock=function(t){this.options.helpBlock="INVALID"===t&&this.options.enableErrorState&&this.formControl.errors&&(this.formControl.dirty||this.options.feedbackOnRender)?this.jsf.formatErrors(this.formControl.errors,this.options.validationMessages):this.options.description||this.options.help||null},t.prototype.setTitle=function(){switch(this.layoutNode.type){case"button":case"checkbox":case"section":case"help":case"msg":case"submit":case"message":case"tabarray":case"tabs":case"$ref":return null;case"advancedfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Advanced options",null;case"authfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Authentication settings",null;case"fieldset":return this.widgetOptions.title=this.options.title,null;default:return this.widgetOptions.title=null,this.jsf.setItemTitle(this)}},t.prototype.removeItem=function(){this.jsf.removeItem(this)},t.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:i.JsonSchemaFormService}]},l([e.Input(),d("design:type",Object)],t.prototype,"layoutNode",void 0),l([e.Input(),d("design:type",Array)],t.prototype,"layoutIndex",void 0),l([e.Input(),d("design:type",Array)],t.prototype,"dataIndex",void 0),t=l([e.Component({selector:"bootstrap-4-framework",template:'\n      <div\n              [class]="options?.htmlClass || \'\'"\n              [class.has-feedback]="options?.feedback && options?.isInputWidget &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n              [class.has-error]="options?.enableErrorState && formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n              [class.has-success]="options?.enableSuccessState && !formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)">\n\n          <button *ngIf="showRemoveButton"\n                  class="close pull-right"\n                  type="button"\n                  (click)="removeItem()">\n              <span aria-hidden="true">&times;</span>\n              <span class="sr-only">Close</span>\n          </button>\n          <div *ngIf="options?.messageLocation === \'top\'">\n              <p *ngIf="options?.helpBlock"\n                 class="help-block"\n                 [innerHTML]="options?.helpBlock"></p>\n          </div>\n\n          <label *ngIf="options?.title && layoutNode?.type !== \'tab\'"\n                 [attr.for]="\'control\' + layoutNode?._id"\n                 [class]="options?.labelHtmlClass || \'\'"\n                 [class.sr-only]="options?.notitle"\n                 [innerHTML]="options?.title"></label>\n          <p *ngIf="layoutNode?.type === \'submit\' && jsf?.formOptions?.fieldsRequired">\n              <strong class="text-danger">*</strong> = required fields\n          </p>\n          <div [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight">\n        <span *ngIf="options?.fieldAddonLeft"\n              class="input-group-addon"\n              [innerHTML]="options?.fieldAddonLeft"></span>\n\n              <select-widget-widget\n                      [layoutNode]="widgetLayoutNode"\n                      [dataIndex]="dataIndex"\n                      [layoutIndex]="layoutIndex"></select-widget-widget>\n\n              <span *ngIf="options?.fieldAddonRight"\n                    class="input-group-addon"\n                    [innerHTML]="options?.fieldAddonRight"></span>\n          </div>\n\n          <span *ngIf="options?.feedback && options?.isInputWidget &&\n          !options?.fieldAddonRight && !layoutNode.arrayItem &&\n          (formControl?.dirty || options?.feedbackOnRender)"\n                [class.glyphicon-ok]="options?.enableSuccessState && !formControl?.errors"\n                [class.glyphicon-remove]="options?.enableErrorState && formControl?.errors"\n                aria-hidden="true"\n                class="form-control-feedback glyphicon"></span>\n          <div *ngIf="options?.messageLocation !== \'top\'">\n              <p *ngIf="options?.helpBlock"\n                 class="help-block"\n                 [innerHTML]="options?.helpBlock"></p>\n          </div>\n      </div>\n\n      <div *ngIf="debug && debugOutput">debug:\n          <pre>{{debugOutput}}</pre>\n      </div>\n  ',styles:["\n      :host /deep/ .list-group-item .form-control-feedback {\n          top: 40px;\n      }\n\n      :host /deep/ .checkbox,\n      :host /deep/ .radio {\n          margin-top: 0;\n          margin-bottom: 0;\n      }\n\n      :host /deep/ .checkbox-inline,\n      :host /deep/ .checkbox-inline + .checkbox-inline,\n      :host /deep/ .checkbox-inline + .radio-inline,\n      :host /deep/ .radio-inline,\n      :host /deep/ .radio-inline + .radio-inline,\n      :host /deep/ .radio-inline + .checkbox-inline {\n          margin-left: 0;\n          margin-right: 10px;\n      }\n\n      :host /deep/ .checkbox-inline:last-child,\n      :host /deep/ .radio-inline:last-child {\n          margin-right: 0;\n      }\n\n      :host /deep/ .ng-invalid.ng-touched {\n          border: 1px solid #f44336;\n      }\n  "]}),d("design:paramtypes",[e.ChangeDetectorRef,i.JsonSchemaFormService])],t)}(),c=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(t,e)},function(t,e){function s(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),h=this&&this.__decorate||function(t,e,s,o){var i,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(n<3?i(a):n>3?i(e,s,a):i(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},f=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="bootstrap-4",e.framework=p,e.stylesheets=["//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"],e.scripts=["//code.jquery.com/jquery-3.2.1.slim.min.js","//cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js","//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"],e}return c(s,t),s=h([e.Injectable()],s)}(s.Framework),u=this&&this.__decorate||function(t,e,s,o){var i,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,o);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(n<3?i(a):n>3?i(e,s,a):i(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},m=function(){function t(){}var o;return o=t,t.forRoot=function(){return{ngModule:o,providers:[{provide:s.Framework,useClass:f,multi:!0}]}},t=o=u([e.NgModule({imports:[n.CommonModule,i.WidgetLibraryModule],declarations:[p],exports:[p],entryComponents:[p]})],t)}();t.Bootstrap4Framework=f,t.Bootstrap4FrameworkComponent=p,t.Bootstrap4FrameworkModule=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngsf-bootstrap4-framework.umd.min.js.map