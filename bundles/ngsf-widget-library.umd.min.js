!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs-compat/Subject"),require("ajv/lib/refs/json-schema-draft-06.json"),require("ajv"),require("lodash"),require("@ngsf/common"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@ngsf/widget-library",["exports","@angular/core","rxjs-compat/Subject","ajv/lib/refs/json-schema-draft-06.json","ajv","lodash","@ngsf/common","@angular/common","@angular/forms"],e):e(((t=t||self).ngsf=t.ngsf||{},t.ngsf["widget-library"]={}),t.ng.core,t.Subject,t.draft6,t.Ajv,t.lodash,t.common,t.ng.common,t.ng.forms)}(this,(function(t,e,o,n,i,a,r,s,l){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var d=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(){function t(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.ajvOptions={allErrors:!0,jsonPointers:!0,unknownFormats:"ignore"},this.ajv=new i(this.ajvOptions),this.validateFormData=null,this.formValues={},this.data={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.validData=null,this.isValid=null,this.ajvErrors=null,this.validationErrors=null,this.dataErrors=new Map,this.formValueSubscription=null,this.dataChanges=new o.Subject,this.isValidChanges=new o.Subject,this.validationErrorChanges=new o.Subject,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.schemaRefLibrary={},this.layoutRefLibrary={"":null},this.templateRefLibrary={},this.hasRootReference=!1,this.language="en-US",this.defaultFormOptions={addSubmit:"auto",debug:!1,disableInvalidSubmit:!0,formDisabled:!1,formReadonly:!1,fieldsRequired:!1,framework:"no-framework",loadExternalAssets:!1,pristine:{errors:!0,success:!0},supressPropertyTitles:!1,setSchemaDefaults:"auto",setLayoutDefaults:"auto",validateOnRender:"auto",widgets:{},defautWidgetOptions:{listItems:1,addable:!0,orderable:!0,removable:!0,enableErrorState:!0,enableSuccessState:!0,feedback:!1,feedbackOnRender:!1,notitle:!1,disabled:!1,readonly:!1,returnEmptyFields:!0,validationMessages:{}}},this.setLanguage(this.language),this.ajv.addMetaSchema(n)}return t.prototype.setLanguage=function(t){void 0===t&&(t="en-US"),this.language=t;var e="fr"===t.slice(0,2)?r.frValidationMessages:r.enValidationMessages;this.defaultFormOptions.defautWidgetOptions.validationMessages=a.cloneDeep(e)},t.prototype.getData=function(){return this.data},t.prototype.getSchema=function(){return this.schema},t.prototype.getLayout=function(){return this.layout},t.prototype.resetAllValues=function(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.validateFormData=null,this.formValues={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.data={},this.validData=null,this.isValid=null,this.validationErrors=null,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.layoutRefLibrary={},this.schemaRefLibrary={},this.templateRefLibrary={},this.formOptions=a.cloneDeep(this.defaultFormOptions)},t.prototype.buildRemoteError=function(t){var e=this;r.forEach(t,(function(t,o){var n,i;if(o in e.formGroup.controls)try{for(var a=d(t),r=a.next();!r.done;r=a.next()){var s=r.value,l={};l[s.code]=s.message,"string"==typeof o?e.formGroup.get(o).setErrors(l,{emitEvent:!0}):console.error("Unhandled for error",o)}}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}))},t.prototype.validateData=function(t,e){void 0===e&&(e=!0),this.data=r.formatFormData(t,this.dataMap,this.dataRecursiveRefMap,this.arrayMap,this.formOptions.returnEmptyFields),this.isValid=this.validateFormData(this.data),this.validData=this.isValid?this.data:null;var o,n;this.ajvErrors=this.validateFormData.errors,this.validationErrors=(o=this.validateFormData.errors,n={},(o||[]).forEach((function(t){n[t.dataPath]||(n[t.dataPath]=[]),n[t.dataPath].push(t.message)})),n),e&&(this.dataChanges.next(this.data),this.isValidChanges.next(this.isValid),this.validationErrorChanges.next(this.ajvErrors))},t.prototype.buildFormGroupTemplate=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!0),this.formGroupTemplate=r.buildFormGroupTemplate(this,t,e)},t.prototype.buildFormGroup=function(){var t=this;this.formGroup=r.buildFormGroup(this.formGroupTemplate),this.formGroup&&(this.compileAjvSchema(),this.validateData(this.formGroup.value),this.formValueSubscription&&this.formValueSubscription.unsubscribe(),this.formValueSubscription=this.formGroup.valueChanges.subscribe((function(e){return t.validateData(e)})))},t.prototype.buildLayout=function(t){this.layout=r.buildLayout(this,t)},t.prototype.setOptions=function(t){if(r.isObject(t)){var e=a.cloneDeep(t);r.isObject(e.defaultOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,e.defaultOptions),delete e.defaultOptions),r.isObject(e.defautWidgetOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,e.defautWidgetOptions),delete e.defautWidgetOptions),Object.assign(this.formOptions,e);var o=this.formOptions.defautWidgetOptions;["ErrorState","SuccessState"].filter((function(t){return r.hasOwn(o,"disable"+t)})).forEach((function(t){o["enable"+t]=!o["disable"+t],delete o["disable"+t]}))}},t.prototype.compileAjvSchema=function(){this.validateFormData||(Array.isArray(this.schema.properties["ui:order"])&&(this.schema["ui:order"]=this.schema.properties["ui:order"],delete this.schema.properties["ui:order"]),this.ajv.removeSchema(this.schema),this.validateFormData=this.ajv.compile(this.schema))},t.prototype.buildSchemaFromData=function(t,e){if(void 0===e&&(e=!1),t)return r.buildSchemaFromData(t,e);this.schema=r.buildSchemaFromData(this.formValues,e)},t.prototype.buildSchemaFromLayout=function(t){if(t)return r.buildSchemaFromLayout(t);this.schema=r.buildSchemaFromLayout(this.layout)},t.prototype.setTpldata=function(t){void 0===t&&(t={}),this.tpldata=t},t.prototype.parseText=function(t,e,o,n){var i=this;return void 0===t&&(t=""),void 0===e&&(e={}),void 0===o&&(o={}),void 0===n&&(n=null),t&&/{{.+?}}/.test(t)?t.replace(/{{(.+?)}}/g,(function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return i.parseExpression(t[1],e,o,n,i.tpldata)})):t},t.prototype.parseExpression=function(t,e,o,n,i){var a=this;if(void 0===t&&(t=""),void 0===e&&(e={}),void 0===o&&(o={}),void 0===n&&(n=null),void 0===i&&(i=null),"string"!=typeof t)return"";var s="number"==typeof n?n+1+"":n||"";if(("'"===(t=t.trim())[0]||'"'===t[0])&&t[0]===t[t.length-1]&&-1===t.slice(1,t.length-1).indexOf(t[0]))return t.slice(1,t.length-1);if("idx"===t||"$index"===t)return s;if("value"===t&&!r.hasOwn(o,"value"))return e;if(['"',"'"," ","||","&&","+"].every((function(e){return-1===t.indexOf(e)}))){var l=r.JsonPointer.parseObjectPath(t);return"value"===l[0]&&r.JsonPointer.has(e,l.slice(1))?r.JsonPointer.get(e,l.slice(1)):"values"===l[0]&&r.JsonPointer.has(o,l.slice(1))?r.JsonPointer.get(o,l.slice(1)):"tpldata"===l[0]&&r.JsonPointer.has(i,l.slice(1))?r.JsonPointer.get(i,l.slice(1)):r.JsonPointer.has(o,l)?r.JsonPointer.get(o,l):""}return t.indexOf("[idx]")>-1&&(t=t.replace(/\[idx\]/g,s)),t.indexOf("[$index]")>-1&&(t=t.replace(/\[$index\]/g,s)),t.indexOf("||")>-1?t.split("||").reduce((function(t,r){return t||a.parseExpression(r,e,o,n,i)}),""):t.indexOf("&&")>-1?t.split("&&").reduce((function(t,r){return t&&a.parseExpression(r,e,o,n,i)})," ").trim():t.indexOf("+")>-1?t.split("+").map((function(t){return a.parseExpression(t,e,o,n,i)})).join(""):""},t.prototype.setArrayItemTitle=function(t,e,o){void 0===t&&(t={}),void 0===e&&(e=null),void 0===o&&(o=null);var n=t.layoutNode,i=this.getFormControlValue(t),a="array"===(n.type||"").slice(-5)&&r.isArray(i),s=r.JsonPointer.getFirst(a&&"$ref"!==e.type?[[e,"/options/legend"],[e,"/options/title"],[n,"/options/title"],[n,"/options/legend"]]:[[e,"/options/title"],[e,"/options/legend"],[n,"/options/title"],[n,"/options/legend"]]);if(!s)return s;var l=r.isArray(i)&&o<i.length?i[o]:i;return this.parseText(s,l,i,o)},t.prototype.setItemTitle=function(t){return!t.options.title&&/^(\d+|-)$/.test(t.layoutNode.name)?null:this.parseText(t.options.title||r.toTitleCase(t.layoutNode.name),this.getFormControlValue(this),(this.getFormControlGroup(this)||{}).value,t.dataIndex[t.dataIndex.length-1])},t.prototype.evaluateCondition=function(t,e){var o=e&&e[e.length-1],n=!0;if(r.hasValue((t.options||{}).condition))if("string"==typeof t.options.condition){var i=t.options.condition;r.hasValue(o)&&(i=i.replace("[arrayIndex]","["+o+"]")),i=r.JsonPointer.parseObjectPath(i),(n=!!r.JsonPointer.get(this.data,i))||"model"!==i[0]||(n=!!r.JsonPointer.get({model:this.data},i))}else if("function"==typeof t.options.condition)n=t.options.condition(this.data);else if("string"==typeof t.options.condition.functionBody)try{n=new Function("model","arrayIndices",t.options.condition.functionBody)(this.data,e)}catch(e){n=!0,console.error("condition functionBody errored out on evaluation: "+t.options.condition.functionBody)}return n},t.prototype.initializeControl=function(t,e){var o=this;if(void 0===e&&(e=!0),!r.isObject(t))return!1;if(r.isEmpty(t.options)&&(t.options=r.isEmpty((t.layoutNode||{}).options)?a.cloneDeep(this.formOptions):t.layoutNode.options),t.formControl=this.getFormControl(t),t.boundControl=e&&!!t.formControl,t.formControl)t.controlName=this.getFormControlName(t),t.controlValue=t.formControl.value,t.controlDisabled=t.formControl.disabled,t.options.errorMessage="VALID"===t.formControl.status?null:this.formatErrors(t.formControl.errors,t.options.validationMessages),t.options.showErrors=!0===this.formOptions.validateOnRender||"auto"===this.formOptions.validateOnRender&&r.hasValue(t.controlValue),t.formControl.statusChanges.subscribe((function(e){return t.options.errorMessage="VALID"===e?null:o.formatErrors(t.formControl.errors,t.options.validationMessages)})),t.formControl.valueChanges.subscribe((function(e){a.isEqual(t.controlValue,e)||(t.controlValue=e)}));else{t.controlName=t.layoutNode.name,t.controlValue=t.layoutNode.value||null;var n=this.getDataPointer(t);e&&n&&console.error('warning: control "'+n+'" is not bound to the Angular FormGroup.')}return t.boundControl},t.prototype.formatErrors=function(t,e){if(void 0===e&&(e={}),r.isEmpty(t))return null;r.isObject(e)||(e={});var o=function(t){return t[0].toUpperCase()+(t.slice(1)||"").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},n=function(t){return"object"==typeof t?Object.keys(t).map((function(e){return!0===t[e]?o(e):!1===t[e]?"Not "+o(e):o(e)+": "+n(t[e])})).join(", "):o(t.toString())};return Object.keys(t).filter((function(e){return"required"!==e||1===Object.keys(t).length})).map((function(i){return"string"==typeof e?e:"function"==typeof e[i]?e[i](t[i]):"string"==typeof e[i]?/{{.+?}}/.test(e[i])?Object.keys(t[i]).reduce((function(e,o){return e.replace(new RegExp("{{"+o+"}}","g"),t[i][o])}),e[i]):e[i]:o(i)+" Error: "+n(t[i])})).join("<br>")},t.prototype.updateValue=function(t,e){var o,n;if(t.controlValue=e,t.boundControl&&(t.formControl.setValue(e),t.formControl.markAsDirty()),t.layoutNode.value=e,r.isArray(t.options.copyValueTo))try{for(var i=d(t.options.copyValueTo),a=i.next();!a.done;a=i.next()){var s=a.value,l=r.getControl(this.formGroup,s);r.isObject(l)&&"function"==typeof l.setValue&&(l.setValue(e),l.markAsDirty())}}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}},t.prototype.updateArrayCheckboxList=function(t,e){for(var o,n,i=this.getFormControl(t);i.value.length;)i.removeAt(0);var a=r.removeRecursiveReferences(t.layoutNode.dataPointer+"/-",this.dataRecursiveRefMap,this.arrayMap);try{for(var s=d(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.checked){var p=r.buildFormGroup(this.templateRefLibrary[a]);p.setValue(u.value),i.push(p)}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}i.markAsDirty()},t.prototype.getFormControl=function(t){return t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)&&"$ref"!==t.layoutNode.type?r.getControl(this.formGroup,this.getDataPointer(t)):null},t.prototype.getFormControlValue=function(t){if(!t.layoutNode||!r.isDefined(t.layoutNode.dataPointer)||"$ref"===t.layoutNode.type)return null;var e=r.getControl(this.formGroup,this.getDataPointer(t));return e?e.value:null},t.prototype.getFormControlGroup=function(t){return t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)?r.getControl(this.formGroup,this.getDataPointer(t),!0):null},t.prototype.getFormControlName=function(t){return t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)&&r.hasValue(t.dataIndex)?r.JsonPointer.toKey(this.getDataPointer(t)):null},t.prototype.getLayoutArray=function(t){return r.JsonPointer.get(this.layout,this.getLayoutPointer(t),0,-1)},t.prototype.getParentNode=function(t){return r.JsonPointer.get(this.layout,this.getLayoutPointer(t),0,-2)},t.prototype.getDataPointer=function(t){return t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)&&r.hasValue(t.dataIndex)?r.JsonPointer.toIndexedPointer(t.layoutNode.dataPointer,t.dataIndex,this.arrayMap):null},t.prototype.getLayoutPointer=function(t){return r.hasValue(t.layoutIndex)?"/"+t.layoutIndex.join("/items/"):null},t.prototype.isControlBound=function(t){if(!t.layoutNode||!r.isDefined(t.layoutNode.dataPointer)||!r.hasValue(t.dataIndex))return!1;var e=this.getFormControlGroup(t),o=this.getFormControlName(t);return!!e&&r.hasOwn(e.controls,o)},t.prototype.addItem=function(t,e){if(!(t.layoutNode&&r.isDefined(t.layoutNode.$ref)&&r.hasValue(t.dataIndex)&&r.hasValue(t.layoutIndex)))return!1;var o=r.buildFormGroup(this.templateRefLibrary[t.layoutNode.$ref]);t.layoutNode.arrayItem?this.getFormControlGroup(t).push(o):this.getFormControlGroup(t).addControl(e||this.getFormControlName(t),o);var n=r.getLayoutNode(t.layoutNode,this);return n.arrayItem=t.layoutNode.arrayItem,t.layoutNode.arrayItemType?n.arrayItemType=t.layoutNode.arrayItemType:delete n.arrayItemType,e&&(n.name=e,n.dataPointer+="/"+r.JsonPointer.escape(e),n.options.title=r.fixTitle(e)),r.JsonPointer.insert(this.layout,this.getLayoutPointer(t),n),!0},t.prototype.moveArrayItem=function(t,e,o){if(!(t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)&&r.hasValue(t.dataIndex)&&r.hasValue(t.layoutIndex)&&r.isDefined(e)&&r.isDefined(o)&&e!==o))return!1;var n=this.getFormControlGroup(t),i=n.at(e);n.removeAt(e),n.insert(o,i),n.updateValueAndValidity();var a=this.getLayoutArray(t);return a.splice(o,0,a.splice(e,1)[0]),!0},t.prototype.removeItem=function(t){return!!(t.layoutNode&&r.isDefined(t.layoutNode.dataPointer)&&r.hasValue(t.dataIndex)&&r.hasValue(t.layoutIndex))&&(t.layoutNode.arrayItem?this.getFormControlGroup(t).removeAt(t.dataIndex[t.dataIndex.length-1]):this.getFormControlGroup(t).removeControl(this.getFormControlName(t)),r.JsonPointer.remove(this.layout,this.getLayoutPointer(t)),!0)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var p=function(){function t(t,e,o){this.elementRef=t,this.jsf=e,this.ngZone=o,this.overParentElement=!1,this.overChildElement=!1}return t.prototype.ngOnInit=function(){var t=this;this.orderable&&this.layoutNode&&this.layoutIndex&&this.dataIndex&&(this.element=this.elementRef.nativeElement,this.element.draggable=!0,this.arrayLayoutIndex="move:"+this.layoutIndex.slice(0,-1).toString(),this.ngZone.runOutsideAngular((function(){t.element.addEventListener("dragstart",(function(e){e.dataTransfer.effectAllowed="move";var o=t.dataIndex[t.dataIndex.length-1];sessionStorage.setItem(t.arrayLayoutIndex,o+"")})),t.element.addEventListener("dragover",(function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="move",!1})),t.element.addEventListener("dragenter",(function(e){if(t.overParentElement)return t.overChildElement=!0;t.overParentElement=!0;var o=sessionStorage.getItem(t.arrayLayoutIndex);null!==o&&(t.dataIndex[t.dataIndex.length-1]<+o?t.element.classList.add("drag-target-top"):t.dataIndex[t.dataIndex.length-1]>+o&&t.element.classList.add("drag-target-bottom"))})),t.element.addEventListener("dragleave",(function(e){t.overChildElement?t.overChildElement=!1:t.overParentElement&&(t.overParentElement=!1);var o=sessionStorage.getItem(t.arrayLayoutIndex);t.overParentElement||t.overChildElement||null===o||(t.element.classList.remove("drag-target-top"),t.element.classList.remove("drag-target-bottom"))})),t.element.addEventListener("drop",(function(e){t.element.classList.remove("drag-target-top"),t.element.classList.remove("drag-target-bottom");var o=sessionStorage.getItem(t.arrayLayoutIndex),n=t.dataIndex[t.dataIndex.length-1];return null!==o&&+o!==n&&t.jsf.moveArrayItem(t,+o,n),sessionStorage.removeItem(t.arrayLayoutIndex),!1}))})))},t.decorators=[{type:e.Directive,args:[{selector:"[orderable]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:u},{type:e.NgZone}]},t.propDecorators={orderable:[{type:e.Input}],layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},y=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,i,a=o.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)r.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return r},m=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t};function f(t,e,o,n){var i,a,s,l,d,u,p,h;void 0===o&&(o=!0),void 0===n&&(n=!0);var f=[],g=!1;if(t)if(r.isArray(t))if(e)try{for(var b=y(Object.keys(t)),v=b.next();!v.done;v=b.next()){var x=v.value;if(r.isObject(t[x])){var I=t[x].value;if(e.includes(I)){var C=t[x].name;f.push({name:C,value:I}),null==I&&(g=!0)}}else if(r.isString(t[x])&&x<e.length){var w=t[x];I=e[x];f.push({name:w,value:I}),null==I&&(g=!0)}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}else f=t,o||(g=!!f.filter((function(t){return void 0===t.value||null===t.value})).length);else if(e)try{for(var N=y(Object.keys(e)),k=N.next();!k.done;k=N.next()){I=e[x=k.value];if(r.hasOwn(t,I)){var F=t[I];f.push({name:F,value:I}),null==I&&(g=!0)}}}catch(t){s={error:t}}finally{try{k&&!k.done&&(l=N.return)&&l.call(N)}finally{if(s)throw s.error}}else try{for(var j=y(Object.keys(t)),O=j.next();!O.done;O=j.next()){var L=t[I=O.value];f.push({name:L,value:I}),null==I&&(g=!0)}}catch(t){d={error:t}}finally{try{O&&!O.done&&(u=j.return)&&u.call(j)}finally{if(d)throw d.error}}else if(e)try{for(var V=y(Object.keys(e)),D=V.next();!D.done;D=V.next()){var S=e[x=D.value];I=e[x];f.push({name:S,value:I}),null==I&&(g=!0)}}catch(t){p={error:t}}finally{try{D&&!D.done&&(h=V.return)&&h.call(V)}finally{if(p)throw p.error}}else f=[{name:"True",value:!0},{name:"False",value:!1}];return f.some((function(t){return r.hasOwn(t,"group")}))&&(g=!1,f=n?f.reduce((function(t,e){return r.hasOwn(e,"group")?(r.isArray(e.items)&&(t=m(t,e.items.map((function(t){return c(c({},t),{name:e.group+": "+t.name})}))),e.items.some((function(t){return void 0===t.value||null===t.value}))&&(g=!0)),r.hasOwn(e,"name")&&r.hasOwn(e,"value")&&(e.name=e.group+": "+e.name,delete e.group,t.push(e),void 0!==e.value&&null!==e.value||(g=!0))):(t.push(e),void 0!==e.value&&null!==e.value||(g=!0)),t}),[]):f.reduce((function(t,e){return r.hasOwn(e,"group")?(e.group!==(t[t.length-1]||{}).group&&t.push({group:e.group,items:e.items||[]}),r.hasOwn(e,"name")&&r.hasOwn(e,"value")&&(t[t.length-1].items.push({name:e.name,value:e.value}),void 0!==e.value&&null!==e.value||(g=!0))):(t.push(e),void 0!==e.value&&null!==e.value||(g=!0)),t}),[])),o||g||f.unshift({name:"<em>None</em>",value:null}),f}var g=function(){function t(t){this.jsf=t}return Object.defineProperty(t.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonText",{get:function(){var t={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return t.layoutNode.add||this.jsf.setArrayItemTitle(t,this.layoutNode,this.itemCount)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},t.prototype.addItem=function(t){t.preventDefault(),this.jsf.addItem(this)},t.decorators=[{type:e.Component,args:[{selector:"add-reference-widget",template:'\n      <button *ngIf="showAddButton"\n              [class]="options?.fieldHtmlClass || \'\'"\n              [disabled]="options?.readonly"\n              (click)="addItem($event)">\n          <span *ngIf="options?.icon" [class]="options?.icon"></span>\n          <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n      </button>',changeDetection:e.ChangeDetectionStrategy.Default}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var b=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"one-of-widget",template:""}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var v=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){"function"==typeof this.options.onClick?this.options.onClick(t):this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"button-widget",template:'\n      <div\n              [class]="options?.htmlClass || \'\'">\n          <button\n                  [attr.readonly]="options?.readonly ? \'readonly\' : null"\n                  [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n                  [class]="options?.fieldHtmlClass || \'\'"\n                  [disabled]="controlDisabled"\n                  [name]="controlName"\n                  [type]="layoutNode?.type"\n                  [value]="controlValue"\n                  (click)="updateValue($event)">\n        <span *ngIf="options?.icon || options?.title"\n              [class]="options?.icon"\n              [innerHTML]="options?.title"></span>\n          </button>\n      </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var x=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1}return Object.defineProperty(t.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},t.prototype.updateValue=function(t){t.preventDefault(),this.jsf.updateValue(this,t.target.checked?this.trueValue:this.falseValue)},t.decorators=[{type:e.Component,args:[{selector:"checkbox-widget",template:"\n      <label\n              [attr.for]=\"'control' + layoutNode?._id\"\n              [class]=\"options?.itemLabelHtmlClass || ''\">\n          <input *ngIf=\"boundControl\"\n                 [formControl]=\"formControl\"\n                 [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n                 [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n                 [id]=\"'control' + layoutNode?._id\"\n                 [name]=\"controlName\"\n                 [readonly]=\"options?.readonly ? 'readonly' : null\"\n                 type=\"checkbox\">\n          <input *ngIf=\"!boundControl\"\n                 [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n                 [checked]=\"isChecked ? 'checked' : null\"\n                 [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n                 [disabled]=\"controlDisabled\"\n                 [id]=\"'control' + layoutNode?._id\"\n                 [name]=\"controlName\"\n                 [readonly]=\"options?.readonly ? 'readonly' : null\"\n                 [value]=\"controlValue\"\n                 type=\"checkbox\"\n                 (change)=\"updateValue($event)\">\n          <span *ngIf=\"options?.title\"\n                [style.display]=\"options?.notitle ? 'none' : ''\"\n                [innerHTML]=\"options?.title\"></span>\n      </label>"}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var I=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.checkboxList=[]}return t.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.layoutOrientation="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type?"horizontal":"vertical",this.jsf.initializeControl(this),this.checkboxList=f(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.boundControl){var t=this.jsf.getFormControl(this);this.checkboxList.forEach((function(e){return e.checked=t.value.includes(e.value)}))}},t.prototype.updateValue=function(t){var e,o;try{for(var n=I(this.checkboxList),i=n.next();!i.done;i=n.next()){var a=i.value;t.target.value===a.value&&(a.checked=t.target.checked)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},t.decorators=[{type:e.Component,args:[{selector:"checkboxes-widget",template:'\n      <label *ngIf="options?.title"\n             [class]="options?.labelHtmlClass || \'\'"\n             [style.display]="options?.notitle ? \'none\' : \'\'"\n             [innerHTML]="options?.title"></label>\n\n      \x3c!-- \'horizontal\' = checkboxes-inline or checkboxbuttons --\x3e\n      <div *ngIf="layoutOrientation === \'horizontal\'" [class]="options?.htmlClass || \'\'">\n          <label *ngFor="let checkboxItem of checkboxList"\n                 [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n                 [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n          (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n          (\' \' + (options?.style?.unselected || \'\')))">\n              <input type="checkbox"\n                     [attr.required]="options?.required"\n                     [checked]="checkboxItem.checked"\n                     [class]="options?.fieldHtmlClass || \'\'"\n                     [disabled]="controlDisabled"\n                     [id]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n                     [name]="checkboxItem?.name"\n                     [readonly]="options?.readonly ? \'readonly\' : null"\n                     [value]="checkboxItem.value"\n                     (change)="updateValue($event)">\n              <span [innerHTML]="checkboxItem.name"></span>\n          </label>\n      </div>\n\n      \x3c!-- \'vertical\' = regular checkboxes --\x3e\n      <div *ngIf="layoutOrientation === \'vertical\'">\n          <div *ngFor="let checkboxItem of checkboxList" [class]="options?.htmlClass || \'\'">\n              <label\n                      [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n                      [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n            (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n            (\' \' + (options?.style?.unselected || \'\')))">\n                  <input type="checkbox"\n                         [attr.required]="options?.required"\n                         [checked]="checkboxItem.checked"\n                         [class]="options?.fieldHtmlClass || \'\'"\n                         [disabled]="controlDisabled"\n                         [id]="options?.name + \'/\' + checkboxItem.value"\n                         [name]="checkboxItem?.name"\n                         [readonly]="options?.readonly ? \'readonly\' : null"\n                         [value]="checkboxItem.value"\n                         (change)="updateValue($event)">\n                  <span [innerHTML]="checkboxItem?.name"></span>\n              </label>\n          </div>\n      </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var w=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"file-widget",template:""}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var N=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"input-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n        <datalist *ngIf="options?.typeahead?.source"\n          [id]="\'control\' + layoutNode?._id + \'Autocomplete\'">\n          <option *ngFor="let word of options?.typeahead?.source" [value]="word">\n        </datalist>\n    </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var k=function(){function t(t){this.jsf=t,this.message=null}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.message=this.options.help||this.options.helpvalue||this.options.msg||this.options.message},t.decorators=[{type:e.Component,args:[{selector:"message-widget",template:'\n    <span *ngIf="message"\n      [class]="options?.labelHtmlClass || \'\'"\n      [innerHTML]="message"></span>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var F=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"none-widget",template:""}]}],t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var j=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"number-widget",template:'\n      <div [class]="options?.htmlClass || \'\'">\n          <label *ngIf="options?.title"\n                 [attr.for]="\'control\' + layoutNode?._id"\n                 [class]="options?.labelHtmlClass || \'\'"\n                 [style.display]="options?.notitle ? \'none\' : \'\'"\n                 [innerHTML]="options?.title"></label>\n          <input *ngIf="boundControl"\n                 [formControl]="formControl"\n                 [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n                 [attr.max]="options?.maximum"\n                 [attr.min]="options?.minimum"\n                 [attr.placeholder]="options?.placeholder"\n                 [attr.required]="options?.required"\n                 [attr.readonly]="options?.readonly ? \'readonly\' : null"\n                 [attr.step]="options?.multipleOf || options?.step || \'any\'"\n                 [class]="options?.fieldHtmlClass || \'\'"\n                 [id]="\'control\' + layoutNode?._id"\n                 [name]="controlName"\n                 [readonly]="options?.readonly ? \'readonly\' : null"\n                 [title]="lastValidNumber"\n                 [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'">\n          <input *ngIf="!boundControl"\n                 [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n                 [attr.max]="options?.maximum"\n                 [attr.min]="options?.minimum"\n                 [attr.placeholder]="options?.placeholder"\n                 [attr.required]="options?.required"\n                 [attr.readonly]="options?.readonly ? \'readonly\' : null"\n                 [attr.step]="options?.multipleOf || options?.step || \'any\'"\n                 [class]="options?.fieldHtmlClass || \'\'"\n                 [disabled]="controlDisabled"\n                 [id]="\'control\' + layoutNode?._id"\n                 [name]="controlName"\n                 [readonly]="options?.readonly ? \'readonly\' : null"\n                 [title]="lastValidNumber"\n                 [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'"\n                 [value]="controlValue"\n                 (input)="updateValue($event)">\n          <span *ngIf="layoutNode?.type === \'range\'" [innerHTML]="controlValue"></span>\n      </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var O=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.layoutOrientation="vertical",this.radiosList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"!==this.layoutNode.type&&"radiobuttons"!==this.layoutNode.type||(this.layoutOrientation="horizontal"),this.radiosList=f(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"radios-widget",template:"\n    <label *ngIf=\"options?.title\"\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.labelHtmlClass || ''\"\n      [style.display]=\"options?.notitle ? 'none' : ''\"\n      [innerHTML]=\"options?.title\"></label>\n\n    \x3c!-- 'horizontal' = radios-inline or radiobuttons --\x3e\n    <div *ngIf=\"layoutOrientation === 'horizontal'\"\n      [class]=\"options?.htmlClass || ''\">\n      <label *ngFor=\"let radioItem of radiosList\"\n        [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n        [class]=\"(options?.itemLabelHtmlClass || '') +\n          ((controlValue + '' === radioItem?.value + '') ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\">\n        <input type=\"radio\"\n          [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n          [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n          [attr.required]=\"options?.required\"\n          [checked]=\"radioItem?.value === controlValue\"\n          [class]=\"options?.fieldHtmlClass || ''\"\n          [disabled]=\"controlDisabled\"\n          [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [name]=\"controlName\"\n          [value]=\"radioItem?.value\"\n          (change)=\"updateValue($event)\">\n        <span [innerHTML]=\"radioItem?.name\"></span>\n      </label>\n    </div>\n\n    \x3c!-- 'vertical' = regular radios --\x3e\n    <div *ngIf=\"layoutOrientation !== 'horizontal'\">\n      <div *ngFor=\"let radioItem of radiosList\"\n        [class]=\"options?.htmlClass || ''\">\n        <label\n          [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [class]=\"(options?.itemLabelHtmlClass || '') +\n            ((controlValue + '' === radioItem?.value + '') ?\n            (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n            (' ' + (options?.style?.unselected || '')))\">\n          <input type=\"radio\"\n            [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n            [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n            [attr.required]=\"options?.required\"\n            [checked]=\"radioItem?.value === controlValue\"\n            [class]=\"options?.fieldHtmlClass || ''\"\n            [disabled]=\"controlDisabled\"\n            [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n            [name]=\"controlName\"\n            [value]=\"radioItem?.value\"\n            (change)=\"updateValue($event)\">\n          <span [innerHTML]=\"radioItem?.name\"></span>\n        </label>\n      </div>\n    </div>"}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var L=function(){function t(t){this.jsf=t,this.isFlexItem=!1}return t.prototype.isDraggable=function(t){return t.arrayItem&&"$ref"!==t.type&&"list"===t.arrayItemType&&!1!==this.isOrderable},t.prototype.getFlexAttribute=function(t,e){var o=["flex-grow","flex-shrink","flex-basis"].indexOf(e);return((t.options||{}).flex||"").split(/\s+/)[o]||(t.options||{})[e]||["1","1","auto"][o]},t.prototype.showWidget=function(t){return this.jsf.evaluateCondition(t,this.dataIndex)},t.decorators=[{type:e.Component,args:[{selector:"root-widget",template:'\n    <div *ngFor="let layoutItem of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.align-self]="(layoutItem.options || {})[\'align-self\']"\n      [style.flex-basis]="getFlexAttribute(layoutItem, \'flex-basis\')"\n      [style.flex-grow]="getFlexAttribute(layoutItem, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutItem, \'flex-shrink\')"\n      [style.order]="(layoutItem.options || {}).order">\n      <div\n        [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"\n        [orderable]="isDraggable(layoutItem)">\n        <select-framework-widget *ngIf="showWidget(layoutItem)"\n          [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n          [layoutIndex]="(layoutIndex || []).concat(i)"\n          [layoutNode]="layoutItem"></select-framework-widget>\n      </div>\n    </div>',styles:["\n    [draggable=true] {\n      transition: all 150ms cubic-bezier(.4, 0, .2, 1);\n    }\n    [draggable=true]:hover {\n      cursor: move;\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n      position: relative; z-index: 10;\n      margin-top: -1px;\n      margin-left: -1px;\n      margin-right: 1px;\n      margin-bottom: 1px;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={dataIndex:[{type:e.Input}],layoutIndex:[{type:e.Input}],layout:[{type:e.Input}],isOrderable:[{type:e.Input}],isFlexItem:[{type:e.Input}]},t}();var V=function(){function t(t){this.jsf=t,this.expanded=!0}return Object.defineProperty(t.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"fieldset":case"array":case"tab":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;default:this.containerType="div"}},t.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},t.prototype.getFlexAttribute=function(t){var e="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;if("flex"!==t&&!e)return null;switch(t){case"is-flex":return e;case"display":return e?"flex":"initial";case"flex-direction":case"flex-wrap":var o=["flex-direction","flex-wrap"].indexOf(t);return(this.options["flex-flow"]||"").split(/\s+/)[o]||this.options[t]||["column","nowrap"][o];case"justify-content":case"align-items":case"align-content":return this.options[t]}},t.decorators=[{type:e.Component,args:[{selector:"section-widget",template:'\n      <div *ngIf="containerType === \'div\'"\n           [class]="options?.htmlClass || \'\'"\n           [class.expandable]="options?.expandable && !expanded"\n           [class.expanded]="options?.expandable && expanded">\n          <label *ngIf="sectionTitle"\n                 class="legend"\n                 [class]="options?.labelHtmlClass || \'\'"\n                 [innerHTML]="sectionTitle"\n                 (click)="toggleExpanded()"></label>\n          <root-widget *ngIf="expanded"\n                       [dataIndex]="dataIndex"\n                       [layout]="layoutNode.items"\n                       [layoutIndex]="layoutIndex"\n                       [isFlexItem]="getFlexAttribute(\'is-flex\')"\n                       [isOrderable]="options?.orderable"\n                       [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n                       [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n                       [style.align-content]="getFlexAttribute(\'align-content\')"\n                       [style.align-items]="getFlexAttribute(\'align-items\')"\n                       [style.display]="getFlexAttribute(\'display\')"\n                       [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n                       [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n                       [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n      </div>\n      <fieldset *ngIf="containerType === \'fieldset\'"\n                [class]="options?.htmlClass || \'\'"\n                [class.expandable]="options?.expandable && !expanded"\n                [class.expanded]="options?.expandable && expanded"\n                [disabled]="options?.readonly">\n          <legend *ngIf="sectionTitle"\n                  class="legend"\n                  [class]="options?.labelHtmlClass || \'\'"\n                  [innerHTML]="sectionTitle"\n                  (click)="toggleExpanded()"></legend>\n          <div *ngIf="options?.messageLocation !== \'bottom\'">\n              <p *ngIf="options?.description"\n                 class="help-block"\n                 [class]="options?.labelHelpBlockClass || \'\'"\n                 [innerHTML]="options?.description"></p>\n          </div>\n          <root-widget *ngIf="expanded"\n                       [dataIndex]="dataIndex"\n                       [layout]="layoutNode.items"\n                       [layoutIndex]="layoutIndex"\n                       [isFlexItem]="getFlexAttribute(\'is-flex\')"\n                       [isOrderable]="options?.orderable"\n                       [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n                       [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n                       [style.align-content]="getFlexAttribute(\'align-content\')"\n                       [style.align-items]="getFlexAttribute(\'align-items\')"\n                       [style.display]="getFlexAttribute(\'display\')"\n                       [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n                       [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n                       [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n          <div *ngIf="options?.messageLocation === \'bottom\'">\n              <p *ngIf="options?.description"\n                 class="help-block"\n                 [class]="options?.labelHelpBlockClass || \'\'"\n                 [innerHTML]="options?.description"></p>\n          </div>\n      </fieldset>',styles:["\n    .legend { font-weight: bold; }\n    .expandable > legend:before, .expandable > label:before  { content: '▶'; padding-right: .3em; }\n    .expanded > legend:before, .expanded > label:before  { content: '▼'; padding-right: .2em; }\n  "]}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var D=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=r.isArray}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=f(this.options.titleMap||this.options.enumNames,this.options.enum,!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"select-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n      <select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        (change)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n    </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var S=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){var t,e;if(!this.newComponent&&this.jsf.framework&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.jsf.framework))),this.newComponent)try{for(var o=S(["layoutNode","layoutIndex","dataIndex"]),n=o.next();!n.done;n=o.next()){var i=n.value;this.newComponent.instance[i]=this[i]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.decorators=[{type:e.Component,args:[{selector:"select-framework-widget",template:"\n    <div #widgetContainer></div>\n  "}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}],widgetContainer:[{type:e.ViewChild,args:["widgetContainer",{read:e.ViewContainerRef,static:!0}]}]},t}();var P=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){var t,e;if(!this.newComponent&&(this.layoutNode||{}).widget&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.widget))),this.newComponent)try{for(var o=P(["layoutNode","layoutIndex","dataIndex"]),n=o.next();!n.done;n=o.next()){var i=n.value;this.newComponent.instance[i]=this[i]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.decorators=[{type:e.Component,args:[{selector:"select-widget-widget",template:"<div #widgetContainer></div>"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}],widgetContainer:[{type:e.ViewChild,args:["widgetContainer",{read:e.ViewContainerRef,static:!0}]}]},t}();var E=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){var t=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),r.hasOwn(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe((function(e){return t.controlDisabled=!e}))),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},t.prototype.updateValue=function(t){"function"==typeof this.options.onClick?this.options.onClick(t):this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"submit-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <input\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n    </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var W=function(){function t(t){this.jsf=t,this.selectedItem=0,this.showAddTab=!0}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},t.prototype.select=function(t){"$ref"===this.layoutNode.items[t].type&&(this.itemCount=this.layoutNode.items.length,this.jsf.addItem({layoutNode:this.layoutNode.items[t],layoutIndex:this.layoutIndex.concat(t),dataIndex:this.dataIndex.concat(t)}),this.updateControl()),this.selectedItem=t},t.prototype.updateControl=function(){var t=this.layoutNode.items[this.layoutNode.items.length-1];"$ref"===t.type&&this.itemCount>=(t.options.maxItems||1e3)&&(this.showAddTab=!1)},t.prototype.setTabTitle=function(t,e){return this.jsf.setArrayItemTitle(this,t,e)},t.decorators=[{type:e.Component,args:[{selector:"tabs-widget",template:"\n    <ul\n      [class]=\"options?.labelHtmlClass || ''\">\n      <li *ngFor=\"let item of layoutNode?.items; let i = index\"\n        [class]=\"(options?.itemLabelHtmlClass || '') + (selectedItem === i ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + options?.style?.unselected))\"\n        role=\"presentation\"\n        data-tabs>\n        <a *ngIf=\"showAddTab || item.type !== '$ref'\"\n           [class]=\"'nav-link' + (selectedItem === i ? (' ' + options?.activeClass + ' ' + options?.style?.selected) :\n            (' ' + options?.style?.unselected))\"\n          [innerHTML]=\"setTabTitle(item, i)\"\n          (click)=\"select(i)\"></a>\n      </li>\n    </ul>\n\n    <div *ngFor=\"let layoutItem of layoutNode?.items; let i = index\"\n      [class]=\"options?.htmlClass || ''\">\n\n      <select-framework-widget *ngIf=\"selectedItem === i\"\n        [class]=\"(options?.fieldHtmlClass || '') +\n          ' ' + (options?.activeClass || '') +\n          ' ' + (options?.style?.selected || '')\"\n        [dataIndex]=\"layoutNode?.dataType === 'array' ? (dataIndex || []).concat(i) : dataIndex\"\n        [layoutIndex]=\"(layoutIndex || []).concat(i)\"\n        [layoutNode]=\"layoutItem\"></select-framework-widget>\n\n    </div>",styles:[" a { cursor: pointer; } "]}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var M=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){var t,e;if(!this.newComponent&&this.layoutNode.options.template&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.options.template))),this.newComponent)try{for(var o=M(["layoutNode","layoutIndex","dataIndex"]),n=o.next();!n.done;n=o.next()){var i=n.value;this.newComponent.instance[i]=this[i]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.decorators=[{type:e.Component,args:[{selector:"template-widget",template:"<div #widgetContainer></div>"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}],widgetContainer:[{type:e.ViewChild,args:["widgetContainer",{read:e.ViewContainerRef,static:!0}]}]},t}();var H=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:e.Component,args:[{selector:"textarea-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <textarea *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"></textarea>\n      <textarea *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [value]="controlValue"\n        (input)="updateValue($event)">{{controlValue}}</textarea>\n    </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var R=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(){function t(){this.defaultWidget="text",this.widgetLibrary={none:F,root:L,"select-framework":A,"select-widget":T,$ref:g,email:"text",integer:"number",number:j,password:"text",search:"text",tel:"text",text:N,ur:"text",color:"text",date:"text",datetime:"text","datetime-local":"text",month:"text",range:"number",time:"text",week:"text",checkbox:x,file:w,hidden:"text",image:"text",radio:"radios",reset:"submit",submit:E,button:v,select:D,textarea:H,checkboxes:C,"checkboxes-inline":"checkboxes",checkboxbuttons:"checkboxes",radios:O,"radios-inline":"radios",radiobuttons:"radios",section:V,div:"section",fieldset:"section",flex:"section","one-of":b,array:"section",tabarray:"tabs",tab:"section",tabs:W,message:k,help:"message",msg:"message",html:"message",template:_,advancedfieldset:"section",authfieldset:"section",optionfieldset:"one-of",selectfieldset:"one-of",conditional:"section",actions:"section",tagsinput:"section",updown:"number","date-time":"datetime-local","alt-datetime":"datetime-local","alt-date":"date",wizard:"section",textline:"text"},this.registeredWidgets={},this.frameworkWidgets={},this.activeWidgets={},this.setActiveWidgets()}return t.prototype.setActiveWidgets=function(){var t,e;this.activeWidgets=Object.assign({},this.widgetLibrary,this.frameworkWidgets,this.registeredWidgets);try{for(var o=R(Object.keys(this.activeWidgets)),n=o.next();!n.done;n=o.next()){var i=n.value,a=this.activeWidgets[i];if("string"==typeof a){for(var r=[];"string"==typeof a&&!r.includes(a);)r.push(a),a=this.activeWidgets[a];"string"!=typeof a&&(this.activeWidgets[i]=a)}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return!0},t.prototype.setDefaultWidget=function(t){return!!this.hasWidget(t)&&(this.defaultWidget=t,!0)},t.prototype.hasWidget=function(t,e){return void 0===e&&(e="activeWidgets"),!(!t||"string"!=typeof t)&&r.hasOwn(this[e],t)},t.prototype.hasDefaultWidget=function(t){return this.hasWidget(t,"widgetLibrary")},t.prototype.registerWidget=function(t,e){return!(!t||!e||"string"!=typeof t)&&(this.registeredWidgets[t]=e,this.setActiveWidgets())},t.prototype.unRegisterWidget=function(t){return!!r.hasOwn(this.registeredWidgets,t)&&(delete this.registeredWidgets[t],this.setActiveWidgets())},t.prototype.unRegisterAllWidgets=function(t){return void 0===t&&(t=!0),this.registeredWidgets={},t&&(this.frameworkWidgets={}),this.setActiveWidgets()},t.prototype.registerFrameworkWidgets=function(t){return null!==t&&"object"==typeof t||(t={}),this.frameworkWidgets=t,this.setActiveWidgets()},t.prototype.unRegisterFrameworkWidgets=function(){return!!Object.keys(this.frameworkWidgets).length&&(this.frameworkWidgets={},this.setActiveWidgets())},t.prototype.getWidget=function(t,e){return void 0===e&&(e="activeWidgets"),this.hasWidget(t,e)?this[e][t]:this.hasWidget(this.defaultWidget,e)?this[e][this.defaultWidget]:null},t.prototype.getAllWidgets=function(){return{widgetLibrary:this.widgetLibrary,registeredWidgets:this.registeredWidgets,frameworkWidgets:this.frameworkWidgets,activeWidgets:this.activeWidgets}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var G=function(){function t(t,e){var o=this;this.frameworks=t,this.widgetLibrary=e,this.activeFramework=null,this.loadExternalAssets=!1,this.frameworkLibrary={},this.frameworks.forEach((function(t){return o.frameworkLibrary[t.name]=t})),this.defaultFramework=this.frameworks[0].name,this.setFramework(this.defaultFramework)}return t.prototype.setLoadExternalAssets=function(t){void 0===t&&(t=!0),this.loadExternalAssets=!!t},t.prototype.setFramework=function(t,e){return void 0===t&&(t=this.defaultFramework),void 0===e&&(e=this.loadExternalAssets),this.activeFramework="string"==typeof t&&this.hasFramework(t)?this.frameworkLibrary[t]:"object"==typeof t&&r.hasOwn(t,"framework")?t:this.frameworkLibrary[this.defaultFramework],this.registerFrameworkWidgets(this.activeFramework)},t.prototype.registerFrameworkWidgets=function(t){return r.hasOwn(t,"widgets")?this.widgetLibrary.registerFrameworkWidgets(t.widgets):this.widgetLibrary.unRegisterFrameworkWidgets()},t.prototype.hasFramework=function(t){return r.hasOwn(this.frameworkLibrary,t)},t.prototype.getFramework=function(){return this.activeFramework||this.setFramework("default",!0),this.activeFramework.framework},t.prototype.getFrameworkWidgets=function(){return this.activeFramework.widgets||{}},t.prototype.getFrameworkStylesheets=function(t){return void 0===t&&(t=this.loadExternalAssets),t&&this.activeFramework.stylesheets||[]},t.prototype.getFrameworkScripts=function(t){return void 0===t&&(t=this.loadExternalAssets),t&&this.activeFramework.scripts||[]},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Inject,args:[r.Framework]}]},{type:q,decorators:[{type:e.Inject,args:[q]}]}]},t}();var $=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.jsf.initializeControl(this)},t.decorators=[{type:e.Component,args:[{selector:"hidden-widget",template:'\n    <input *ngIf="boundControl"\n      [formControl]="formControl"\n      [id]="\'control\' + layoutNode?._id"\n      [name]="controlName"\n      type="hidden">\n    <input *ngIf="!boundControl"\n      [disabled]="controlDisabled"\n      [name]="controlName"\n      [id]="\'control\' + layoutNode?._id"\n      type="hidden"\n      [value]="controlValue">'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var z=function(){function t(t){this.jsf=t}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},t.decorators=[{type:e.Component,args:[{selector:"tab-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <root-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layout]="layoutNode.items"></root-widget>\n    </div>'}]}],t.ctorParameters=function(){return[{type:u}]},t.propDecorators={layoutNode:[{type:e.Input}],layoutIndex:[{type:e.Input}],dataIndex:[{type:e.Input}]},t}();var J=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[u]}},t.decorators=[{type:e.NgModule,args:[{imports:[s.CommonModule,l.FormsModule,l.ReactiveFormsModule],declarations:[g,b,v,x,C,w,$,N,k,F,j,O,L,V,D,A,T,E,z,W,_,H,p],entryComponents:[g,b,v,x,C,w,$,N,k,F,j,O,L,V,D,A,T,E,z,W,_,H],exports:[g,b,v,x,C,w,$,N,k,F,j,O,L,V,D,A,T,E,z,W,_,H,p],providers:[u]}]}],t}();t.AddReferenceComponent=g,t.ButtonComponent=v,t.CheckboxComponent=x,t.CheckboxesComponent=C,t.FileComponent=w,t.FrameworkLibraryService=G,t.HiddenComponent=$,t.InputComponent=N,t.JsonSchemaFormService=u,t.MessageComponent=k,t.NoneComponent=F,t.NumberComponent=j,t.OneOfComponent=b,t.OrderableDirective=p,t.RadiosComponent=O,t.RootComponent=L,t.SectionComponent=V,t.SelectComponent=D,t.SelectFrameworkComponent=A,t.SelectWidgetComponent=T,t.SubmitComponent=E,t.TabComponent=z,t.TabsComponent=W,t.TemplateComponent=_,t.TextareaComponent=H,t.WidgetLibraryModule=J,t.WidgetLibraryService=q,t.buildTitleMap=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngsf-widget-library.umd.min.js.map