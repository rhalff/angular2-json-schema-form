!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("rxjs-compat/Observable"),require("rxjs-compat/observable/fromPromise"),require("rxjs-compat/operator/toPromise"),require("@angular/core"),require("lodash"),require("rxjs-compat/observable/forkJoin"),require("rxjs-compat/operator/map"),require("@angular/forms"),require("rxjs-compat/Subject"),require("ajv"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular2-json-schema-form",["exports","tslib","rxjs-compat/Observable","rxjs-compat/observable/fromPromise","rxjs-compat/operator/toPromise","@angular/core","lodash","rxjs-compat/observable/forkJoin","rxjs-compat/operator/map","@angular/forms","rxjs-compat/Subject","ajv","@angular/platform-browser","@angular/common"],t):t(e["angular2-json-schema-form"]={},e.tslib,e.rxjs.Observable,e.rxjs.observable.fromPromise,e.rxjs.operator.toPromise,e.ng.core,e._,e.rxjs.observable.forkJoin,e.rxjs.operator.map,e.ng.forms,e.rxjs.Subject,e.Ajv,e.ng.platformBrowser,e.ng.common)}(this,function(e,q,o,i,t,a,A,s,l,u,n,r,d,p){"use strict";function c(t,e,n){return void 0===n&&(n=!1),e.map(function(e){return e(t,n)})}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,o,i,a={};try{for(var s=q.__values(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(z(u))try{for(var d=q.__values(Object.keys(u)),p=d.next();!p.done;p=d.next()){var c=p.value,m=u[c],f=a[c];a[c]=V(f)?"not"===c&&_(f,"strict")&&_(m,"strict")?C(f,m):"object"===I(f)&&"object"===I(m)?v(f,m):m:m}}catch(h){o={error:h}}finally{try{p&&!p.done&&(i=d["return"])&&i.call(d)}finally{if(o)throw o.error}}}}catch(y){n={error:y}}finally{try{l&&!l.done&&(r=s["return"])&&r.call(s)}finally{if(n)throw n.error}}return a}function m(e){var t=v.apply(void 0,q.__spread(e));return R(t)?null:t}function V(e){return e!==undefined&&null!==e}function y(e){return e!==undefined&&null!==e&&""!==e}function R(e){return W(e)?!e.length:z(e)?!Object.keys(e).length:e===undefined||null===e||""===e}function T(e){return"string"==typeof e}function $(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0)}function f(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0&&e%1==0)}function _(e,t){return void 0===t&&(t=null),"strict"===t?!0===e||!1===e:!0===t?!0===e||1===e||"true"===e||"1"===e:!1===t?!1===e||0===e||"false"===e||"0"===e:!0===e||1===e||"true"===e||"1"===e||!1===e||0===e||"false"===e||"0"===e}function z(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function W(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)}function h(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function g(e){return"object"==typeof e&&"[object Map]"===Object.prototype.toString.call(e)}function b(e){return"object"==typeof e&&"[object Set]"===Object.prototype.toString.call(e)}function I(e,t){return void 0===t&&(t=!1),V(e)?W(e)?"array":z(e)?"object":_(e,"strict")?"boolean":f(e,t)?"integer":$(e,t)?"number":T(e)||!t&&h(e)?"string":null:"null"}function x(e,t){switch(t){case"string":return T(e)||h(e);case"number":return $(e);case"integer":return f(e);case"boolean":return _(e);case"null":return!y(e);default:return console.error('isType error: "'+t+'" is not a recognized type.'),null}}function j(e,t,n){if(void 0===n&&(n=!0),!V(e))return null;if(T(t)&&(t=[t]),n&&P("integer",t)){if(f(e,"strict"))return e;if(f(e))return parseInt(e,10)}if(P("number",t)||!n&&P("integer",t)){if($(e,"strict"))return e;if($(e))return parseFloat(e)}if(P("string",t)){if(T(e))return e;if(h(e))return e.toISOString().slice(0,10);if($(e))return e.toString()}if(h(e)&&(P("integer",t)||P("number",t)))return e.getTime();if(P("boolean",t)){if(_(e,!0))return!0;if(_(e,!1))return!1}return null}function F(e){var t,n,r=(t=e)&&"function"==typeof t.then?i.fromPromise(e):e;return(n=r)&&"function"==typeof n.subscribe?r:(console.error("toObservable error: Expected validator to return Promise or Observable."),new o.Observable)}function P(e,t,n){return void 0===n&&(n=!1),!(!V(e)||!W(t))&&(W(e)?e[n?"every":"some"](function(e){return t.includes(e)}):t.includes(e))}function C(e,t){return!!e&&!t||!e&&!!t}function k(e,t){return void 0===t&&(t=!1),"object"!=typeof e||null===e?e:g(e)?new Map(e):b(e)?new Set(e):W(e)?q.__spread(e):z(e)?Object.assign({},e):(t&&console.error("copy error: Object to copy must be a JavaScript object or value."),e)}function N(e,t,n,r,o){if(void 0===n&&(n=!1),void 0===r&&(r=e),void 0===o&&(o=!1),!R(e)){if((z(e)||W(e))&&"function"==typeof t)try{for(var i=q.__values(Object.keys(e)),a=i.next();!a.done;a=i.next()){var s=a.value,l=e[s];"bottom-up"===n&&(z(l)||W(l))&&N(l,t,n,r),t(l,s,e,r),"top-down"===n&&(z(l)||W(l))&&N(l,t,n,r)}}catch(p){u={error:p}}finally{try{a&&!a.done&&(d=i["return"])&&d.call(i)}finally{if(u)throw u.error}}var u,d;o&&("function"!=typeof t&&(console.error("forEach error: Iterator must be a function."),console.error("function",t)),z(e)||W(e)||(console.error("forEach error: Input object must be an object or array."),console.error("object",e)))}}function w(e,t,n){if(void 0===n&&(n=!1),y(e)){if((z(e)||W(e))&&"function"!=typeof e){var r=W(e)?[]:{};try{for(var o=q.__values(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value;r[a]=t(e[a],a,e)}}catch(u){s={error:u}}finally{try{i&&!i.done&&(l=o["return"])&&l.call(o)}finally{if(s)throw s.error}}return r}var s,l;n&&("function"!=typeof t&&(console.error("forEachCopy error: Iterator must be a function."),console.error("function",t)),z(e)||W(e)||(console.error("forEachCopy error: Input object must be an object or array."),console.error("object",e)))}}function J(e,t){if(!(e&&["number","string","symbol"].includes(typeof t)&&(z(e)||W(e)||g(e)||b(e))))return!1;if(g(e)||b(e))return e.has(t);if("number"==typeof t){if(W(e))return e[t];t+=""}return e.hasOwnProperty(t)}function O(e,t,n,r,o){if(void 0===n&&(n=[]),void 0===r&&(r=function(e){return e}),void 0===o&&(o=function(e){return e}),!z(t))return e;z(e)||(e={});try{for(var i=q.__values(Object.keys(t)),a=i.next();!a.done;a=i.next()){var s=a.value;!P(s,n)&&V(t[s])&&(e[r(s)]=o(t[s]))}}catch(d){l={error:d}}finally{try{a&&!a.done&&(u=i["return"])&&u.call(i)}finally{if(l)throw l.error}}return e;var l,u}function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,o=[];try{for(var i=q.__values(e),a=i.next();!a.done;a=i.next()){var s=a.value;o.includes(s)||o.push(s)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return o}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,o=null,i=function(t){if(T(t)&&(t=[t]),!(o=null===o?q.__spread(t):o.filter(function(e){return t.includes(e)})).length)return{value:[]}};try{for(var a=q.__values(e),s=a.next();!s.done;s=a.next()){var l=i(s.value);if("object"==typeof l)return l.value}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a["return"])&&r.call(a)}finally{if(n)throw n.error}}return o}function S(e){return e&&D(e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," "))}function D(o,e){if(!T(o))return o;var i=["a","an","and","as","at","but","by","en","for","if","in","nor","of","on","or","per","the","to","v","v.","vs","vs.","via"];T(e)&&(e=e.split("|")),W(e)&&(i=i.concat(e));var a=i.map(function(e){return e.toLowerCase()}),s=o===o.toUpperCase()||o===o.toLowerCase(),l="";return(o=o.trim()).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,t){if(s||-1===e.slice(1).search(/[A-Z]|\../)){var n=void 0,r=i[a.indexOf(e.toLowerCase())];return n=r?r===r.toLowerCase()&&(0===t||t+e.length===o.length||":"===l||-1!==o[t-1].search(/[^\s-]/)||"-"!==o[t-1]&&"-"===o[t+e.length])?r[0].toUpperCase()+r.slice(1):r:s?-1!==e.slice(1).search(/\../)?e.toLowerCase():e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()+e.slice(1),l=e.slice(-1),n}return e})}var L=function(){function e(){}return e.get=function(e,t,n,r,o,i){if(void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),void 0===i&&(i=!1),null===e)return!o&&undefined;var a,s,l=this.parse(t,i);if("object"==typeof e&&null!==l){var u=e;if(n>=l.length||r<=-l.length)return e;n<=-l.length&&(n=0),(!V(r)||r>=l.length)&&(r=l.length),l=l.slice(n,r);try{for(var d=q.__values(l),p=d.next();!p.done;p=d.next()){var c=p.value;if("-"===c&&W(u)&&u.length&&(c=u.length-1),g(u)&&u.has(c))u=u.get(c);else{if("object"!=typeof u||null===u||!J(u,c))return i&&(console.error('get error: "'+c+'" key not found in object.'),console.error(t),console.error(e)),!o&&undefined;u=u[c]}}}catch(m){a={error:m}}finally{try{p&&!p.done&&(s=d["return"])&&s.call(d)}finally{if(a)throw a.error}}return!!o||u}return i&&null===l&&console.error("get error: Invalid JSON Pointer: "+t),i&&"object"!=typeof e&&(console.error("get error: Invalid object:"),console.error(e)),!o&&undefined},e.getCopy=function(e,t,n,r,o,i){void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),void 0===i&&(i=!1);var a=this.get(e,t,n,r,o,i);return this.forEachDeepCopy(a)},e.getFirst=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!1),!R(e)){if(W(e)){try{for(var r=q.__values(e),o=r.next();!o.done;o=r.next()){var i=o.value;if(!R(i)){if(!(W(i)&&2<=i.length))return void console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]");if(R(i[0])||R(i[1]))continue;if(l=n?this.getCopy(i[0],i[1]):this.get(i[0],i[1]))return l}}}catch(y){c={error:y}}finally{try{o&&!o.done&&(m=r["return"])&&m.call(r)}finally{if(c)throw c.error}}return t}if(g(e)){try{for(var a=q.__values(e),s=a.next();!s.done;s=a.next()){var l,u=q.__read(s.value,2),d=u[0],p=u[1];if(null!==d&&this.isJsonPointer(p))if(l=n?this.getCopy(d,p):this.get(d,p))return l}}catch(v){f={error:v}}finally{try{s&&!s.done&&(h=a["return"])&&h.call(a)}finally{if(f)throw f.error}}return t}return console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]"),t;var c,m,f,h}},e.getFirstCopy=function(e,t){return void 0===t&&(t=null),this.getFirst(e,t,!0)},e.set=function(e,t,n,r){void 0===r&&(r=!1);var o=this.parse(t);if(null!==o&&o.length){for(var i=e,a=0;a<o.length-1;++a){var s=o[a];"-"===s&&W(i)&&(s=i.length),g(i)&&i.has(s)?i=i.get(s):(J(i,s)||(i[s]=o[a+1].match(/^(\d+|-)$/)?[]:{}),i=i[s])}var l=o[o.length-1];return W(i)&&"-"===l?i.push(n):r&&W(i)&&!isNaN(+l)?i.splice(l,0,n):g(i)?i.set(l,n):i[l]=n,e}return console.error("set error: Invalid JSON Pointer: "+t),e},e.setCopy=function(e,t,n,r){void 0===r&&(r=!1);var o=this.parse(t);if(null!==o){for(var i=k(e),a=i,s=0;s<o.length-1;++s){var l=o[s];"-"===l&&W(a)&&(l=a.length),g(a)&&a.has(l)?(a.set(l,k(a.get(l))),a=a.get(l)):(J(a,l)||(a[l]=o[s+1].match(/^(\d+|-)$/)?[]:{}),a[l]=k(a[l]),a=a[l])}var u=o[o.length-1];return W(a)&&"-"===u?a.push(n):r&&W(a)&&!isNaN(+u)?a.splice(u,0,n):g(a)?a.set(u,n):a[u]=n,i}return console.error("setCopy error: Invalid JSON Pointer: "+t),e},e.insert=function(e,t,n){return this.set(e,t,n,!0)},e.insertCopy=function(e,t,n){return this.setCopy(e,t,n,!0)},e.remove=function(e,t){var n=this.parse(t);if(null!==n&&n.length){var r=n.pop(),o=this.get(e,n);return W(o)?("-"===r&&(r=o.length-1),o.splice(r,1)):z(o)&&delete o[r],e}return console.error("remove error: Invalid JSON Pointer: "+t),e},e.has=function(e,t){return this.get(e,t,0,null,!0)},e.dict=function(e){var n={};return this.forEachDeep(e,function(e,t){"object"!=typeof e&&(n[t]=e)}),n},e.forEachDeep=function(e,t,n,r,o){if(void 0===t&&(t=function(e){return e}),void 0===n&&(n=!1),void 0===r&&(r=""),void 0===o&&(o=e),"function"==typeof t){if(n||t(e,r,o),z(e)||W(e))try{for(var i=q.__values(Object.keys(e)),a=i.next();!a.done;a=i.next()){var s=a.value,l=r+"/"+this.escape(s);this.forEachDeep(e[s],t,n,l,o)}}catch(p){u={error:p}}finally{try{a&&!a.done&&(d=i["return"])&&d.call(i)}finally{if(u)throw u.error}}var u,d;n&&t(e,r,o)}else console.error("forEachDeep error: Iterator is not a function:",t)},e.forEachDeepCopy=function(e,t,n,r,o){if(void 0===t&&(t=function(e){return e}),void 0===n&&(n=!1),void 0===r&&(r=""),void 0===o&&(o=e),"function"!=typeof t)return console.error("forEachDeepCopy error: Iterator is not a function:",t),null;if(z(e)||W(e)){var i=W(e)?q.__spread(e):Object.assign({},e);n||(i=t(i,r,o));try{for(var a=q.__values(Object.keys(i)),s=a.next();!s.done;s=a.next()){var l=s.value,u=r+"/"+this.escape(l);i[l]=this.forEachDeepCopy(i[l],t,n,u,o)}}catch(c){d={error:c}}finally{try{s&&!s.done&&(p=a["return"])&&p.call(a)}finally{if(d)throw d.error}}return n&&(i=t(i,r,o)),i}return t(e,r,o);var d,p},e.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},e.unescape=function(e){return e.toString().replace(/~1/g,"/").replace(/~0/g,"~")},e.parse=function(e,t){return void 0===t&&(t=!1),this.isJsonPointer(e)?W(e)?e:"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),""===e||"/"===e?[]:e.slice(1).split("/").map(this.unescape)):void 0:(t&&console.error("parse error: Invalid JSON Pointer: "+e),null)},e.compile=function(e,t,n){var r=this;return void 0===t&&(t=""),void 0===n&&(n=!1),"#"===e?"":this.isJsonPointer(e)?W(e)?0===e.length?"":"/"+e.map(function(e){return""===e?t:r.escape(e)}).join("/"):"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),e):void 0:(n&&console.error("compile error: Invalid JSON Pointer: "+e),null)},e.toKey=function(e,t){void 0===t&&(t=!1);var n=this.parse(e,t);return null===n?null:n.length?n[n.length-1]:""},e.isJsonPointer=function(e){if(W(e))return e.every(function(e){return"string"==typeof e});if(T(e)){if(""===e||"#"===e)return!0;if("/"===e[0]||"#/"===e.slice(0,2))return!/(~[^01]|~$)/g.test(e)}return!1},e.isSubPointer=function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),this.isJsonPointer(e)&&this.isJsonPointer(t))return(e=this.compile(e,"",r))===(t=this.compile(t,"",r))?n:e+"/"===t.slice(0,e.length+1);if(r){var o="";this.isJsonPointer(e)||(o+=" 1: "+e),this.isJsonPointer(t)||(o+=" 2: "+t),console.error("isSubPointer error: Invalid JSON Pointer "+o)}},e.toIndexedPointer=function(e,n,r){if(void 0===r&&(r=null),this.isJsonPointer(e)&&W(n)){var o=this.compile(e);if(g(r)){var i=0;return o.replace(/\/\-(?=\/|$)/g,function(e,t){return r.has(o.slice(0,t))?"/"+n[i++]:e})}try{for(var t=q.__values(n),a=t.next();!a.done;a=t.next()){var s=a.value;o=o.replace("/-","/"+s)}}catch(d){l={error:d}}finally{try{a&&!a.done&&(u=t["return"])&&u.call(t)}finally{if(l)throw l.error}}return o}var l,u;this.isJsonPointer(e)||console.error("toIndexedPointer error: Invalid JSON Pointer: "+e),W(n)||console.error("toIndexedPointer error: Invalid indexArray: "+n)},e.toGenericPointer=function(e,t){if(void 0===t&&(t=new Map),this.isJsonPointer(e)&&g(t)){for(var n=this.parse(e),r=1;r<n.length;r++){var o=this.compile(n.slice(0,r));t.has(o)&&t.get(o)<=+n[r]&&(n[r]="-")}return this.compile(n)}this.isJsonPointer(e)||console.error("toGenericPointer error: invalid JSON Pointer: "+e),g(t)||console.error("toGenericPointer error: invalid arrayMap: "+t)},e.toControlPointer=function(e,t,n){void 0===n&&(n=!1);var r,o,i=this.parse(e),a=[],s=t;if(null!==i){try{for(var l=q.__values(i),u=l.next();!u.done;u=l.next()){var d=u.value;if(J(s,"controls")&&(a.push("controls"),s=s.controls),W(s)&&"-"===d)a.push((s.length-1).toString()),s=s[s.length-1];else if(J(s,d))a.push(d),s=s[d];else{if(n)return console.error('toControlPointer error: Unable to find "'+d+'" item in FormGroup.'),console.error(e),void console.error(t);a.push(d),s={controls:{}}}}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=l["return"])&&o.call(l)}finally{if(r)throw r.error}}return this.compile(a)}console.error("toControlPointer error: Invalid JSON Pointer: "+e)},e.toSchemaPointer=function(e,t){if(this.isJsonPointer(e)&&"object"==typeof t){var n=this.parse(e);if(!n.length)return"";var r=n.shift();if("object"===t.type||t.properties||t.additionalProperties){if((t.properties||{})[r])return"/properties/"+this.escape(r)+this.toSchemaPointer(n,t.properties[r]);if(t.additionalProperties)return"/additionalProperties"+this.toSchemaPointer(n,t.additionalProperties)}if(("array"===t.type||t.items)&&($(r)||"-"===r||""===r)){var o="-"===r||""===r?0:+r;if(W(t.items)){if(o<t.items.length)return"/items/"+o+this.toSchemaPointer(n,t.items[o]);if(t.additionalItems)return"/additionalItems"+this.toSchemaPointer(n,t.additionalItems)}else{if(z(t.items))return"/items"+this.toSchemaPointer(n,t.items);if(z(t.additionalItems))return"/additionalItems"+this.toSchemaPointer(n,t.additionalItems)}}return console.error("toSchemaPointer error: Data pointer "+e+" not compatible with schema "+t),null}return this.isJsonPointer(e)||console.error("toSchemaPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toSchemaPointer error: Invalid JSON Schema: "+t),null},e.toDataPointer=function(e,t,n){if(void 0===n&&(n=!1),this.isJsonPointer(e)&&"object"==typeof t&&this.has(t,e)){var r=this.parse(e);if(!r.length)return"";var o=r.shift();if("properties"===o||"items"===o&&W(t.items)){var i,a=r.shift();return null===(i=this.toDataPointer(r,t[o][a]))?null:"/"+a+i}if("additionalItems"===o||"items"===o&&z(t.items))return null===(i=this.toDataPointer(r,t[o]))?null:"/-"+i;if(["allOf","anyOf","oneOf"].includes(o)){a=r.shift();return this.toDataPointer(r,t[o][a])}return"not"===o?this.toDataPointer(r,t[o]):(["contains","definitions","dependencies","additionalItems","additionalProperties","patternProperties","propertyNames"].includes(o)&&n&&console.error("toDataPointer error: Ambiguous location"),"")}return n&&(this.isJsonPointer(e)||console.error("toDataPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toDataPointer error: Invalid JSON Schema: "+t),"object"!=typeof t&&console.error("toDataPointer error: Pointer "+e+" invalid for Schema: "+t)),null},e.parseObjectPath=function(e){if(W(e))return e;if(this.isJsonPointer(e))return this.parse(e);if("string"==typeof e){for(var t=0,n=[];t<e.length;){var r=e.indexOf(".",t),o=e.indexOf("[",t);if(-1===r&&-1===o)n.push(e.slice(t)),t=e.length;else if(-1!==r&&(r<o||-1===o))n.push(e.slice(t,r)),t=r+1;else{t<o&&(n.push(e.slice(t,o)),t=o);var i=e.charAt(o+1);if('"'===i||"'"===i){for(var a=e.indexOf(i+"]",o);-1!==a&&"\\"===e.charAt(a-1);)a=e.indexOf(i+"]",a+2);-1===a&&(a=e.length),n.push(e.slice(t+2,a).replace(new RegExp("\\"+i,"g"),i)),t=a+2}else{-1===(a=e.indexOf("]",o))&&(a=e.length),n.push(e.slice(t+1,a)),t=a+1}"."===e.charAt(t)&&t++}}return n}console.error("parseObjectPath error: Input object path must be a string.")},e}();function B(){for(var S=[],e=0;e<arguments.length;e++)S[e]=arguments[e];if((S=S.filter(function(e){return!R(e)})).some(function(e){return!z(e)}))return null;var t,n,r,o,L={};try{for(var i=q.__values(S),a=i.next();!a.done;a=i.next()){var E=a.value,s=function(e){var t,n,r,o,i,a,s,l,u,d,p=L[e],c=E[e];if(!J(L,e)||A.isEqual(p,c))L[e]=c;else switch(e){case"allOf":if(!W(p)||!W(c))return{value:{allOf:q.__spread(S)}};L.allOf=B.apply(void 0,q.__spread(p,c));break;case"additionalItems":case"additionalProperties":case"contains":case"propertyNames":if(z(p)&&z(c))L[e]=B(p,c);else{if("additionalProperties"!==e||!1!==p&&!1!==c)return{value:{allOf:q.__spread(S)}};L.combinedSchema=!1}break;case"anyOf":case"oneOf":case"enum":if(!W(p)||!W(c))return{value:{allOf:q.__spread(S)}};if(L[e]=p.filter(function(t){return-1<c.findIndex(function(e){return A.isEqual(t,e)})}),!L[e].length)return{value:{allOf:q.__spread(S)}};break;case"definitions":if(!z(p)||!z(c))return{value:{allOf:q.__spread(S)}};var m=Object.assign({},p);try{for(var f=q.__values(Object.keys(c)),h=f.next();!h.done;h=f.next()){if(J(m,P=h.value)&&!A.isEqual(m[P],c[P]))return{value:{allOf:q.__spread(S)}};m[P]=c[P]}}catch(k){r={error:k}}finally{try{h&&!h.done&&(o=f["return"])&&o.call(f)}finally{if(r)throw r.error}}L.definitions=m;break;case"dependencies":if(!z(p)||!z(c))return{value:{allOf:q.__spread(S)}};m=Object.assign({},p);try{for(var y=q.__values(Object.keys(c)),v=y.next();!v.done;v=y.next()){if(!J(m,P=v.value)||A.isEqual(m[P],c[P]))m[P]=c[P];else if(W(c[P])&&W(m[P]))m[P]=H.apply(void 0,q.__spread(m[P],c[P]));else{if(!W(c[P])&&!z(c[P])||!W(m[P])&&!z(m[P]))return{value:{allOf:q.__spread(S)}};var g=W(L.required)?L.required:[],b=W(m[P])?{required:H.apply(void 0,q.__spread(g,[m[P]]))}:m[P],I=W(c[P])?{required:H.apply(void 0,q.__spread(g,[c[P]]))}:c[P];m[P]=B(b,I)}}}catch(N){i={error:N}}finally{try{v&&!v.done&&(a=y["return"])&&a.call(y)}finally{if(i)throw i.error}}L.dependencies=m;break;case"items":if(W(p)&&W(c)){if(L.items=p.filter(function(t){return-1<c.findIndex(function(e){return A.isEqual(t,e)})}),!L.items.length)return{value:{allOf:q.__spread(S)}}}else if(z(p)&&z(c))L.items=B(p,c);else if(W(p)&&z(c))L.items=p.map(function(e){return B(e,c)});else{if(!z(p)||!W(c))return{value:{allOf:q.__spread(S)}};L.items=c.map(function(e){return B(e,p)})}break;case"multipleOf":if(!$(p)||!$(c))return{value:{allOf:q.__spread(S)}};var x=function(e,t){return t?x(t,e%t):e};L.multipleOf=(t=p)*(n=c)/x(t,n);break;case"maximum":case"exclusiveMaximum":case"maxLength":case"maxItems":case"maxProperties":if(!$(p)||!$(c))return{value:{allOf:q.__spread(S)}};L[e]=Math.min(p,c);break;case"minimum":case"exclusiveMinimum":case"minLength":case"minItems":case"minProperties":if(!$(p)||!$(c))return{value:{allOf:q.__spread(S)}};L[e]=Math.max(p,c);break;case"not":if(!z(p)||!z(c))return{value:{allOf:q.__spread(S)}};var j=[p,c].reduce(function(e,t){return W(t.anyOf)&&1===Object.keys(t).length?q.__spread(e,t.anyOf):q.__spread(e,[t])},[]);L.not={anyOf:j};break;case"patternProperties":if(!z(p)||!z(c))return{value:{allOf:q.__spread(S)}};m=Object.assign({},p);try{for(var F=q.__values(Object.keys(c)),C=F.next();!C.done;C=F.next()){if(!J(m,P=C.value)||A.isEqual(m[P],c[P]))m[P]=c[P];else{if(!z(c[P])||!z(m[P]))return{value:{allOf:q.__spread(S)}};m[P]=B(m[P],c[P])}}}catch(M){s={error:M}}finally{try{C&&!C.done&&(l=F["return"])&&l.call(F)}finally{if(s)throw s.error}}L.patternProperties=m;break;case"properties":if(!z(p)||!z(c))return{value:{allOf:q.__spread(S)}};var w=Object.assign({},p);J(c,"additionalProperties")&&Object.keys(p).filter(function(e){return!Object.keys(c).includes(e)}).forEach(function(e){!1===c.additionalProperties?delete w[e]:z(c.additionalProperties)&&(w[e]=B(w[e],c.additionalProperties))});try{for(var O=q.__values(Object.keys(c)),D=O.next();!D.done;D=O.next()){var P=D.value;if(A.isEqual(w[P],c[P])||!J(w,P)&&!J(w,"additionalProperties"))w[P]=c[P];else if(!J(w,P)&&J(w,"additionalProperties"))z(w.additionalProperties)&&(w[P]=B(w.additionalProperties,c[P]));else{if(!z(c[P])||!z(w[P]))return{value:{allOf:q.__spread(S)}};w[P]=B(w[P],c[P])}}}catch(V){u={error:V}}finally{try{D&&!D.done&&(d=O["return"])&&d.call(O)}finally{if(u)throw u.error}}L.properties=w;break;case"required":if(W(p)&&W(c))L.required=H.apply(void 0,q.__spread(p,c));else{if("boolean"!=typeof c||"boolean"!=typeof p)return{value:{allOf:q.__spread(S)}};L.required=!!p||!!c}break;case"$schema":case"$id":case"id":break;case"title":case"description":L[e]=c;break;case"type":if(!W(c)&&!T(c)||!W(p)&&!T(p))return{value:{allOf:q.__spread(S)}};var _=G(p,c);if(!_.length)return{value:{allOf:q.__spread(S)}};L.type=1<_.length?_:_[0];break;case"uniqueItems":L.uniqueItems=!!p||!!c;break;default:return{value:{allOf:q.__spread(S)}}}};try{for(var l=q.__values(Object.keys(E)),u=l.next();!u.done;u=l.next()){var d=s(u.value);if("object"==typeof d)return d.value}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=l["return"])&&o.call(l)}finally{if(r)throw r.error}}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}return L}function M(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r,o,i={},a=function(e){var t=I(e,"strict");return{integer:"number","null":"string"}[t]||t},s=function(e){return M(e,t,!1)};if(n&&(i.$schema="http://json-schema.org/draft-06/schema#"),i.type=a(e),"object"===i.type){i.properties={},t&&(i.required=[]);try{for(var l=q.__values(Object.keys(e)),u=l.next();!u.done;u=l.next()){var d=u.value;i.properties[d]=s(e[d]),t&&i.required.push(d)}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=l["return"])&&o.call(l)}finally{if(r)throw r.error}}}else"array"===i.type&&(i.items=e.map(s),1===new Set(e.map(a)).size&&(i.items=i.items.reduce(function(e,t){return Object.assign({},e,t)},{})),t&&(i.minItems=1));return i}function E(e,t,n){if(void 0===n&&(n=new Map),!e)return"";var r=L.toGenericPointer(L.compile(e),n);if(-1===r.indexOf("/"))return r;for(var o=!0;o;)o=!1,t.forEach(function(e,t){if(L.isSubPointer(e,t))for(;L.isSubPointer(t,r,!0);)r=L.toGenericPointer(e+r.slice(t.length),n),o=!0});return r}function U(e,t){void 0===t&&(t=null);var n=L.getFirst([[e,"/x-schema-form/type"],[e,"/x-schema-form/widget/component"],[e,"/x-schema-form/widget"],[e,"/widget/component"],[e,"/widget"]]);if(T(n))return Z(n,e,t);var r=e.type;if(r){if(W(r)&&(r=P("object",r)&&J(e,"properties")?"object":P("array",r)&&J(e,"items")?"array":P("array",r)&&J(e,"additionalItems")?"array":P("string",r)?"string":P("number",r)?"number":P("integer",r)?"integer":P("boolean",r)?"boolean":"unknown"),"boolean"===r)return"checkbox";if("object"===r){if(J(e,"properties")||J(e,"additionalProperties"))return"section";if(J(e,"$ref"))return"$ref"}if("array"===r)return J(L.getFirst([[e,"/items"],[e,"/additionalItems"]])||{},"enum")&&1!==e.maxItems?Z("checkboxes",e,t):"array";if("null"===r)return"none";if(L.has(t,"/options/titleMap")||J(e,"enum")||X(e,null,!0))return"select";if("number"===r||"integer"===r)return("integer"===r||J(e,"multipleOf"))&&J(e,"maximum")&&J(e,"minimum")?"range":r;if("string"===r)return{color:"color",date:"date","date-time":"datetime-local",email:"email",uri:"url"}[e.format]||"text"}return J(e,"$ref")?"$ref":W(e.oneOf)||W(e.anyOf)?"one-of":(console.error("getInputType error: Unable to determine input type for "+r),console.error("schema",e),t&&console.error("layoutNode",t),"none")}function Z(e,t,n){return void 0===n&&(n=null),!T(e)||"checkbox"!==e.slice(0,8)&&"radio"!==e.slice(0,5)?e:!0===L.getFirst([[n,"/inline"],[n,"/options/inline"],[t,"/inline"],[t,"/x-schema-form/inline"],[t,"/x-schema-form/options/inline"],[t,"/x-schema-form/widget/inline"],[t,"/x-schema-form/widget/component/inline"],[t,"/x-schema-form/widget/component/options/inline"],[t,"/widget/inline"],[t,"/widget/component/inline"],[t,"/widget/component/options/inline"]])?"radio"===e.slice(0,5)?"radios-inline":"checkboxes-inline":e}function K(e,t){if(!z(e))return console.error("isInputRequired error: Input schema must be an object."),!1;var n=L.parse(t);if(W(n)){if(!n.length)return!0===e.required;var r=n.pop(),o=n[n.length-1];["properties","additionalProperties","patternProperties","items","additionalItems"].includes(o)&&n.pop();var i=L.get(e,n)||{};if(W(i.required))return i.required.includes(r);if("array"===i.type)return J(i,"minItems")&&$(r)&&+i.minItems>+r}return!1}function Q(e,t,n){if(z(e)&&z(e.options)){var o={},i=function(e){return"ui:"===e.slice(0,3).toLowerCase()?e.slice(3):e};if(O(o,n.formOptions.defautWidgetOptions,[],i),[[L.get(t,"/ui:widget/options"),[]],[L.get(t,"/ui:widget"),[]],[t,["additionalProperties","additionalItems","properties","items","required","type","x-schema-form","$ref"]],[L.get(t,"/x-schema-form/options"),[]],[L.get(t,"/x-schema-form"),["items","options"]],[e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"]],[e.options,[]]].forEach(function(e){var t=q.__read(e,2),n=t[0],r=t[1];return O(o,n,r,i)}),!J(o,"titleMap")){var r=null;(r=X(t,o.flatList))&&(o.titleMap=r),J(o,"titleMap")||J(o,"enum")||!J(t,"items")||(L.has(t,"/items/titleMap")?o.titleMap=t.items.titleMap:L.has(t,"/items/enum")?(o["enum"]=t.items["enum"],!J(o,"enumNames")&&L.has(t,"/items/enumNames")&&(o.enumNames=t.items.enumNames)):L.has(t,"/items/oneOf")&&(r=X(t.items,o.flatList))&&(o.titleMap=r))}"integer"!==t.type||y(o.multipleOf)||(o.multipleOf=1),L.has(o,"/autocomplete/source")?o.typeahead=o.autocomplete:L.has(o,"/tagsinput/source")?o.typeahead=o.tagsinput:L.has(o,"/tagsinput/typeahead/source")&&(o.typeahead=o.tagsinput.typeahead),e.options=o}}function X(e,t,n){void 0===e&&(e={}),void 0===t&&(t=null),void 0===n&&(n=!1);var r=null,o=e.oneOf||e.anyOf||null;if(W(o)&&o.every(function(e){return e.title})){if(o.every(function(e){return W(e["enum"])&&1===e["enum"].length})){if(n)return!0;r=o.map(function(e){return{name:e.title,value:e["enum"][0]}})}else if(o.every(function(e){return e["const"]})){if(n)return!0;r=o.map(function(e){return{name:e.title,value:e["const"]}})}if(!1!==t&&1<(r||[]).filter(function(e){return((e||{}).name||"").indexOf(": ")}).length){var i=r.map(function(e){var t=q.__read(e.name.split(/: (.+)/),2),n=t[0],r=t[1];return n&&r?Object.assign({},e,{group:n,name:r}):e});(!0===t||i.some(function(e,t){return t&&J(e,"group")&&e.group===i[t-1].group}))&&(r=i)}}return!n&&r}function Y(i,e,a,s,l){if(void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=[]),!a||!s)return L.getCopy(i,e);"string"!=typeof e&&(e=L.compile(e)),l=q.__spread(l,[e]);var t=null;if(""===e)t=A.cloneDeep(i);else{var n=E(e,s);n!==e&&(l=q.__spread(l,[n])),t=L.getFirstCopy([[a,[n]],[i,e],[i,n]])}return L.forEachDeepCopy(t,function(e,t){if(z(e)){if(T(e.$ref)){var n=L.compile(e.$ref);if(n.length&&l.every(function(e){return!L.isSubPointer(n,e,!0)})){var r=Y(i,n,a,s,l);if(1===Object.keys(e).length)return r;var o=Object.assign({},e);return delete o.$ref,B(r,o)}}if(W(e.allOf))return function(e){if(!z(e)||!W(e.allOf))return e;var t=B.apply(void 0,q.__spread(e.allOf));if(1<Object.keys(e).length){var n=Object.assign({},e);delete n.allOf,t=B(t,n)}return t}(e);if("array"===e.type&&W(e.required))return function(t){if("array"===t.type&&W(t.required)){var n=J(t.items,"properties")?"items":J(t.additionalItems,"properties")?"additionalItems":null;n&&!J(t[n],"required")&&(J(t[n],"additionalProperties")||t.required.every(function(e){return J(t[n].properties,e)}))&&((t=A.cloneDeep(t))[n].required=t.required,delete t.required)}return t}(e)}return e},!0,e)}L.decorators=[{type:a.Injectable}];var ee={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d(?::[0-5]\d)?(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,color:/^\s*(#(?:[\da-f]{3}){1,2}|rgb\((?:\d{1,3},\s*){2}\d{1,3}\)|rgba\((?:\d{1,3},\s*){3}\d*\.?\d+\)|hsl\(\d{1,3}(?:,\s*\d{1,3}%){2}\)|hsla\(\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\))\s*$/gi,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,regex:function(e){if(/[^\\]\\Z/.test(e))return!1;try{return!0}catch(t){return!1}}},te=function(){function h(){}return h.required=function(e){switch(e===undefined&&(e=!0),e){case!0:return function(e,t){return void 0===t&&(t=!1),t?null:y(e.value)?null:{required:!0}};case!1:return h.nullValidator;default:return y(e.value)?null:{required:!0}}},h.type=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C(W(r)?r.some(function(e){return x(n,e)}):x(n,r),t)?null:{type:{requiredType:r,currentValue:n}}}:h.nullValidator},h["enum"]=function(o){return W(o)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value,r=function(e,t){return e===t||$(e)&&+t==+e||_(e,"strict")&&j(t,"boolean")===e||null===e&&!y(t)||A.isEqual(e,t)};return C(W(n)?n.every(function(t){return o.some(function(e){return r(e,t)})}):o.some(function(e){return r(e,n)}),t)?null:{"enum":{allowedValues:o,currentValue:n}}}:h.nullValidator},h["const"]=function(i){return y(i)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n,r,o=e.value;return C((n=i)===(r=o)||$(n)&&+r==+n||_(n,"strict")&&j(r,"boolean")===n||null===n&&!y(r),t)?null:{"const":{requiredValue:i,currentValue:o}}}:h.nullValidator},h.minLength=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=T(e.value)?e.value.length:0;return C(r<=n,t)?null:{minLength:{minimumLength:r,currentLength:n}}}:h.nullValidator},h.maxLength=function(r){return y(r)?function(e,t){void 0===t&&(t=!1);var n=T(e.value)?e.value.length:0;return C(n<=r,t)?null:{maxLength:{maximumLength:r,currentLength:n}}}:h.nullValidator},h.pattern=function(i,a){return void 0===a&&(a=!1),y(i)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n,r;"string"==typeof i?(r=a?"^"+i+"$":i,n=new RegExp(r)):(r=i.toString(),n=i);var o=e.value;return C(!!T(o)&&n.test(o),t)?null:{pattern:{requiredPattern:r,currentValue:o}}}:h.nullValidator},h.format=function(i){return y(i)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n,r=e.value;if(T(r)){var o=ee[i];"object"==typeof o?n=o.test(r):"function"==typeof o?n=o(r):(console.error('format validator error: "'+i+'" is not a recognized format.'),n=!0)}else n=["date","time","date-time"].includes(i)&&"[object Date]"===Object.prototype.toString.call(r);return C(n,t)?null:{format:{requiredFormat:i,currentValue:r}}}:h.nullValidator},h.minimum=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C(!$(n)||r<=n,t)?null:{minimum:{minimumValue:r,currentValue:n}}}:h.nullValidator},h.exclusiveMinimum=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C(!$(n)||+n<r,t)?null:{exclusiveMinimum:{exclusiveMinimumValue:r,currentValue:n}}}:h.nullValidator},h.maximum=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C(!$(n)||+n<=r,t)?null:{maximum:{maximumValue:r,currentValue:n}}}:h.nullValidator},h.exclusiveMaximum=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C(!$(n)||+n<r,t)?null:{exclusiveMaximum:{exclusiveMaximumValue:r,currentValue:n}}}:h.nullValidator},h.multipleOf=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=e.value;return C($(n)&&n%r==0,t)?null:{multipleOf:{multipleOfValue:r,currentValue:n}}}:h.nullValidator},h.minProperties=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=Object.keys(e.value).length||0;return C(r<=n,t)?null:{minProperties:{minimumProperties:r,currentProperties:n}}}:h.nullValidator},h.maxProperties=function(r){return y(r)?function(e,t){void 0===t&&(t=!1);var n=Object.keys(e.value).length||0;return C(n<=r,t)?null:{maxProperties:{maximumProperties:r,currentProperties:n}}}:h.nullValidator},h.dependencies=function(f){return"object"!==I(f)||R(f)?h.nullValidator:function(c,m){if(void 0===m&&(m=!1),R(c.value))return null;var e=v(w(f,function(e,t){if(!y(c.value[t]))return null;var n,r,o,i,a={},s={};"array"===I(f[t])?n=f[t]:"object"===I(f[t])&&(n=f[t].required||[],s=f[t].properties||{});try{for(var l=q.__values(n),u=l.next();!u.done;u=l.next()){var d=u.value;C(!y(c.value[d]),m)&&(a[d]={required:!0})}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=l["return"])&&o.call(l)}finally{if(r)throw r.error}}return R(a=v(a,w(s,function(o,i){var e,t=v(w(o,function(e,t){var n=null;if("maximum"===e||"minimum"===e){var r=!!o["exclusiveM"+e.slice(1)];n=h[e](t,r)}else"function"==typeof h[e]&&(n=h[e](t));return V(n)?n(c.value[i]):null}));return R(t)?null:((e={})[i]=t,e)})))?null:((i={})[t]=a,i)}));return R(e)?null:e}},h.minItems=function(r){return y(r)?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=W(e.value)?e.value.length:0;return C(r<=n,t)?null:{minItems:{minimumItems:r,currentItems:n}}}:h.nullValidator},h.maxItems=function(r){return y(r)?function(e,t){void 0===t&&(t=!1);var n=W(e.value)?e.value.length:0;return C(n<=r,t)?null:{maxItems:{maximumItems:r,currentItems:n}}}:h.nullValidator},h.uniqueItems=function(e){return void 0===e&&(e=!0),e?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;for(var n=e.value.slice().sort(),r=[],o=1;o<n.length;o++)n[o-1]===n[o]&&r.includes(n[o])&&r.push(n[o]);return C(!r.length,t)?null:{uniqueItems:{duplicateItems:r}}}:h.nullValidator},h.contains=function(r){return void 0===r&&(r=!0),r?function(e,t){if(void 0===t&&(t=!1),R(e.value)||!W(e.value))return null;var n=e.value;return C(!0,t)?null:{contains:{requiredItem:r,currentItems:n}}}:h.nullValidator},h.nullValidator=function(e){return null},h.composeAnyOf=function(r){if(!r)return null;var o=r.filter(V);return 0===o.length?null:function(e,t){void 0===t&&(t=!1);var n=c(e,o,t).filter(V);return C(r.length>n.length,t)?null:v.apply(void 0,q.__spread(n,[{anyOf:!t}]))}},h.composeOneOf=function(o){if(!o)return null;var i=o.filter(V);return 0===i.length?null:function(e,t){void 0===t&&(t=!1);var n=c(e,i);if(C(1===o.length-n.filter(V).length,t))return null;var r=c(e,i,t);return v.apply(void 0,q.__spread(n,r,[{oneOf:!t}]))}},h.composeAllOf=function(e){if(!e)return null;var r=e.filter(V);return 0===r.length?null:function(e,t){void 0===t&&(t=!1);var n=m(c(e,r,t));return C(null===n,t)?null:v(n,{allOf:!t})}},h.composeNot=function(r){return r?function(e,t){if(void 0===t&&(t=!1),R(e.value))return null;var n=r(e,!t);return C(null===n,t)?null:v(n,{not:!t})}:null},h.compose=function(e){if(!e)return null;var n=e.filter(V);return 0===n.length?null:function(e,t){return void 0===t&&(t=!1),m(c(e,n,t))}},h.composeAsync=function(e){if(!e)return null;var i=e.filter(V);return 0===i.length?null:function(e){var t,n,r,o=(t=e,n=i,void 0===r&&(r=!1),n.map(function(e){return e(t,r)})).map(F);return l.map.call(s.forkJoin(o),m)}},h.min=function(r){return y(r)?function(e){if(R(e.value)||R(r))return null;var t=parseFloat(e.value),n=e.value;return isNaN(t)||r<=t?null:{min:{min:r,actual:n}}}:h.nullValidator},h.max=function(r){return y(r)?function(e){if(R(e.value)||R(r))return null;var t=parseFloat(e.value),n=e.value;return isNaN(t)||t<=r?null:{max:{max:r,actual:n}}}:h.nullValidator},h.requiredTrue=function(e){return e?!0===e.value?null:{required:!0}:h.nullValidator},h.email=function(e){if(!e)return h.nullValidator;return/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/.test(e.value)?null:{email:!0}},h}();function ne(t,n,r,o,i,a){void 0===n&&(n=null),void 0===r&&(r=!0),void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a="");var s=L.get(t.schema,o);r?!V(n)&&(!0===t.formOptions.setSchemaDefaults||"auto"===t.formOptions.setSchemaDefaults&&R(t.formValues))&&(n=L.get(t.schema,o+"/default")):n=null;var e=L.get(s,"/type"),l=(J(s,"properties")||J(s,"additionalProperties"))&&"object"===e?"FormGroup":(J(s,"items")||J(s,"additionalItems"))&&"array"===e?"FormArray":!e&&J(s,"$ref")?"$ref":"FormControl",u=E(i,t.dataRecursiveRefMap,t.arrayMap);t.dataMap.has(u)||t.dataMap.set(u,new Map);var d,p=t.dataMap.get(u);p.has("schemaType")||(p.set("schemaPointer",o),p.set("schemaType",s.type),s.format&&(p.set("schemaFormat",s.format),s.type||p.set("schemaType","string")),l&&(p.set("templatePointer",a),p.set("templateType",l)));var c,m=function(o){if(!z(o))return null;var i={};if(J(o,"type"))switch(o.type){case"string":N(["pattern","format","minLength","maxLength"],function(e){J(o,e)&&(i[e]=[o[e]])});break;case"number":case"integer":N(["Minimum","Maximum"],function(e){var t="exclusive"+e,n=e.toLowerCase();if(J(o,n)){var r=J(o,t)&&!0===o[t];i[n]=[o[n],r]}}),N(["multipleOf","type"],function(e){J(o,e)&&(i[e]=[o[e]])});break;case"object":N(["minProperties","maxProperties","dependencies"],function(e){J(o,e)&&(i[e]=[o[e]])});break;case"array":N(["minItems","maxItems","uniqueItems"],function(e){J(o,e)&&(i[e]=[o[e]])})}return J(o,"enum")&&(i["enum"]=[o["enum"]]),i}(s);switch(l){case"FormGroup":if(d={},J(s,"ui:order")||J(s,"properties")){var f=s["ui:order"]||Object.keys(s.properties);if(f.includes("*")&&!J(s.properties,"*"))for(var h=Object.keys(s.properties).filter(function(e){return!f.includes(e)}),y=f.length-1;0<=y;y--)"*"===f[y]&&f.splice.apply(f,q.__spread([y,1],h));f.filter(function(e){return J(s.properties,e)||J(s,"additionalProperties")}).forEach(function(e){return d[e]=ne(t,L.get(n,[e]),r,o+(J(s.properties,e)?"/properties/"+e:"/additionalProperties"),i+"/"+e,a+"/controls/"+e)}),t.formOptions.fieldsRequired=function(e,t){var n=!1;if(J(e,"required")&&!R(e.required)){n=!0;var r=W(e.required)?e.required:[e.required];r=N(r,function(e){return L.set(t,"/"+e+"/validators/required",[])})}return n}(s,d)}return{controlType:l,controls:d,validators:m};case"FormArray":d=[];var v=Math.max(s.minItems||0,p.get("minItems")||0),g=Math.min(s.maxItems||1e3,p.get("maxItems")||1e3),b=null;if(W(s.items)){var I=p.get("tupleItems")||(W(s.items)?Math.min(s.items.length,g):0);for(y=0;y<I;y++)if(y<v)d.push(ne(t,W(n)?n[y]:n,r,o+"/items/"+y,i+"/"+y,a+"/controls/"+y));else{var x=E(o+"/items/"+y,t.schemaRecursiveRefMap),j=(F=E(u+"/"+y,t.dataRecursiveRefMap,t.arrayMap))!==u+"/"+y;J(t.templateRefLibrary,F)||(t.templateRefLibrary[F]=null,t.templateRefLibrary[F]=ne(t,null,r,x,F,a+"/controls/"+y)),d.push(W(n)?ne(t,n[y],r,o+"/items/"+y,i+"/"+y,a+"/controls/"+y):j?null:A.cloneDeep(t.templateRefLibrary[F]))}s.items.length<g&&z(s.additionalItems)&&(b=o+"/additionalItems")}else b=o+"/items";if(b){var F;x=E(b,t.schemaRecursiveRefMap),j=(F=E(u+"/-",t.dataRecursiveRefMap,t.arrayMap))!==u+"/-";J(t.templateRefLibrary,F)||(t.templateRefLibrary[F]=null,t.templateRefLibrary[F]=ne(t,null,r,x,F,a+"/controls/-"));var C=p;if(!j||J(m,"required")){var w=Math.min(Math.max(j?0:C.get("tupleItems")+C.get("listItems")||0,W(n)?n.length:0),g);for(y=d.length;y<w;y++)d.push(W(n)?ne(t,n[y],r,x,i+"/-",a+"/controls/-"):j?null:A.cloneDeep(t.templateRefLibrary[F]))}}return{controlType:l,controls:d,validators:m};case"$ref":var O=L.compile(s.$ref),D=E(L.toDataPointer(O,s),t.dataRecursiveRefMap,t.arrayMap);if(D&&!J(t.templateRefLibrary,D)){t.templateRefLibrary[D]=null;var P=ne(t,r,r,O);P?t.templateRefLibrary[D]=P:delete t.templateRefLibrary[D]}return null;case"FormControl":return{controlType:l,value:{value:r&&(c=n,T(c)||$(c)||_(c,"strict")||null===c)?n:null,disabled:p.get("disabled")||!1},validators:m};default:return null}}function re(e){var n=[],t=null;if(J(e,"validators")&&(N(e.validators,function(e,t){"function"==typeof te[t]&&n.push(te[t].apply(null,e))}),n.length&&P(e.controlType,["FormGroup","FormArray"])&&(t=1<n.length?te.compose(n):n[0])),J(e,"controlType"))switch(e.controlType){case"FormGroup":var r={};return N(e.controls,function(e,t){var n=re(e);n&&(r[t]=n)}),new u.FormGroup(r,t);case"FormArray":return new u.FormArray(A.filter(A.map(e.controls,function(e){return re(e)})),t);case"FormControl":return new u.FormControl(e.value,n)}return null}function oe(e,i,a,s,l,u){if(void 0===l&&(l=!1),void 0===u&&(u=!1),null===e||"object"!=typeof e)return e;var d=W(e)?[]:{};return L.forEachDeep(e,function(e,n){if(l&&W(e))L.set(d,n,[]);else if(l&&z(e)&&!h(e))L.set(d,n,{});else{var r=L.has(i,[n,"schemaType"])?n:E(n,a,s);if(L.has(i,[r,"schemaType"])){var t=i.get(r).get("schemaType");if("null"===t)L.set(d,n,null);else if((y(e)||l)&&P(t,["string","integer","number","boolean"])){var o=u||null===e&&l?function(e,t){if(W(t)||(t=[t]),t.includes("null")&&!y(e))return null;if(t.includes("boolean")&&!_(e,"strict"))return e;if(t.includes("integer")&&null!==(n=j(e,"integer")))return+n;if(t.includes("number")&&null!==(n=j(e,"number")))return+n;if((T(e)||$(e,"strict"))&&t.includes("string"))return j(e,"string");if(t.includes("boolean")&&_(e))return j(e,"boolean");if(t.includes("string")){if(null===e)return"";var n;if(null!==(n=j(e,"string")))return n}if(t.includes("number")||t.includes("integer")){if(!0===e)return 1;if(!1===e||null===e||""===e)return 0}return t.includes("number")&&(n=parseFloat(e))?n:t.includes("integer")&&(n=parseInt(e,10))?n:t.includes("boolean")?!!e:!t.includes("number")&&!t.includes("integer")||t.includes("null")?void 0:0}(e,t):j(e,t);(V(o)||l)&&L.set(d,n,o)}else"object"!==t||l||(i.get(r).get("required")||[]).forEach(function(e){var t=i.get(r+"/"+e).get("schemaType");"array"===t?L.set(d,n+"/"+e,[]):"object"===t&&L.set(d,n+"/"+e,{})});"date-time"===i.get(r).get("schemaFormat")&&(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?$/i.test(e)?L.set(d,n,e+"Z"):/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d$/i.test(e)?L.set(d,n,e+":00Z"):u&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e)&&L.set(d,n,e+":00:00:00Z"))}else("object"!=typeof e||h(e)||null===e&&l)&&(console.error("formatFormData error: Schema type not found for form value at "+r),console.error("dataMap",i),console.error("recursiveRefMap",a),console.error("genericPointer",r))}}),d}function ie(e,t,n){if(void 0===n&&(n=!1),!z(e)||!L.isJsonPointer(t)){if(!L.isJsonPointer(t)){if("string"==typeof t)if(r=e.get(t))return r;console.error("getControl error: Invalid JSON Pointer: "+t)}return z(e)||console.error("getControl error: Invalid formGroup: "+e),null}var r,o=L.parse(t);if((n&&(o=o.slice(0,-1)),"function"==typeof e.get&&o.every(function(e){return-1===e.indexOf(".")}))&&(r=e.get(o.join("."))))return r;var i,a,s=e;try{for(var l=q.__values(o),u=l.next();!u.done;u=l.next()){var d=u.value;if(J(s,"controls")&&(s=s.controls),W(s)&&"-"===d)s=s[s.length-1];else{if(!J(s,d))return console.error('getControl error: Unable to find "'+d+'" item in FormGroup.'),console.error(t),void console.error(e);s=s[d]}}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=l["return"])&&a.call(l)}finally{if(i)throw i.error}}return s}function ae(w,O){var D=!L.get(w,"/formOptions/addSubmit"),e=function a(e,s,l,u){void 0===l&&(l="");void 0===u&&(u=e);var d=0;var p=[];N(e,function(e,t){var n=+t+d,r=l+"/"+n,o=k(e),i=[];z(e)&&(J(e,"tabs")&&(e.items=e.tabs,delete e.tabs),J(e,"items")&&(i=W(e.items)?e.items:[e.items])),i.length&&(o.items=a(i,s,r+"/items",u)),V(o=s(o,n,r,u))?(W(o)&&(d+=o.length-1),p=p.concat(o)):d--});return p}(w.layout,function(e,t,n){var r={_id:A.uniqueId(),options:{}};if(z(e))Object.assign(r,e),Object.keys(r).filter(function(e){return!P(e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"])}).forEach(function(e){r.options[e]=r[e],delete r[e]}),!J(r,"type")&&T(r.widget)&&(r.type=r.widget,delete r.widget),J(r.options,"title")||J(r.options,"legend")&&(r.options.title=r.options.legend,delete r.options.legend),J(r.options,"validationMessages")||(J(r.options,"errorMessages")?(r.options.validationMessages=r.options.errorMessages,delete r.options.errorMessages):J(r.options,"validationMessage")&&("string"==typeof r.options.validationMessage?r.options.validationMessages=r.options.validationMessage:(r.options.validationMessages={},Object.keys(r.options.validationMessage).forEach(function(e){var t=e+"",n="0"===t?"type":"1"===t?"enum":"100"===t?"multipleOf":"101"===t?"minimum":"102"===t?"exclusiveMinimum":"103"===t?"maximum":"104"===t?"exclusiveMaximum":"200"===t?"minLength":"201"===t?"maxLength":"202"===t?"pattern":"300"===t?"minProperties":"301"===t?"maxProperties":"302"===t?"required":"304"===t?"dependencies":"400"===t?"minItems":"401"===t?"maxItems":"402"===t?"uniqueItems":"500"===t?"format":t+"";r.options.validationMessages[n]=r.options.validationMessage[e]})),delete r.options.validationMessage));else if(L.isJsonPointer(e))r.dataPointer=e;else{if(!T(e))return console.error("buildLayout error: Form layout element not recognized:"),console.error(e),null;r.key=e}var o=null;if(!J(r,"dataPointer"))if(J(r,"key"))r.dataPointer="*"===r.key?r.key:L.compile(L.parseObjectPath(r.key),"-"),delete r.key;else if(J(r,"type")&&"array"===r.type.slice(-5)){var l=function(e){if(null!==e&&"object"==typeof e){if(J(e,"dataPointer"))return e.dataPointer;if(W(e.items))try{for(var t=q.__values(e.items),n=t.next();!n.done;n=t.next()){var r=n.value;if(J(r,"dataPointer")&&-1!==r.dataPointer.indexOf("/-"))return r.dataPointer;if(J(r,"items")){var o=l(r);if(o)return o}}}catch(s){i={error:s}}finally{try{n&&!n.done&&(a=t["return"])&&a.call(t)}finally{if(i)throw i.error}}var i,a}},i=l(r);i&&(r.dataPointer=i.slice(0,i.lastIndexOf("/-")))}if(J(r,"dataPointer")){if("*"===r.dataPointer)return se(w,O,w.formValues);var a=L.get(w.formValues,r.dataPointer.replace(/\/-/g,"/1"));r.dataPointer=L.toGenericPointer(r.dataPointer,w.arrayMap);var s=L.toKey(r.dataPointer);!r.name&&T(s)&&"-"!==s&&(r.name=s);var u=E(r.dataPointer,w.dataRecursiveRefMap,w.arrayMap),d=!u.length||u!==r.dataPointer,p=void 0;w.dataMap.has(u)||w.dataMap.set(u,new Map);var c=w.dataMap.get(u);if(c.has("schemaPointer")?p=c.get("schemaPointer"):(p=L.toSchemaPointer(u,w.schema),c.set("schemaPointer",p)),c.set("disabled",!!r.options.disabled),o=L.get(w.schema,p)){if(J(r,"type"))if(O.hasWidget(r.type))r.type=Z(r.type,o,r);else{var m=r.type;r.type=U(o,r),console.error('error: widget type "'+m+'" not found in library. Replacing with "'+r.type+'".')}else r.type=U(o,r);"object"===o.type&&W(o.required)&&c.set("required",o.required),r.dataType=o.type||(J(o,"$ref")?"$ref":null),Q(r,o,w),"checkboxes"===r.type&&J(o,"items")?Q(r,o.items,w):"array"===r.dataType&&(r.options.maxItems=Math.min(o.maxItems||1e3,r.options.maxItems||1e3),r.options.minItems=Math.max(o.minItems||0,r.options.minItems||0),r.options.listItems=Math.max(r.options.listItems||0,W(a)?a.length:0),r.options.tupleItems=W(o.items)?o.items.length:0,r.options.maxItems<r.options.tupleItems?(r.options.tupleItems=r.options.maxItems,r.options.listItems=0):r.options.maxItems<r.options.tupleItems+r.options.listItems?r.options.listItems=r.options.maxItems-r.options.tupleItems:r.options.minItems>r.options.tupleItems+r.options.listItems&&(r.options.listItems=r.options.minItems-r.options.tupleItems),c.has("maxItems")||(c.set("maxItems",r.options.maxItems),c.set("minItems",r.options.minItems),c.set("tupleItems",r.options.tupleItems),c.set("listItems",r.options.listItems)),w.arrayMap.has(u)||w.arrayMap.set(u,r.options.tupleItems)),K(w.schema,p)&&(r.options.required=!0,w.fieldsRequired=!0)}else Q(r,{},w);if(r.options.title||/^\d+$/.test(r.name)||(r.options.title=S(r.name)),J(r.options,"copyValueTo")&&("string"==typeof r.options.copyValueTo&&(r.options.copyValueTo=[r.options.copyValueTo]),W(r.options.copyValueTo)&&(r.options.copyValueTo=r.options.copyValueTo.map(function(e){return L.compile(L.parseObjectPath(e),"-")}))),r.widget=O.getWidget(r.type),c.set("inputType",r.type),c.set("widget",r.widget),"array"===r.dataType&&(J(r,"items")||J(r,"additionalItems"))){var f=E(r.dataPointer+"/-",w.dataRecursiveRefMap,w.arrayMap);if(w.dataMap.has(f)||w.dataMap.set(f,new Map),w.dataMap.get(f).set("inputType","section"),1<r.items.length){for(var h=[],y=r.items.length-1;0<=y;y--){var v=r.items[y];if(J(v,"dataPointer")&&v.dataPointer.slice(0,f.length)===f){var g=r.items.splice(y,1)[0];g.dataPointer=r.dataPointer+"/-"+g.dataPointer.slice(f.length),h.unshift(g)}else v.arrayItem=!0,v.arrayItemType="list",v.removable=!1!==r.options.removable}h.length&&r.items.push({_id:A.uniqueId(),arrayItem:!0,arrayItemType:r.options.tupleItems>r.items.length?"tuple":"list",items:h,options:{removable:!1!==r.options.removable},dataPointer:r.dataPointer+"/-",type:"section",widget:O.getWidget("section")})}else r.items[0].arrayItem=!0,r.items[0].dataPointer||(r.items[0].dataPointer=L.toGenericPointer(f,w.arrayMap)),L.has(r,"/items/0/options/removable")||(r.items[0].options.removable=!0),!1===r.options.orderable&&(r.items[0].options.orderable=!1),r.items[0].arrayItemType=r.options.tupleItems?"tuple":"list";if(W(r.items)){var b=r.items.filter(function(e){return"$ref"!==e.type}).length-r.options.tupleItems;b>r.options.listItems&&(r.options.listItems=b,c.set("listItems",b))}if(J(w.layoutRefLibrary,f)||(w.layoutRefLibrary[f]=A.cloneDeep(r.items[r.items.length-1]),d&&(w.layoutRefLibrary[f].recursiveReference=!0),N(w.layoutRefLibrary[f],function(e,t){J(e,"_id")&&(e._id=null),d&&J(e,"dataPointer")&&(e.dataPointer=e.dataPointer.slice(f.length))},"top-down")),!r.recursiveReference||r.options.required){var I=Math.min(Math.max(r.options.tupleItems+r.options.listItems,W(a)?a.length:0),r.options.maxItems);for(y=r.items.length;y<I;y++)r.items.push(le({$ref:f,dataPointer:r.dataPointer,recursiveReference:r.recursiveReference},w,O))}if(!1!==r.options.addable&&r.options.minItems<r.options.maxItems&&"$ref"!==(r.items[r.items.length-1]||{}).type){var x="Add";if(r.options.title)/^add\b/i.test(r.options.title)?x=r.options.title:x+=" "+r.options.title;else if(r.name&&!/^\d+$/.test(r.name))/^add\b/i.test(r.name)?x+=" "+S(r.name):x=S(r.name);else{var j=function(e,t,n){void 0===n&&(n="schema");var r=L.parse(t);if(null===r)return console.error("getFromSchema error: Invalid JSON Pointer: "+t),null;var o=e,i=[],a=r.length;"parent"===n.slice(0,6)&&r.length--;for(var s=0;s<a;++s){var l=r[s],u=!1;if("object"!=typeof o)return console.error('getFromSchema error: Unable to find "'+l+'" key in schema.'),console.error(e),console.error(t),null;if("array"!==o.type||isNaN(l)&&"-"!==l?"object"===o.type&&(z(o.properties)&&J(o.properties,l)?(u=!0,o=o.properties[l],i.push("properties",l)):z(o.additionalProperties)?(u=!0,o=o.additionalProperties,i.push("additionalProperties")):!1!==o.additionalProperties&&(u=!0,o={},i.push("additionalProperties"))):(J(o,"items")&&(z(o.items)?(u=!0,o=o.items,i.push("items")):W(o.items)&&!isNaN(l)&&o.items.length>=+l&&(u=!0,o=o.items[+l],i.push("items",l))),!u&&z(o.additionalItems)?(u=!0,o=o.additionalItems,i.push("additionalItems")):!1!==o.additionalItems&&(u=!0,o={},i.push("additionalItems"))),!u)return console.error('getFromSchema error: Unable to find "'+l+'" item in schema.'),console.error(e),void console.error(t)}return"Pointer"===n.slice(-7)?i:o}(w.schema,r.dataPointer,"parentSchema");if(J(j,"title"))x+=" to "+j.title;else{var F=L.parse(r.dataPointer);x+=" to "+S(F[F.length-2])}}r.items.push({_id:A.uniqueId(),arrayItem:!0,arrayItemType:"list",dataPointer:r.dataPointer+"/-",options:{listItems:r.options.listItems,maxItems:r.options.maxItems,minItems:r.options.minItems,removable:!1,title:x,tupleItems:r.options.tupleItems},recursiveReference:d,type:"$ref",widget:O.getWidget("$ref"),$ref:f}),T(L.get(r,"/style/add"))&&(r.items[r.items.length-1].options.fieldStyle=r.style.add,delete r.style.add,R(r.style)&&delete r.style)}}else r.arrayItem=!1}else if(J(r,"type")||J(r,"items")){var C=L.get(w.layout,n,0,-2).type;J(r,"type")||(r.type=P(C,["tabs","tabarray"])?"tab":"array"),r.arrayItem="array"===C,r.widget=O.getWidget(r.type),Q(r,{},w)}return"submit"===r.type&&(D=!0),r});if(w.hasRootReference){var t=A.cloneDeep(e);"submit"===t[t.length-1].type&&t.pop(),w.layoutRefLibrary[""]={_id:null,dataPointer:"",dataType:"object",items:t,name:"",options:A.cloneDeep(w.formOptions.defautWidgetOptions),recursiveReference:!0,required:!1,type:"section",widget:O.getWidget("section")}}return D||e.push({_id:A.uniqueId(),options:{title:"Submit"},type:"submit",widget:O.getWidget("submit")}),e}function se(r,o,i,a,s,e,t,n,l,u){void 0===i&&(i=null),void 0===a&&(a=""),void 0===s&&(s=""),void 0===e&&(e=!1),void 0===t&&(t=null),void 0===n&&(n=null),void 0===l&&(l=!1),void 0===u&&(u="");var d=L.get(r.schema,a);if(!J(d,"type")&&!J(d,"$ref")&&!J(d,"x-schema-form"))return null;var p=U(d);!V(i)&&(!0===r.formOptions.setSchemaDefaults||"auto"===r.formOptions.setSchemaDefaults&&R(r.formValues))&&(i=L.get(r.schema,a+"/default"));var c={_id:l?null:A.uniqueId(),arrayItem:e,dataPointer:L.toGenericPointer(s,r.arrayMap),dataType:d.type||(J(d,"$ref")?"$ref":null),options:{},required:K(r.schema,a),type:p,widget:o.getWidget(p)},m=L.toKey(c.dataPointer);"-"!==m&&(c.name=m),c.arrayItem&&(c.arrayItemType=t,c.options.removable=!1!==n);var f=E(u+s,r.dataRecursiveRefMap,r.arrayMap);f.length;r.dataMap.has(f)||r.dataMap.set(f,new Map);var h=r.dataMap.get(f);if(h.has("inputType")||(h.set("schemaPointer",a),h.set("inputType",c.type),h.set("widget",c.widget),h.set("disabled",!!c.options.disabled)),Q(c,d,r),c.options.title||!c.name||/^\d+$/.test(c.name)||(c.options.title=S(c.name)),"object"===c.dataType){if(W(d.required)&&!h.has("required")&&h.set("required",d.required),z(d.properties)){var y=[],v=d["ui:order"]||Object.keys(d.properties);if(v.includes("*")&&!J(d.properties,"*"))for(var g=Object.keys(d.properties).filter(function(e){return!v.includes(e)}),b=v.length-1;0<=b;b--)"*"===v[b]&&v.splice.apply(v,q.__spread([b,1],g));v.filter(function(e){return J(d.properties,e)||J(d,"additionalProperties")}).forEach(function(e){var t=J(d.properties,e)?"/properties/"+e:"/additionalProperties",n=se(r,o,z(i)?i[e]:null,a+t,s+"/"+e,!1,null,null,l,u);n&&(K(d,"/"+e)&&(n.options.required=!0,r.fieldsRequired=!0),y.push(n))}),""!==s||l?c.items=y:c=y}}else if("array"===c.dataType){c.items=[],c.options.maxItems=Math.min(d.maxItems||1e3,c.options.maxItems||1e3),c.options.minItems=Math.max(d.minItems||0,c.options.minItems||0),!c.options.minItems&&K(r.schema,a)&&(c.options.minItems=1),J(c.options,"listItems")||(c.options.listItems=1),c.options.tupleItems=W(d.items)?d.items.length:0,c.options.maxItems<=c.options.tupleItems?(c.options.tupleItems=c.options.maxItems,c.options.listItems=0):c.options.maxItems<c.options.tupleItems+c.options.listItems?c.options.listItems=c.options.maxItems-c.options.tupleItems:c.options.minItems>c.options.tupleItems+c.options.listItems&&(c.options.listItems=c.options.minItems-c.options.tupleItems),h.has("maxItems")||(h.set("maxItems",c.options.maxItems),h.set("minItems",c.options.minItems),h.set("tupleItems",c.options.tupleItems),h.set("listItems",c.options.listItems)),r.arrayMap.has(f)||r.arrayMap.set(f,c.options.tupleItems),n=!1!==c.options.removable;var I=null;if(W(d.items)){c.items=[];for(b=0;b<c.options.tupleItems;b++){var x=void 0,j=!(F=E(f+"/"+b,r.dataRecursiveRefMap,r.arrayMap)).length||F!==f+"/"+b;n&&b>=c.options.minItems?(J(r.layoutRefLibrary,F)||(r.layoutRefLibrary[F]=null,r.layoutRefLibrary[F]=se(r,o,W(i)?i[b]:null,a+"/items/"+b,j?"":s+"/"+b,!0,"tuple",!0,!0,j?s+"/"+b:""),j&&(r.layoutRefLibrary[F].recursiveReference=!0)),x=le({$ref:F,dataPointer:s+"/"+b,recursiveReference:j},r,o,W(i)?i[b]:null)):x=se(r,o,W(i)?i[b]:null,a+"/items/"+b,s+"/"+b,!0,"tuple",!1,l,u),x&&c.items.push(x)}z(d.additionalItems)&&(I=a+"/additionalItems")}else z(d.items)&&(I=a+"/items");if(I){j=!(F=E(f+"/-",r.dataRecursiveRefMap,r.arrayMap)).length||F!==f+"/-";var F,C=E(I,r.schemaRecursiveRefMap,r.arrayMap);if(F.length&&!J(r.layoutRefLibrary,F)&&(r.layoutRefLibrary[F]=null,r.layoutRefLibrary[F]=se(r,o,null,C,j?"":s+"/-",!0,"list",n,!0,j?s+"/-":""),j&&(r.layoutRefLibrary[F].recursiveReference=!0)),!j||c.options.required){var w=Math.min(Math.max(j?0:c.options.tupleItems+c.options.listItems,W(i)?i.length:0),c.options.maxItems);if(c.items.length<w)for(b=c.items.length;b<w;b++)c.items.push(le({$ref:F,dataPointer:s+"/-",recursiveReference:j},r,o,W(i)?i[b]:null))}if(!1!==c.options.addable&&c.options.minItems<c.options.maxItems&&"$ref"!==(c.items[c.items.length-1]||{}).type){var O=(_=((r.layoutRefLibrary[F]||{}).options||{}).title)?"Add ":"Add to ";_||(_=d.title||S(L.toKey(s))),/^add\b/i.test(_)||(_=O+_),c.items.push({_id:A.uniqueId(),arrayItem:!0,arrayItemType:"list",dataPointer:c.dataPointer+"/-",options:{listItems:c.options.listItems,maxItems:c.options.maxItems,minItems:c.options.minItems,removable:!1,title:_,tupleItems:c.options.tupleItems},recursiveReference:j,type:"$ref",widget:o.getWidget("$ref"),$ref:F})}}}else if("$ref"===c.dataType){var D=L.compile(d.$ref),P=L.toDataPointer(D,r.schema),_="";if(c.options.add)_=c.options.add;else if(c.name&&!/^\d+$/.test(c.name))_=(/^add\b/i.test(c.name)?"":"Add ")+S(c.name);else{var k=L.get(r.schema,a,0,-1);if(J(k,"title"))_="Add to "+k.title;else{var N=L.parse(c.dataPointer);_="Add to "+S(N[N.length-2])}}if(Object.assign(c,{recursiveReference:!0,widget:o.getWidget("$ref"),$ref:P}),Object.assign(c.options,{removable:!1,title:_}),$(L.get(r.schema,a,0,-1).maxItems)&&(c.options.maxItems=L.get(r.schema,a,0,-1).maxItems),P.length)if(J(r.layoutRefLibrary,P))r.layoutRefLibrary[P].recursiveReference||(r.layoutRefLibrary[P].recursiveReference=!0);else{r.layoutRefLibrary[P]=null;var M=se(r,o,null,D,"",c.arrayItem,c.arrayItemType,!0,!0,s);M?(M.recursiveReference=!0,r.layoutRefLibrary[P]=M):delete r.layoutRefLibrary[P]}}return c}function le(n,e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),n.recursiveReference&&t)return(o=A.cloneDeep(n)).options||(o.options={}),Object.assign(o,{recursiveReference:!0,widget:t.getWidget("$ref")}),Object.assign(o.options,{removable:!1,title:"Add "+o.$ref}),o;var o=e.layoutRefLibrary[n.$ref];return V(r)?o=se(e,t,r,L.toSchemaPointer(n.$ref,e.schema),n.$ref,o.arrayItem,o.arrayItemType,o.options.removable,!1):(o=A.cloneDeep(o),L.forEachDeep(o,function(e,t){J(e,"_id")&&(e._id=A.uniqueId()),n.recursiveReference&&J(e,"dataPointer")&&(e.dataPointer=n.dataPointer+e.dataPointer)})),o}function ue(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var o,i,a,s,l,u,d,p,c=[],m=!1;if(e)if(W(e))if(t)try{for(var f=q.__values(Object.keys(e)),h=f.next();!h.done;h=f.next()){if(z(e[D=h.value])){var y=e[D].value;if(t.includes(y)){var v=e[D].name;c.push({name:v,value:y}),y!==undefined&&null!==y||(m=!0)}}else if(T(e[D])&&D<t.length){var g=e[D];y=t[D];c.push({name:g,value:y}),y!==undefined&&null!==y||(m=!0)}}}catch(_){o={error:_}}finally{try{h&&!h.done&&(i=f["return"])&&i.call(f)}finally{if(o)throw o.error}}else c=e,n||(m=!!c.filter(function(e){return e.value===undefined||null===e.value}).length);else if(t)try{for(var b=q.__values(Object.keys(t)),I=b.next();!I.done;I=b.next()){if(J(e,y=t[D=I.value])){var x=e[y];c.push({name:x,value:y}),y!==undefined&&null!==y||(m=!0)}}}catch(k){a={error:k}}finally{try{I&&!I.done&&(s=b["return"])&&s.call(b)}finally{if(a)throw a.error}}else try{for(var j=q.__values(Object.keys(e)),F=j.next();!F.done;F=j.next()){var C=e[y=F.value];c.push({name:C,value:y}),y!==undefined&&null!==y||(m=!0)}}catch(N){l={error:N}}finally{try{F&&!F.done&&(u=j["return"])&&u.call(j)}finally{if(l)throw l.error}}else if(t)try{for(var w=q.__values(Object.keys(t)),O=w.next();!O.done;O=w.next()){var D,P=t[D=O.value];y=t[D];c.push({name:P,value:y}),y!==undefined&&null!==y||(m=!0)}}catch(M){d={error:M}}finally{try{O&&!O.done&&(p=w["return"])&&p.call(w)}finally{if(d)throw d.error}}else c=[{name:"True",value:!0},{name:"False",value:!1}];return c.some(function(e){return J(e,"group")})&&(m=!1,c=r?c.reduce(function(e,t){return J(t,"group")?(W(t.items)&&(e=q.__spread(e,t.items.map(function(e){return Object.assign({},e,{name:t.group+": "+e.name})})),t.items.some(function(e){return e.value===undefined||null===e.value})&&(m=!0)),J(t,"name")&&J(t,"value")&&(t.name=t.group+": "+t.name,delete t.group,e.push(t),t.value!==undefined&&null!==t.value||(m=!0))):(e.push(t),t.value!==undefined&&null!==t.value||(m=!0)),e},[]):c.reduce(function(e,t){return J(t,"group")?(t.group!==(e[e.length-1]||{}).group&&e.push({group:t.group,items:t.items||[]}),J(t,"name")&&J(t,"value")&&(e[e.length-1].items.push({name:t.name,value:t.value}),t.value!==undefined&&null!==t.value||(m=!0))):(e.push(t),t.value!==undefined&&null!==t.value||(m=!0)),e},[])),n||m||c.unshift({name:"<em>None</em>",value:null}),c}var de={required:"This field is required.",minLength:"Must be {{minimumLength}} characters or longer (current length: {{currentLength}})",maxLength:"Must be {{maximumLength}} characters or shorter (current length: {{currentLength}})",pattern:"Must match pattern: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Must be a date, like "2000-12-31"';case"time":return'Must be a time, like "16:20" or "03:14:15.9265"';case"date-time":return'Must be a date-time, like "2000-03-14T01:59" or "2000-03-14T01:59:26.535Z"';case"email":return'Must be an email address, like "name@example.com"';case"hostname":return'Must be a hostname, like "example.com"';case"ipv4":return'Must be an IPv4 address, like "127.0.0.1"';case"ipv6":return'Must be an IPv6 address, like "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Must be a url, like "http://www.example.com/page.html"';case"uuid":return'Must be a uuid, like "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Must be a color, like "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Must be a JSON Pointer, like "/pointer/to/something"';case"relative-json-pointer":return'Must be a relative JSON Pointer, like "2/pointer/to/something"';case"regex":return'Must be a regular expression, like "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Must be a correctly formatted "+e.requiredFormat}},minimum:"Must be {{minimumValue}} or more",exclusiveMinimum:"Must be more than {{exclusiveMinimumValue}}",maximum:"Must be {{maximumValue}} or less",exclusiveMaximum:"Must be less than {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Must have "+Math.log10(1/e.multipleOfValue)+" or fewer decimal places.":"Must be a multiple of "+e.multipleOfValue+"."},minProperties:"Must have {{minimumProperties}} or more items (current items: {{currentProperties}})",maxProperties:"Must have {{maximumProperties}} or fewer items (current items: {{currentProperties}})",minItems:"Must have {{minimumItems}} or more items (current items: {{currentItems}})",maxItems:"Must have {{maximumItems}} or fewer items (current items: {{currentItems}})",uniqueItems:"All items must be unique"},pe={required:"Est obligatoire.",minLength:"Doit avoir minimum {{minimumLength}} caractres (actuellement: {{currentLength}})",maxLength:"Doit avoir maximum {{maximumLength}} caractres (actuellement: {{currentLength}})",pattern:"Doit respecter: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Doit tre une date, tel que "2000-12-31"';case"time":return'Doit tre une heure, tel que "16:20" ou "03:14:15.9265"';case"date-time":return'Doit tre une date et une heure, tel que "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Doit tre une adresse e-mail, tel que "name@example.com"';case"hostname":return'Doit tre un nom de domaine, tel que "example.com"';case"ipv4":return'Doit tre une adresse IPv4, tel que "127.0.0.1"';case"ipv6":return'Doit tre une adresse IPv6, tel que "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Doit tre une URL, tel que "http://www.example.com/page.html"';case"uuid":return'Doit tre un UUID, tel que "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Doit tre une couleur, tel que "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Doit tre un JSON Pointer, tel que "/pointer/to/something"';case"relative-json-pointer":return'Doit tre un relative JSON Pointer, tel que "2/pointer/to/something"';case"regex":return'Doit tre une expression rgulire, tel que "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Doit tre avoir le format correct: "+e.requiredFormat}},minimum:"Doit tre suprieur  {{minimumValue}}",exclusiveMinimum:"Doit avoir minimum {{exclusiveMinimumValue}} charactres",maximum:"Doit tre infrieur  {{maximumValue}}",exclusiveMaximum:"Doit avoir maximum {{exclusiveMaximumValue}} charactres",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Doit comporter "+Math.log10(1/e.multipleOfValue)+" ou moins de decimales.":"Doit tre un multiple de "+e.multipleOfValue+"."},minProperties:"Doit comporter au minimum {{minimumProperties}} lments",maxProperties:"Doit comporter au maximum {{maximumProperties}} lments",minItems:"Doit comporter au minimum {{minimumItems}} lments",maxItems:"Doit comporter au maximum {{minimumItems}} lments",uniqueItems:"Tous les lments doivent tre uniques"},ce=function(){function e(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.ajvOptions={allErrors:!0,jsonPointers:!0,unknownFormats:"ignore"},this.ajv=new r(this.ajvOptions),this.validateFormData=null,this.formValues={},this.data={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.validData=null,this.isValid=null,this.ajvErrors=null,this.validationErrors=null,this.dataErrors=new Map,this.formValueSubscription=null,this.dataChanges=new n.Subject,this.isValidChanges=new n.Subject,this.validationErrorChanges=new n.Subject,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.schemaRefLibrary={},this.layoutRefLibrary={"":null},this.templateRefLibrary={},this.hasRootReference=!1,this.language="en-US",this.defaultFormOptions={addSubmit:"auto",debug:!1,disableInvalidSubmit:!0,formDisabled:!1,formReadonly:!1,fieldsRequired:!1,framework:"no-framework",loadExternalAssets:!1,pristine:{errors:!0,success:!0},supressPropertyTitles:!1,setSchemaDefaults:"auto",setLayoutDefaults:"auto",validateOnRender:"auto",widgets:{},defautWidgetOptions:{listItems:1,addable:!0,orderable:!0,removable:!0,enableErrorState:!0,enableSuccessState:!0,feedback:!1,feedbackOnRender:!1,notitle:!1,disabled:!1,readonly:!1,returnEmptyFields:!0,validationMessages:{}}},this.setLanguage(this.language)}return e.prototype.setLanguage=function(e){void 0===e&&(e="en-US");var t="fr"===(this.language=e).slice(0,2)?pe:de;this.defaultFormOptions.defautWidgetOptions.validationMessages=A.cloneDeep(t)},e.prototype.getData=function(){return this.data},e.prototype.getSchema=function(){return this.schema},e.prototype.getLayout=function(){return this.layout},e.prototype.resetAllValues=function(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.validateFormData=null,this.formValues={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.data={},this.validData=null,this.isValid=null,this.validationErrors=null,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.layoutRefLibrary={},this.schemaRefLibrary={},this.templateRefLibrary={},this.formOptions=A.cloneDeep(this.defaultFormOptions)},e.prototype.buildRemoteError=function(e){var u=this;N(e,function(e,t){if(t in u.formGroup.controls)try{for(var n=q.__values(e),r=n.next();!r.done;r=n.next()){var o=r.value,i={};i[o.code]=o.message,u.formGroup.get(t).setErrors(i,{emitEvent:!0})}}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}var a,s})},e.prototype.validateData=function(e,t){void 0===t&&(t=!0),this.data=oe(e,this.dataMap,this.dataRecursiveRefMap,this.arrayMap,this.formOptions.returnEmptyFields),this.isValid=this.validateFormData(this.data),this.validData=this.isValid?this.data:null;var n,r;this.ajvErrors=this.validateFormData.errors,this.validationErrors=(n=this.validateFormData.errors,r={},(n||[]).forEach(function(e){r[e.dataPath]||(r[e.dataPath]=[]),r[e.dataPath].push(e.message)}),r),t&&(this.dataChanges.next(this.data),this.isValidChanges.next(this.isValid),this.validationErrorChanges.next(this.ajvErrors))},e.prototype.buildFormGroupTemplate=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),this.formGroupTemplate=ne(this,e,t)},e.prototype.buildFormGroup=function(){var t=this;this.formGroup=re(this.formGroupTemplate),this.formGroup&&(this.compileAjvSchema(),this.validateData(this.formGroup.value),this.formValueSubscription&&this.formValueSubscription.unsubscribe(),this.formValueSubscription=this.formGroup.valueChanges.subscribe(function(e){return t.validateData(e)}))},e.prototype.buildLayout=function(e){this.layout=ae(this,e)},e.prototype.setOptions=function(e){if(z(e)){var t=A.cloneDeep(e);z(t.defaultOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defaultOptions),delete t.defaultOptions),z(t.defautWidgetOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defautWidgetOptions),delete t.defautWidgetOptions),Object.assign(this.formOptions,t);var n=this.formOptions.defautWidgetOptions;["ErrorState","SuccessState"].filter(function(e){return J(n,"disable"+e)}).forEach(function(e){n["enable"+e]=!n["disable"+e],delete n["disable"+e]})}},e.prototype.compileAjvSchema=function(){this.validateFormData||(Array.isArray(this.schema.properties["ui:order"])&&(this.schema["ui:order"]=this.schema.properties["ui:order"],delete this.schema.properties["ui:order"]),this.ajv.removeSchema(this.schema),this.validateFormData=this.ajv.compile(this.schema))},e.prototype.buildSchemaFromData=function(e,t){if(void 0===t&&(t=!1),e)return M(e,t);this.schema=M(this.formValues,t)},e.prototype.buildSchemaFromLayout=function(e){e||(this.schema=void this.layout)},e.prototype.setTpldata=function(e){void 0===e&&(e={}),this.tpldata=e},e.prototype.parseText=function(e,n,r,o){var i=this;return void 0===e&&(e=""),void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=null),e&&/{{.+?}}/.test(e)?e.replace(/{{(.+?)}}/g,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.parseExpression(e[1],n,r,o,i.tpldata)}):e},e.prototype.parseExpression=function(t,n,r,o,i){var a=this;if(void 0===t&&(t=""),void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=null),void 0===i&&(i=null),"string"!=typeof t)return"";var e="number"==typeof o?o+1+"":o||"";if(("'"===(t=t.trim())[0]||'"'===t[0])&&t[0]===t[t.length-1]&&-1===t.slice(1,t.length-1).indexOf(t[0]))return t.slice(1,t.length-1);if("idx"===t||"$index"===t)return e;if("value"===t&&!J(r,"value"))return n;if(['"',"'"," ","||","&&","+"].every(function(e){return-1===t.indexOf(e)})){var s=L.parseObjectPath(t);return"value"===s[0]&&L.has(n,s.slice(1))?L.get(n,s.slice(1)):"values"===s[0]&&L.has(r,s.slice(1))?L.get(r,s.slice(1)):"tpldata"===s[0]&&L.has(i,s.slice(1))?L.get(i,s.slice(1)):L.has(r,s)?L.get(r,s):""}return-1<t.indexOf("[idx]")&&(t=t.replace(/\[idx\]/g,e)),-1<t.indexOf("[$index]")&&(t=t.replace(/\[$index\]/g,e)),-1<t.indexOf("||")?t.split("||").reduce(function(e,t){return e||a.parseExpression(t,n,r,o,i)},""):-1<t.indexOf("&&")?t.split("&&").reduce(function(e,t){return e&&a.parseExpression(t,n,r,o,i)}," ").trim():-1<t.indexOf("+")?t.split("+").map(function(e){return a.parseExpression(e,n,r,o,i)}).join(""):""},e.prototype.setArrayItemTitle=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t=null),void 0===n&&(n=null);var r=e.layoutNode,o=this.getFormControlValue(e),i="array"===(r.type||"").slice(-5)&&W(o),a=L.getFirst(i&&"$ref"!==t.type?[[t,"/options/legend"],[t,"/options/title"],[r,"/options/title"],[r,"/options/legend"]]:[[t,"/options/title"],[t,"/options/legend"],[r,"/options/title"],[r,"/options/legend"]]);if(!a)return a;var s=W(o)&&n<o.length?o[n]:o;return this.parseText(a,s,o,n)},e.prototype.setItemTitle=function(e){return!e.options.title&&/^(\d+|-)$/.test(e.layoutNode.name)?null:this.parseText(e.options.title||D(e.layoutNode.name),this.getFormControlValue(this),(this.getFormControlGroup(this)||{}).value,e.dataIndex[e.dataIndex.length-1])},e.prototype.evaluateCondition=function(e,t){var n=t&&t[t.length-1],r=!0;if(y((e.options||{}).condition))if("string"==typeof e.options.condition){var o=e.options.condition;y(n)&&(o=o.replace("[arrayIndex]","["+n+"]")),o=L.parseObjectPath(o),(r=!!L.get(this.data,o))||"model"!==o[0]||(r=!!L.get({model:this.data},o))}else if("function"==typeof e.options.condition)r=e.options.condition(this.data);else if("string"==typeof e.options.condition.functionBody)try{r=new Function("model","arrayIndices",e.options.condition.functionBody)(this.data,t)}catch(i){r=!0,console.error("condition functionBody errored out on evaluation: "+e.options.condition.functionBody)}return r},e.prototype.initializeControl=function(t,e){var n=this;if(void 0===e&&(e=!0),!z(t))return!1;if(R(t.options)&&(t.options=R((t.layoutNode||{}).options)?A.cloneDeep(this.formOptions):t.layoutNode.options),t.formControl=this.getFormControl(t),t.boundControl=e&&!!t.formControl,t.formControl)t.controlName=this.getFormControlName(t),t.controlValue=t.formControl.value,t.controlDisabled=t.formControl.disabled,t.options.errorMessage="VALID"===t.formControl.status?null:this.formatErrors(t.formControl.errors,t.options.validationMessages),t.options.showErrors=!0===this.formOptions.validateOnRender||"auto"===this.formOptions.validateOnRender&&y(t.controlValue),t.formControl.statusChanges.subscribe(function(e){return t.options.errorMessage="VALID"===e?null:n.formatErrors(t.formControl.errors,t.options.validationMessages)}),t.formControl.valueChanges.subscribe(function(e){A.isEqual(t.controlValue,e)||(t.controlValue=e)});else{t.controlName=t.layoutNode.name,t.controlValue=t.layoutNode.value||null;var r=this.getDataPointer(t);e&&r&&console.error('warning: control "'+r+'" is not bound to the Angular FormGroup.')}return t.boundControl},e.prototype.formatErrors=function(r,e){if(void 0===e&&(e={}),R(r))return null;z(e)||(e={});var o=function(e){return e[0].toUpperCase()+(e.slice(1)||"").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},i=function(t){return"object"==typeof t?Object.keys(t).map(function(e){return!0===t[e]?o(e):!1===t[e]?"Not "+o(e):o(e)+": "+i(t[e])}).join(", "):o(t.toString())};return Object.keys(r).filter(function(e){return"required"!==e||1===Object.keys(r).length}).map(function(n){return"string"==typeof e?e:"function"==typeof e[n]?e[n](r[n]):"string"==typeof e[n]?/{{.+?}}/.test(e[n])?Object.keys(r[n]).reduce(function(e,t){return e.replace(new RegExp("{{"+t+"}}","g"),r[n][t])},e[n]):e[n]:o(n)+" Error: "+i(r[n])}).join("<br>")},e.prototype.updateValue=function(e,t){if(e.controlValue=t,e.boundControl&&(e.formControl.setValue(t),e.formControl.markAsDirty()),e.layoutNode.value=t,W(e.options.copyValueTo))try{for(var n=q.__values(e.options.copyValueTo),r=n.next();!r.done;r=n.next()){var o=r.value,i=ie(this.formGroup,o);z(i)&&"function"==typeof i.setValue&&(i.setValue(t),i.markAsDirty())}}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}var a,s},e.prototype.updateArrayCheckboxList=function(e,t){for(var n=this.getFormControl(e);n.value.length;)n.removeAt(0);var r,o,i=E(e.layoutNode.dataPointer+"/-",this.dataRecursiveRefMap,this.arrayMap);try{for(var a=q.__values(t),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.checked){var u=re(this.templateRefLibrary[i]);u.setValue(l.value),n.push(u)}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(o=a["return"])&&o.call(a)}finally{if(r)throw r.error}}n.markAsDirty()},e.prototype.getFormControl=function(e){return e.layoutNode&&V(e.layoutNode.dataPointer)&&"$ref"!==e.layoutNode.type?ie(this.formGroup,this.getDataPointer(e)):null},e.prototype.getFormControlValue=function(e){if(!e.layoutNode||!V(e.layoutNode.dataPointer)||"$ref"===e.layoutNode.type)return null;var t=ie(this.formGroup,this.getDataPointer(e));return t?t.value:null},e.prototype.getFormControlGroup=function(e){return e.layoutNode&&V(e.layoutNode.dataPointer)?ie(this.formGroup,this.getDataPointer(e),!0):null},e.prototype.getFormControlName=function(e){return e.layoutNode&&V(e.layoutNode.dataPointer)&&y(e.dataIndex)?L.toKey(this.getDataPointer(e)):null},e.prototype.getLayoutArray=function(e){return L.get(this.layout,this.getLayoutPointer(e),0,-1)},e.prototype.getParentNode=function(e){return L.get(this.layout,this.getLayoutPointer(e),0,-2)},e.prototype.getDataPointer=function(e){return e.layoutNode&&V(e.layoutNode.dataPointer)&&y(e.dataIndex)?L.toIndexedPointer(e.layoutNode.dataPointer,e.dataIndex,this.arrayMap):null},e.prototype.getLayoutPointer=function(e){return y(e.layoutIndex)?"/"+e.layoutIndex.join("/items/"):null},e.prototype.isControlBound=function(e){if(!e.layoutNode||!V(e.layoutNode.dataPointer)||!y(e.dataIndex))return!1;var t=this.getFormControlGroup(e),n=this.getFormControlName(e);return!!t&&J(t.controls,n)},e.prototype.addItem=function(e,t){if(!(e.layoutNode&&V(e.layoutNode.$ref)&&y(e.dataIndex)&&y(e.layoutIndex)))return!1;var n=re(this.templateRefLibrary[e.layoutNode.$ref]);e.layoutNode.arrayItem?this.getFormControlGroup(e).push(n):this.getFormControlGroup(e).addControl(t||this.getFormControlName(e),n);var r=le(e.layoutNode,this);return r.arrayItem=e.layoutNode.arrayItem,e.layoutNode.arrayItemType?r.arrayItemType=e.layoutNode.arrayItemType:delete r.arrayItemType,t&&(r.name=t,r.dataPointer+="/"+L.escape(t),r.options.title=S(t)),L.insert(this.layout,this.getLayoutPointer(e),r),!0},e.prototype.moveArrayItem=function(e,t,n){if(!(e.layoutNode&&V(e.layoutNode.dataPointer)&&y(e.dataIndex)&&y(e.layoutIndex)&&V(t)&&V(n)&&t!==n))return!1;var r=this.getFormControlGroup(e),o=r.at(t);r.removeAt(t),r.insert(n,o),r.updateValueAndValidity();var i=this.getLayoutArray(e);return i.splice(n,0,i.splice(t,1)[0]),!0},e.prototype.removeItem=function(e){return!!(e.layoutNode&&V(e.layoutNode.dataPointer)&&y(e.dataIndex)&&y(e.layoutIndex))&&(e.layoutNode.arrayItem?this.getFormControlGroup(e).removeAt(e.dataIndex[e.dataIndex.length-1]):this.getFormControlGroup(e).removeControl(this.getFormControlName(e)),L.remove(this.layout,this.getLayoutPointer(e)),!0)},e}();ce.decorators=[{type:a.Injectable}],ce.ctorParameters=function(){return[]};var me=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},Object.defineProperty(e.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!0,configurable:!0}),e.prototype.addItem=function(e){e.preventDefault(),this.jsf.addItem(this)},Object.defineProperty(e.prototype,"buttonText",{get:function(){var e={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return e.layoutNode.add||this.jsf.setArrayItemTitle(e,this.layoutNode,this.itemCount)},enumerable:!0,configurable:!0}),e}();me.decorators=[{type:a.Component,args:[{selector:"add-reference-widget",template:'\n    <button *ngIf="showAddButton"\n      [class]="options?.fieldHtmlClass || \'\'"\n      [disabled]="options?.readonly"\n      (click)="addItem($event)">\n      <span *ngIf="options?.icon" [class]="options?.icon"></span>\n      <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n    </button>',changeDetection:a.ChangeDetectionStrategy.Default}]}],me.ctorParameters=function(){return[{type:ce}]},me.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var fe=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();fe.decorators=[{type:a.Component,args:[{selector:"one-of-widget",template:""}]}],fe.ctorParameters=function(){return[{type:ce}]},fe.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var he=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e}();he.decorators=[{type:a.Component,args:[{selector:"button-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <button\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n        <span *ngIf="options?.icon || options?.title"\n          [class]="options?.icon"\n          [innerHTML]="options?.title"></span>\n      </button>\n    </div>'}]}],he.ctorParameters=function(){return[{type:ce}]},he.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var ye=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),null!==this.controlValue&&this.controlValue!==undefined||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){e.preventDefault(),this.jsf.updateValue(this,e.target.checked?this.trueValue:this.falseValue)},Object.defineProperty(e.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!0,configurable:!0}),e}();ye.decorators=[{type:a.Component,args:[{selector:"checkbox-widget",template:"\n    <label\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.itemLabelHtmlClass || ''\">\n      <input *ngIf=\"boundControl\"\n        [formControl]=\"formControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        type=\"checkbox\">\n      <input *ngIf=\"!boundControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [checked]=\"isChecked ? 'checked' : null\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [disabled]=\"controlDisabled\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        [value]=\"controlValue\"\n        type=\"checkbox\"\n        (change)=\"updateValue($event)\">\n      <span *ngIf=\"options?.title\"\n        [style.display]=\"options?.notitle ? 'none' : ''\"\n        [innerHTML]=\"options?.title\"></span>\n    </label>"}]}],ye.ctorParameters=function(){return[{type:ce}]},ye.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var ve=function(){function e(e,t,n){this.elementRef=e,this.jsf=t,this.ngZone=n,this.overParentElement=!1,this.overChildElement=!1}return e.prototype.ngOnInit=function(){var r=this;this.orderable&&this.layoutNode&&this.layoutIndex&&this.dataIndex&&(this.element=this.elementRef.nativeElement,this.element.draggable=!0,this.arrayLayoutIndex="move:"+this.layoutIndex.slice(0,-1).toString(),this.ngZone.runOutsideAngular(function(){r.element.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="move";var t=r.dataIndex[r.dataIndex.length-1];sessionStorage.setItem(r.arrayLayoutIndex,t+"")}),r.element.addEventListener("dragover",function(e){return e.preventDefault&&e.preventDefault(),!(e.dataTransfer.dropEffect="move")}),r.element.addEventListener("dragenter",function(e){if(r.overParentElement)return r.overChildElement=!0;r.overParentElement=!0;var t=sessionStorage.getItem(r.arrayLayoutIndex);null!==t&&(r.dataIndex[r.dataIndex.length-1]<+t?r.element.classList.add("drag-target-top"):r.dataIndex[r.dataIndex.length-1]>+t&&r.element.classList.add("drag-target-bottom"))}),r.element.addEventListener("dragleave",function(e){r.overChildElement?r.overChildElement=!1:r.overParentElement&&(r.overParentElement=!1);var t=sessionStorage.getItem(r.arrayLayoutIndex);r.overParentElement||r.overChildElement||null===t||(r.element.classList.remove("drag-target-top"),r.element.classList.remove("drag-target-bottom"))}),r.element.addEventListener("drop",function(e){r.element.classList.remove("drag-target-top"),r.element.classList.remove("drag-target-bottom");var t=sessionStorage.getItem(r.arrayLayoutIndex),n=r.dataIndex[r.dataIndex.length-1];return null!==t&&+t!==n&&r.jsf.moveArrayItem(r,+t,n),sessionStorage.removeItem(r.arrayLayoutIndex),!1})}))},e}();ve.decorators=[{type:a.Directive,args:[{selector:"[orderable]"}]}],ve.ctorParameters=function(){return[{type:a.ElementRef},{type:ce},{type:a.NgZone}]},ve.propDecorators={orderable:[{type:a.Input}],layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var ge=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.checkboxList=[]}return e.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.layoutOrientation="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type?"horizontal":"vertical",this.jsf.initializeControl(this),this.checkboxList=ue(this.options.titleMap||this.options.enumNames,this.options["enum"],!0),this.boundControl){var t=this.jsf.getFormControl(this);this.checkboxList.forEach(function(e){return e.checked=t.value.includes(e.value)})}},e.prototype.updateValue=function(e){try{for(var t=q.__values(this.checkboxList),n=t.next();!n.done;n=t.next()){var r=n.value;e.target.value===r.value&&(r.checked=e.target.checked)}}catch(a){o={error:a}}finally{try{n&&!n.done&&(i=t["return"])&&i.call(t)}finally{if(o)throw o.error}}var o,i;this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},e}();ge.decorators=[{type:a.Component,args:[{selector:"checkboxes-widget",template:'\n    <label *ngIf="options?.title"\n      [class]="options?.labelHtmlClass || \'\'"\n      [style.display]="options?.notitle ? \'none\' : \'\'"\n      [innerHTML]="options?.title"></label>\n\n    \x3c!-- \'horizontal\' = checkboxes-inline or checkboxbuttons --\x3e\n    <div *ngIf="layoutOrientation === \'horizontal\'" [class]="options?.htmlClass || \'\'">\n      <label *ngFor="let checkboxItem of checkboxList"\n        [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n        [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n          (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n          (\' \' + (options?.style?.unselected || \'\')))">\n        <input type="checkbox"\n          [attr.required]="options?.required"\n          [checked]="checkboxItem.checked"\n          [class]="options?.fieldHtmlClass || \'\'"\n          [disabled]="controlDisabled"\n          [id]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [name]="checkboxItem?.name"\n          [readonly]="options?.readonly ? \'readonly\' : null"\n          [value]="checkboxItem.value"\n          (change)="updateValue($event)">\n        <span [innerHTML]="checkboxItem.name"></span>\n      </label>\n    </div>\n\n    \x3c!-- \'vertical\' = regular checkboxes --\x3e\n    <div *ngIf="layoutOrientation === \'vertical\'">\n      <div *ngFor="let checkboxItem of checkboxList" [class]="options?.htmlClass || \'\'">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n            (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n            (\' \' + (options?.style?.unselected || \'\')))">\n          <input type="checkbox"\n            [attr.required]="options?.required"\n            [checked]="checkboxItem.checked"\n            [class]="options?.fieldHtmlClass || \'\'"\n            [disabled]="controlDisabled"\n            [id]="options?.name + \'/\' + checkboxItem.value"\n            [name]="checkboxItem?.name"\n            [readonly]="options?.readonly ? \'readonly\' : null"\n            [value]="checkboxItem.value"\n            (change)="updateValue($event)">\n          <span [innerHTML]="checkboxItem?.name"></span>\n        </label>\n      </div>\n    </div>'}]}],ge.ctorParameters=function(){return[{type:ce}]},ge.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var be=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();be.decorators=[{type:a.Component,args:[{selector:"file-widget",template:""}]}],be.ctorParameters=function(){return[{type:ce}]},be.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Ie=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();Ie.decorators=[{type:a.Component,args:[{selector:"input-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n        <datalist *ngIf="options?.typeahead?.source"\n          [id]="\'control\' + layoutNode?._id + \'Autocomplete\'">\n          <option *ngFor="let word of options?.typeahead?.source" [value]="word">\n        </datalist>\n    </div>'}]}],Ie.ctorParameters=function(){return[{type:ce}]},Ie.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var xe=function(){function e(e){this.jsf=e,this.message=null}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.message=this.options.help||this.options.helpvalue||this.options.msg||this.options.message},e}();xe.decorators=[{type:a.Component,args:[{selector:"message-widget",template:'\n    <span *ngIf="message"\n      [class]="options?.labelHtmlClass || \'\'"\n      [innerHTML]="message"></span>'}]}],xe.ctorParameters=function(){return[{type:ce}]},xe.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var je=function(){};je.decorators=[{type:a.Component,args:[{selector:"none-widget",template:""}]}],je.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Fe=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();Fe.decorators=[{type:a.Component,args:[{selector:"number-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n      <span *ngIf="layoutNode?.type === \'range\'" [innerHTML]="controlValue"></span>\n    </div>'}]}],Fe.ctorParameters=function(){return[{type:ce}]},Fe.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Ce=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.layoutOrientation="vertical",this.radiosList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"!==this.layoutNode.type&&"radiobuttons"!==this.layoutNode.type||(this.layoutOrientation="horizontal"),this.radiosList=ue(this.options.titleMap||this.options.enumNames,this.options["enum"],!0),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();Ce.decorators=[{type:a.Component,args:[{selector:"radios-widget",template:"\n    <label *ngIf=\"options?.title\"\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.labelHtmlClass || ''\"\n      [style.display]=\"options?.notitle ? 'none' : ''\"\n      [innerHTML]=\"options?.title\"></label>\n\n    \x3c!-- 'horizontal' = radios-inline or radiobuttons --\x3e\n    <div *ngIf=\"layoutOrientation === 'horizontal'\"\n      [class]=\"options?.htmlClass || ''\">\n      <label *ngFor=\"let radioItem of radiosList\"\n        [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n        [class]=\"(options?.itemLabelHtmlClass || '') +\n          ((controlValue + '' === radioItem?.value + '') ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\">\n        <input type=\"radio\"\n          [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n          [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n          [attr.required]=\"options?.required\"\n          [checked]=\"radioItem?.value === controlValue\"\n          [class]=\"options?.fieldHtmlClass || ''\"\n          [disabled]=\"controlDisabled\"\n          [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [name]=\"controlName\"\n          [value]=\"radioItem?.value\"\n          (change)=\"updateValue($event)\">\n        <span [innerHTML]=\"radioItem?.name\"></span>\n      </label>\n    </div>\n\n    \x3c!-- 'vertical' = regular radios --\x3e\n    <div *ngIf=\"layoutOrientation !== 'horizontal'\">\n      <div *ngFor=\"let radioItem of radiosList\"\n        [class]=\"options?.htmlClass || ''\">\n        <label\n          [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [class]=\"(options?.itemLabelHtmlClass || '') +\n            ((controlValue + '' === radioItem?.value + '') ?\n            (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n            (' ' + (options?.style?.unselected || '')))\">\n          <input type=\"radio\"\n            [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n            [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n            [attr.required]=\"options?.required\"\n            [checked]=\"radioItem?.value === controlValue\"\n            [class]=\"options?.fieldHtmlClass || ''\"\n            [disabled]=\"controlDisabled\"\n            [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n            [name]=\"controlName\"\n            [value]=\"radioItem?.value\"\n            (change)=\"updateValue($event)\">\n          <span [innerHTML]=\"radioItem?.name\"></span>\n        </label>\n      </div>\n    </div>"}]}],Ce.ctorParameters=function(){return[{type:ce}]},Ce.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var we=function(){function e(e){this.jsf=e,this.isFlexItem=!1}return e.prototype.isDraggable=function(e){return e.arrayItem&&"$ref"!==e.type&&"list"===e.arrayItemType&&!1!==this.isOrderable},e.prototype.getFlexAttribute=function(e,t){var n=["flex-grow","flex-shrink","flex-basis"].indexOf(t);return((e.options||{}).flex||"").split(/\s+/)[n]||(e.options||{})[t]||["1","1","auto"][n]},e.prototype.showWidget=function(e){return this.jsf.evaluateCondition(e,this.dataIndex)},e}();we.decorators=[{type:a.Component,args:[{selector:"root-widget",template:'\n    <div *ngFor="let layoutItem of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.align-self]="(layoutItem.options || {})[\'align-self\']"\n      [style.flex-basis]="getFlexAttribute(layoutItem, \'flex-basis\')"\n      [style.flex-grow]="getFlexAttribute(layoutItem, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutItem, \'flex-shrink\')"\n      [style.order]="(layoutItem.options || {}).order">\n      <div\n        [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"\n        [orderable]="isDraggable(layoutItem)">\n        <select-framework-widget *ngIf="showWidget(layoutItem)"\n          [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n          [layoutIndex]="(layoutIndex || []).concat(i)"\n          [layoutNode]="layoutItem"></select-framework-widget>\n      </div>\n    </div>',styles:["\n    [draggable=true] {\n      transition: all 150ms cubic-bezier(.4, 0, .2, 1);\n    }\n    [draggable=true]:hover {\n      cursor: move;\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n      position: relative; z-index: 10;\n      margin-top: -1px;\n      margin-left: -1px;\n      margin-right: 1px;\n      margin-bottom: 1px;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],we.ctorParameters=function(){return[{type:ce}]},we.propDecorators={dataIndex:[{type:a.Input}],layoutIndex:[{type:a.Input}],layout:[{type:a.Input}],isOrderable:[{type:a.Input}],isFlexItem:[{type:a.Input}]};var Oe=function(){function e(e){this.jsf=e,this.expanded=!0}return Object.defineProperty(e.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"fieldset":case"array":case"tab":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;default:this.containerType="div"}},e.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},e.prototype.getFlexAttribute=function(e){var t="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;if("flex"!==e&&!t)return null;switch(e){case"is-flex":return t;case"display":return t?"flex":"initial";case"flex-direction":case"flex-wrap":var n=["flex-direction","flex-wrap"].indexOf(e);return(this.options["flex-flow"]||"").split(/\s+/)[n]||this.options[e]||["column","nowrap"][n];case"justify-content":case"align-items":case"align-content":return this.options[e]}},e}();Oe.decorators=[{type:a.Component,args:[{selector:"section-widget",template:'\n    <div *ngIf="containerType === \'div\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <label *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></label>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n    </div>\n    <fieldset *ngIf="containerType === \'fieldset\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded"\n      [disabled]="options?.readonly">\n      <legend *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></legend>\n      <div *ngIf="options?.messageLocation !== \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n      <div *ngIf="options?.messageLocation === \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n    </fieldset>',styles:["\n    .legend { font-weight: bold; }\n    .expandable > legend:before, .expandable > label:before  { content: ''; padding-right: .3em; }\n    .expanded > legend:before, .expanded > label:before  { content: ''; padding-right: .2em; }\n  "]}]}],Oe.ctorParameters=function(){return[{type:ce}]},Oe.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var De=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=W}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=ue(this.options.titleMap||this.options.enumNames,this.options["enum"],!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();De.decorators=[{type:a.Component,args:[{selector:"select-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n      <select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        (change)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n    </div>'}]}],De.ctorParameters=function(){return[{type:ce}]},De.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Pe=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){if(!this.newComponent&&this.jsf.framework&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.jsf.framework))),this.newComponent)try{for(var e=q.__values(["layoutNode","layoutIndex","dataIndex"]),t=e.next();!t.done;t=e.next()){var n=t.value;this.newComponent.instance[n]=this[n]}}catch(i){r={error:i}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(r)throw r.error}}var r,o},e}();Pe.decorators=[{type:a.Component,args:[{selector:"select-framework-widget",template:"<div #widgetContainer></div>"}]}],Pe.ctorParameters=function(){return[{type:a.ComponentFactoryResolver},{type:ce}]},Pe.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}],widgetContainer:[{type:a.ViewChild,args:["widgetContainer",{read:a.ViewContainerRef}]}]};var _e=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){if(!this.newComponent&&(this.layoutNode||{}).widget&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.widget))),this.newComponent)try{for(var e=q.__values(["layoutNode","layoutIndex","dataIndex"]),t=e.next();!t.done;t=e.next()){var n=t.value;this.newComponent.instance[n]=this[n]}}catch(i){r={error:i}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(r)throw r.error}}var r,o},e}();_e.decorators=[{type:a.Component,args:[{selector:"select-widget-widget",template:"<div #widgetContainer></div>"}]}],_e.ctorParameters=function(){return[{type:a.ComponentFactoryResolver},{type:ce}]},_e.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}],widgetContainer:[{type:a.ViewChild,args:["widgetContainer",{read:a.ViewContainerRef}]}]};var ke=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){var t=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),J(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe(function(e){return t.controlDisabled=!e})),null!==this.controlValue&&this.controlValue!==undefined||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e}();ke.decorators=[{type:a.Component,args:[{selector:"submit-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <input\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n    </div>'}]}],ke.ctorParameters=function(){return[{type:ce}]},ke.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Ne=function(){function e(e){this.jsf=e,this.selectedItem=0,this.showAddTab=!0}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},e.prototype.select=function(e){"$ref"===this.layoutNode.items[e].type&&(this.itemCount=this.layoutNode.items.length,this.jsf.addItem({layoutNode:this.layoutNode.items[e],layoutIndex:this.layoutIndex.concat(e),dataIndex:this.dataIndex.concat(e)}),this.updateControl()),this.selectedItem=e},e.prototype.updateControl=function(){var e=this.layoutNode.items[this.layoutNode.items.length-1];"$ref"===e.type&&this.itemCount>=(e.options.maxItems||1e3)&&(this.showAddTab=!1)},e.prototype.setTabTitle=function(e,t){return this.jsf.setArrayItemTitle(this,e,t)},e}();Ne.decorators=[{type:a.Component,args:[{selector:"tabs-widget",template:"\n    <ul\n      [class]=\"options?.labelHtmlClass || ''\">\n      <li *ngFor=\"let item of layoutNode?.items; let i = index\"\n        [class]=\"(options?.itemLabelHtmlClass || '') + (selectedItem === i ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + options?.style?.unselected))\"\n        role=\"presentation\"\n        data-tabs>\n        <a *ngIf=\"showAddTab || item.type !== '$ref'\"\n           [class]=\"'nav-link' + (selectedItem === i ? (' ' + options?.activeClass + ' ' + options?.style?.selected) :\n            (' ' + options?.style?.unselected))\"\n          [innerHTML]=\"setTabTitle(item, i)\"\n          (click)=\"select(i)\"></a>\n      </li>\n    </ul>\n\n    <div *ngFor=\"let layoutItem of layoutNode?.items; let i = index\"\n      [class]=\"options?.htmlClass || ''\">\n\n      <select-framework-widget *ngIf=\"selectedItem === i\"\n        [class]=\"(options?.fieldHtmlClass || '') +\n          ' ' + (options?.activeClass || '') +\n          ' ' + (options?.style?.selected || '')\"\n        [dataIndex]=\"layoutNode?.dataType === 'array' ? (dataIndex || []).concat(i) : dataIndex\"\n        [layoutIndex]=\"(layoutIndex || []).concat(i)\"\n        [layoutNode]=\"layoutItem\"></select-framework-widget>\n\n    </div>",styles:[" a { cursor: pointer; } "]}]}],Ne.ctorParameters=function(){return[{type:ce}]},Ne.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Me=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){if(!this.newComponent&&this.layoutNode.options.template&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.options.template))),this.newComponent)try{for(var e=q.__values(["layoutNode","layoutIndex","dataIndex"]),t=e.next();!t.done;t=e.next()){var n=t.value;this.newComponent.instance[n]=this[n]}}catch(i){r={error:i}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(r)throw r.error}}var r,o},e}();Me.decorators=[{type:a.Component,args:[{selector:"template-widget",template:"<div #widgetContainer></div>"}]}],Me.ctorParameters=function(){return[{type:a.ComponentFactoryResolver},{type:ce}]},Me.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}],widgetContainer:[{type:a.ViewChild,args:["widgetContainer",{read:a.ViewContainerRef}]}]};var Ve=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e}();Ve.decorators=[{type:a.Component,args:[{selector:"textarea-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <textarea *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"></textarea>\n      <textarea *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [value]="controlValue"\n        (input)="updateValue($event)">{{controlValue}}</textarea>\n    </div>'}]}],Ve.ctorParameters=function(){return[{type:ce}]},Ve.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Se=function(){function e(){this.defaultWidget="text",this.widgetLibrary={none:je,root:we,"select-framework":Pe,"select-widget":_e,$ref:me,email:"text",integer:"number",number:Fe,password:"text",search:"text",tel:"text",text:Ie,url:"text",color:"text",date:"text",datetime:"text","datetime-local":"text",month:"text",range:"number",time:"text",week:"text",checkbox:ye,file:be,hidden:"text",image:"text",radio:"radios",reset:"submit",submit:ke,button:he,select:De,textarea:Ve,checkboxes:ge,"checkboxes-inline":"checkboxes",checkboxbuttons:"checkboxes",radios:Ce,"radios-inline":"radios",radiobuttons:"radios",section:Oe,div:"section",fieldset:"section",flex:"section","one-of":fe,array:"section",tabarray:"tabs",tab:"section",tabs:Ne,message:xe,help:"message",msg:"message",html:"message",template:Me,advancedfieldset:"section",authfieldset:"section",optionfieldset:"one-of",selectfieldset:"one-of",conditional:"section",actions:"section",tagsinput:"section",updown:"number","date-time":"datetime-local","alt-datetime":"datetime-local","alt-date":"date",wizard:"section",textline:"text"},this.registeredWidgets={},this.frameworkWidgets={},this.activeWidgets={},this.setActiveWidgets()}return e.prototype.setActiveWidgets=function(){this.activeWidgets=Object.assign({},this.widgetLibrary,this.frameworkWidgets,this.registeredWidgets);try{for(var e=q.__values(Object.keys(this.activeWidgets)),t=e.next();!t.done;t=e.next()){var n=t.value,r=this.activeWidgets[n];if("string"==typeof r){for(var o=[];"string"==typeof r&&!o.includes(r);)o.push(r),r=this.activeWidgets[r];"string"!=typeof r&&(this.activeWidgets[n]=r)}}}catch(s){i={error:s}}finally{try{t&&!t.done&&(a=e["return"])&&a.call(e)}finally{if(i)throw i.error}}return!0;var i,a},e.prototype.setDefaultWidget=function(e){return!!this.hasWidget(e)&&(this.defaultWidget=e,!0)},e.prototype.hasWidget=function(e,t){return void 0===t&&(t="activeWidgets"),!(!e||"string"!=typeof e)&&J(this[t],e)},e.prototype.hasDefaultWidget=function(e){return this.hasWidget(e,"widgetLibrary")},e.prototype.registerWidget=function(e,t){return!(!e||!t||"string"!=typeof e)&&(this.registeredWidgets[e]=t,this.setActiveWidgets())},e.prototype.unRegisterWidget=function(e){return!!J(this.registeredWidgets,e)&&(delete this.registeredWidgets[e],this.setActiveWidgets())},e.prototype.unRegisterAllWidgets=function(e){return void 0===e&&(e=!0),this.registeredWidgets={},e&&(this.frameworkWidgets={}),this.setActiveWidgets()},e.prototype.registerFrameworkWidgets=function(e){return null!==e&&"object"==typeof e||(e={}),this.frameworkWidgets=e,this.setActiveWidgets()},e.prototype.unRegisterFrameworkWidgets=function(){return!!Object.keys(this.frameworkWidgets).length&&(this.frameworkWidgets={},this.setActiveWidgets())},e.prototype.getWidget=function(e,t){return void 0===t&&(t="activeWidgets"),this.hasWidget(e,t)?this[t][e]:this.hasWidget(this.defaultWidget,t)?this[t][this.defaultWidget]:null},e.prototype.getAllWidgets=function(){return{widgetLibrary:this.widgetLibrary,registeredWidgets:this.registeredWidgets,frameworkWidgets:this.frameworkWidgets,activeWidgets:this.activeWidgets}},e}();Se.decorators=[{type:a.Injectable}],Se.ctorParameters=function(){return[]};var Le=function(){this.widgets={},this.stylesheets=[],this.scripts=[]};Le.decorators=[{type:a.Injectable}];var Ee=function(){function e(e,t){var n=this;this.frameworks=e,this.widgetLibrary=t,this.activeFramework=null,this.loadExternalAssets=!1,this.frameworkLibrary={},this.frameworks.forEach(function(e){return n.frameworkLibrary[e.name]=e}),this.defaultFramework=this.frameworks[0].name,this.setFramework(this.defaultFramework)}return e.prototype.setLoadExternalAssets=function(e){void 0===e&&(e=!0),this.loadExternalAssets=!!e},e.prototype.setFramework=function(e,t){return void 0===e&&(e=this.defaultFramework),void 0===t&&(t=this.loadExternalAssets),this.activeFramework="string"==typeof e&&this.hasFramework(e)?this.frameworkLibrary[e]:"object"==typeof e&&J(e,"framework")?e:this.frameworkLibrary[this.defaultFramework],this.registerFrameworkWidgets(this.activeFramework)},e.prototype.registerFrameworkWidgets=function(e){return J(e,"widgets")?this.widgetLibrary.registerFrameworkWidgets(e.widgets):this.widgetLibrary.unRegisterFrameworkWidgets()},e.prototype.hasFramework=function(e){return J(this.frameworkLibrary,e)},e.prototype.getFramework=function(){return this.activeFramework||this.setFramework("default",!0),this.activeFramework.framework},e.prototype.getFrameworkWidgets=function(){return this.activeFramework.widgets||{}},e.prototype.getFrameworkStylesheets=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.stylesheets||[]},e.prototype.getFrameworkScripts=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.scripts||[]},e}();Ee.decorators=[{type:a.Injectable}],Ee.ctorParameters=function(){return[{type:Array,decorators:[{type:a.Inject,args:[Le]}]},{type:Se,decorators:[{type:a.Inject,args:[Se]}]}]};var qe={provide:u.NG_VALUE_ACCESSOR,useExisting:a.forwardRef(function(){return Ae}),multi:!0},Ae=function(){function e(e,t,n,r,o){this.changeDetector=e,this.frameworkLibrary=t,this.widgetLibrary=n,this.jsf=r,this.sanitizer=o,this.formValueSubscription=null,this.formInitialized=!1,this.objectWrap=!1,this.previousInputs={schema:null,layout:null,data:null,options:null,framework:null,widgets:null,form:null,model:null,JSONSchema:null,UISchema:null,formData:null,loadExternalAssets:null,debug:null},this.onChanges=new a.EventEmitter,this.onSubmit=new a.EventEmitter,this.isValid=new a.EventEmitter,this.validationErrors=new a.EventEmitter,this.formSchema=new a.EventEmitter,this.formLayout=new a.EventEmitter,this.dataChange=new a.EventEmitter,this.modelChange=new a.EventEmitter,this.formDataChange=new a.EventEmitter,this.ngModelChange=new a.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this.objectWrap?this.jsf.data[1]:this.jsf.data},set:function(e){this.setFormValues(e,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stylesheets",{get:function(){var e=this.frameworkLibrary.getFrameworkStylesheets(),t=this.sanitizer.bypassSecurityTrustResourceUrl;return e.map(function(e){return t(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scripts",{get:function(){var e=this.frameworkLibrary.getFrameworkScripts(),t=this.sanitizer.bypassSecurityTrustResourceUrl;return e.map(function(e){return t(e)})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.updateForm()},e.prototype.ngOnChanges=function(){this.updateForm()},e.prototype.writeValue=function(e){this.setFormValues(e,!1),this.formValuesInput||(this.formValuesInput="ngModel")},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.jsf.formOptions.formDisabled!==!!e&&(this.jsf.formOptions.formDisabled=!!e,this.initializeForm())},e.prototype.updateForm=function(){var t=this;if(!this.formInitialized||!this.formValuesInput||this.language&&this.language!==this.jsf.language)this.initializeForm();else{this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language);var e=Object.keys(this.previousInputs).filter(function(e){return t.previousInputs[e]!==t[e]}),n=!0;if(1===e.length&&"form"===e[0]&&this.formValuesInput.startsWith("form.")&&(e=Object.keys(this.previousInputs.form||{}).filter(function(e){return!A.isEqual(t.previousInputs.form[e],t.form[e])}).map(function(e){return"form."+e}),n=!1),1===e.length&&e[0]===this.formValuesInput)if(-1===this.formValuesInput.indexOf("."))this.setFormValues(this[this.formValuesInput],n);else{var r=q.__read(this.formValuesInput.split("."),2),o=r[0],i=r[1];this.setFormValues(this[o][i],n)}else e.length&&(this.initializeForm(),this.onChange&&this.onChange(this.jsf.formValues),this.onTouched&&this.onTouched(this.jsf.formValues));Object.keys(this.previousInputs).filter(function(e){return t.previousInputs[e]!==t[e]}).forEach(function(e){return t.previousInputs[e]=t[e]})}},e.prototype.setFormValues=function(e,t){if(void 0===t&&(t=!0),e){var n=this.objectWrap?e[1]:e;this.jsf.formGroup?t&&this.jsf.formGroup.reset():(this.jsf.formValues=e,this.activateForm()),this.jsf.formGroup&&this.jsf.formGroup.patchValue(n),this.onChange&&this.onChange(n),this.onTouched&&this.onTouched(n)}else this.jsf.formGroup.reset()},e.prototype.submitForm=function(){var e=this.jsf.validData;this.onSubmit.emit(this.objectWrap?e[1]:e)},e.prototype.initializeForm=function(){if(this.schema||this.layout||this.data||this.form||this.model||this.JSONSchema||this.UISchema||this.formData||this.ngModel||this.jsf.data){if(this.jsf.resetAllValues(),this.initializeOptions(),this.initializeSchema(),this.initializeLayout(),this.initializeData(),this.activateForm(),this.debug||this.jsf.formOptions.debug){this.debugOutput=[].map(function(e){return JSON.stringify(e,null,2)}).join("\n")}this.formInitialized=!0}},e.prototype.initializeOptions=function(){this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language),this.jsf.setOptions({debug:!!this.debug});var e,t,n=this.loadExternalAssets||!1,r=this.framework||"default";if(z(this.options)&&(this.jsf.setOptions(this.options),n=this.options.loadExternalAssets||n,r=this.options.framework||r),z(this.form)&&z(this.form.options)&&(this.jsf.setOptions(this.form.options),n=this.form.options.loadExternalAssets||n,r=this.form.options.framework||r),z(this.widgets)&&this.jsf.setOptions({widgets:this.widgets}),this.frameworkLibrary.setLoadExternalAssets(n),this.frameworkLibrary.setFramework(r),this.jsf.framework=this.frameworkLibrary.getFramework(),z(this.jsf.formOptions.widgets))try{for(var o=q.__values(Object.keys(this.jsf.formOptions.widgets)),i=o.next();!i.done;i=o.next()){var a=i.value;this.widgetLibrary.registerWidget(a,this.jsf.formOptions.widgets[a])}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}z(this.form)&&z(this.form.tpldata)&&this.jsf.setTpldata(this.form.tpldata)},e.prototype.initializeSchema=function(){z(this.schema)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.schema=A.cloneDeep(this.schema)):J(this.form,"schema")&&z(this.form.schema)?this.jsf.schema=A.cloneDeep(this.form.schema):z(this.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=A.cloneDeep(this.JSONSchema)):J(this.form,"JSONSchema")&&z(this.form.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=A.cloneDeep(this.form.JSONSchema)):J(this.form,"properties")&&z(this.form.properties)?this.jsf.schema=A.cloneDeep(this.form):z(this.form),R(this.jsf.schema)||(P("object",this.jsf.schema.type)&&(this.jsf.schema.type="object"),J(this.jsf.schema,"type")&&"object"!==this.jsf.schema.type?(this.jsf.schema={type:"object",properties:{1:this.jsf.schema}},this.objectWrap=!0):J(this.jsf.schema,"type")||(z(this.jsf.schema.properties)||z(this.jsf.schema.patternProperties)||z(this.jsf.schema.additionalProperties)?this.jsf.schema.type="object":(this.jsf.JsonFormCompatibility=!0,this.jsf.schema={type:"object",properties:this.jsf.schema})),this.jsf.schema=function r(e,t){void 0===t&&(t={});var o=t.draft||null,i=t.changed||!1;if("object"!=typeof e)return e;if("function"==typeof e.map)return q.__spread(e.map(function(e){return r(e,{changed:i,draft:o})}));var n,a,s=Object.assign({},e),l=["array","boolean","integer","null","number","object","string"];if("string"==typeof s.$schema&&/http\:\/\/json\-schema\.org\/draft\-0\d\/schema\#/.test(s.$schema)&&(o=s.$schema[30]),s.contentEncoding&&(s.media={binaryEncoding:s.contentEncoding},delete s.contentEncoding,i=!0),"object"==typeof s["extends"]&&(s.allOf="function"==typeof s["extends"].map?s["extends"].map(function(e){return r(e,{changed:i,draft:o})}):[r(s["extends"],{changed:i,draft:o})],delete s["extends"],i=!0),s.disallow&&("string"==typeof s.disallow?s.not={type:s.disallow}:"function"==typeof s.disallow.map&&(s.not={anyOf:s.disallow.map(function(e){return"object"==typeof e?e:{type:e}})}),delete s.disallow,i=!0),"object"==typeof s.dependencies&&Object.keys(s.dependencies).some(function(e){return"string"==typeof s.dependencies[e]})&&(s.dependencies=Object.assign({},s.dependencies),Object.keys(s.dependencies).filter(function(e){return"string"==typeof s.dependencies[e]}).forEach(function(e){return s.dependencies[e]=[s.dependencies[e]]}),i=!0),"number"==typeof s.maxDecimal&&(s.multipleOf=1/Math.pow(10,s.maxDecimal),delete s.divisibleBy,i=!0,o&&2!==o||(o=1)),"number"==typeof s.divisibleBy&&(s.multipleOf=s.divisibleBy,delete s.divisibleBy,i=!0),"number"==typeof s.minimum&&!1===s.minimumCanEqual?(s.exclusiveMinimum=s.minimum,delete s.minimum,i=!0,o||(o=2)):"boolean"==typeof s.minimumCanEqual&&(delete s.minimumCanEqual,i=!0,o||(o=2)),"number"==typeof s.minimum&&!0===s.exclusiveMinimum?(s.exclusiveMinimum=s.minimum,delete s.minimum,i=!0):"boolean"==typeof s.exclusiveMinimum&&(delete s.exclusiveMinimum,i=!0),"number"==typeof s.maximum&&!1===s.maximumCanEqual?(s.exclusiveMaximum=s.maximum,delete s.maximum,i=!0,o||(o=2)):"boolean"==typeof s.maximumCanEqual&&(delete s.maximumCanEqual,i=!0,o||(o=2)),"number"==typeof s.maximum&&!0===s.exclusiveMaximum?(s.exclusiveMaximum=s.maximum,delete s.maximum,i=!0):"boolean"==typeof s.exclusiveMaximum&&(delete s.exclusiveMaximum,i=!0),"object"==typeof s.properties){var u=Object.assign({},s.properties),d=Array.isArray(s.required)?new Set(s.required):new Set;if((1===o||2===o||Object.keys(u).some(function(e){return!0===u[e].optional}))&&(Object.keys(u).filter(function(e){return!0!==u[e].optional}).forEach(function(e){return d.add(e)}),i=!0,o||(o=2)),Object.keys(u).some(function(e){return!0===u[e].required})&&(Object.keys(u).filter(function(e){return!0===u[e].required}).forEach(function(e){return d.add(e)}),i=!0),d.size&&(s.required=Array.from(d)),Object.keys(u).some(function(e){return u[e].requires})){var p="object"==typeof s.dependencies?Object.assign({},s.dependencies):{};Object.keys(u).filter(function(e){return u[e].requires}).forEach(function(e){return p[e]="string"==typeof u[e].requires?[u[e].requires]:u[e].requires}),s.dependencies=p,i=!0,o||(o=2)}s.properties=u}if("boolean"==typeof s.optional&&(delete s.optional,i=!0,o||(o=2)),s.requires&&delete s.requires,"boolean"==typeof s.required&&delete s.required,"string"!=typeof s.id||s.$id||("#"===s.id.slice(-1)&&(s.id=s.id.slice(0,-1)),s.$id=s.id+"-CONVERTED-TO-DRAFT-06#",delete s.id,i=!0),!s.type||("function"==typeof s.type.every?s.type.every(function(e){return l.includes(e)}):l.includes(s.type))||(i=!0),"string"==typeof s.$schema&&/http\:\/\/json\-schema\.org\/draft\-0[1-4]\/schema\#/.test(s.$schema))s.$schema="http://json-schema.org/draft-06/schema#",i=!0;else if(i&&"string"==typeof s.$schema){var c="Converted to draft 6 from "+s.$schema;"string"==typeof s.description&&s.description.length?s.description+="\n"+c:s.description=c,delete s.$schema}if(s.type&&("function"==typeof s.type.every?!s.type.every(function(e){return l.includes(e)}):!l.includes(s.type)))if(1===s.type.length&&(s.type=s.type[0]),"string"==typeof s.type)"any"===s.type?s.type=l:delete s.type;else if("object"==typeof s.type){if("function"==typeof s.type.every)if(s.type.every(function(e){return"string"==typeof e}))s.type=s.type.some(function(e){return"any"===e})?s.type=l:s.type.filter(function(e){return l.includes(e)});else if(1<s.type.length){var m=["additionalItems","items","maxItems","minItems","uniqueItems","contains"],f=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"],h=["maxProperties","minProperties","required","additionalProperties","properties","patternProperties","dependencies","propertyNames"],y=["maxLength","minLength","pattern","format"],v={array:q.__spread(f,h,y),integer:q.__spread(m,h,y),number:q.__spread(m,h,y),object:q.__spread(m,f,y),string:q.__spread(m,f,h),all:q.__spread(m,f,h,y)},g=[],b=function(e){var t="string"==typeof e?{type:e}:Object.assign({},e);Object.keys(s).filter(function(e){return!t.hasOwnProperty(e)&&!q.__spread(v[t.type]||v.all,["type","default"]).includes(e)}).forEach(function(e){return t[e]=s[e]}),g.push(t)};try{for(var I=q.__values(s.type),x=I.next();!x.done;x=I.next())b(x.value)}catch(F){n={error:F}}finally{try{x&&!x.done&&(a=I["return"])&&a.call(I)}finally{if(n)throw n.error}}s=s.hasOwnProperty("default")?{anyOf:g,"default":s["default"]}:{anyOf:g}}else{var j=s.type;delete s.type,Object.assign(s,j)}}else delete s.type;return Object.keys(s).filter(function(e){return"object"==typeof s[e]}).forEach(function(t){if(["definitions","dependencies","properties","patternProperties"].includes(t)&&"function"!=typeof s[t].map){var n={};Object.keys(s[t]).forEach(function(e){return n[e]=r(s[t][e],{changed:i,draft:o})}),s[t]=n}else["items","additionalItems","additionalProperties","allOf","anyOf","oneOf","not"].includes(t)?s[t]=r(s[t],{changed:i,draft:o}):s[t]=A.cloneDeep(s[t])}),s}(this.jsf.schema),this.jsf.compileAjvSchema(),this.jsf.schema=function(t,s,l,u,d){if(z(t)){var r=new Set,a=new Set,p=new Map,c=new Map,n={};L.forEachDeep(t,function(e,t){if(J(e,"$ref")&&T(e.$ref)){var n=L.compile(e.$ref);r.add(n),a.add(t+"~~"+n),p.set(t,n)}}),r.forEach(function(e){return n[e]=Y(t,e)});for(var m=!0;m;)m=!1,Array.from(p).forEach(function(e){var t=q.__read(e,2),o=t[0],i=t[1];return Array.from(p).filter(function(e){var t=q.__read(e,2),n=t[0],r=t[1];return L.isSubPointer(i,n,!0)&&!L.isSubPointer(r,i,!0)&&!a.has(o+n.slice(i.length)+"~~"+r)}).forEach(function(e){var t=q.__read(e,2),n=t[0],r=t[1];a.add(o+n.slice(i.length)+"~~"+r),m=!0})});Array.from(a).map(function(e){return e.split("~~")}).filter(function(e){var t=q.__read(e,2),n=t[0],r=t[1];return L.isSubPointer(r,n)}).forEach(function(e){var t=q.__read(e,2),n=t[0],r=t[1];return c.set(n,r)}),Array.from(p).filter(function(e){var t=q.__read(e,2),n=t[0];return t[1],Array.from(c.keys()).every(function(e){return!L.isSubPointer(n,e,!0)})}).forEach(function(e){var t=q.__read(e,2),o=t[0],i=t[1];return Array.from(c).filter(function(e){var t=q.__read(e,2),n=t[0];return t[1],!c.has(o+n.slice(i.length))&&L.isSubPointer(i,n,!0)&&!L.isSubPointer(i,o,!0)}).forEach(function(e){var t=q.__read(e,2),n=t[0],r=t[1];return c.set(o+n.slice(i.length),o+r.slice(i.length))})});var f=Object.assign({},t);return delete f.definitions,f=Y(f,"",n,c),L.forEachDeep(f,function(e,t){if(T(e.$ref)){var n=L.compile(e.$ref);L.isSubPointer(n,t,!0)||(n=E(t,c),L.set(f,t,{$ref:"#"+n})),J(s,"refPointer")||(s[n]=n.length?Y(f,n,s,c):f),l.has(t)||l.set(t,n);var r=L.toDataPointer(t,f);if(!u.has(r)){var o=L.toDataPointer(n,f);u.set(r,o)}}if("array"===e.type&&(J(e,"items")||J(e,"additionalItems"))){var i=L.toDataPointer(t,f);if(!d.has(i)){var a=W(e.items)?e.items.length:0;d.set(i,a)}}},!0),f}console.error("resolveSchemaReferences error: schema must be an object.")}(this.jsf.schema,this.jsf.schemaRefLibrary,this.jsf.schemaRecursiveRefMap,this.jsf.dataRecursiveRefMap,this.jsf.arrayMap),J(this.jsf.schemaRefLibrary,"")&&(this.jsf.hasRootReference=!0))},e.prototype.initializeData=function(){y(this.data)?(this.jsf.formValues=A.cloneDeep(this.data),this.formValuesInput="data"):y(this.model)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=A.cloneDeep(this.model),this.formValuesInput="model"):y(this.ngModel)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=A.cloneDeep(this.ngModel),this.formValuesInput="ngModel"):z(this.form)&&y(this.form.value)?(this.jsf.JsonFormCompatibility=!0,this.jsf.formValues=A.cloneDeep(this.form.value),this.formValuesInput="form.value"):z(this.form)&&y(this.form.data)?(this.jsf.formValues=A.cloneDeep(this.form.data),this.formValuesInput="form.data"):y(this.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.formValuesInput="formData"):J(this.form,"formData")&&y(this.form.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.formValues=A.cloneDeep(this.form.formData),this.formValuesInput="form.formData"):this.formValuesInput=null},e.prototype.initializeLayout=function(){var a=this,e=function(e){return(z(e)||W(e))&&N(e,function(e,t){J(e,"options")&&z(e.options)&&(e.titleMap=e.options,delete e.options)},"top-down"),e};W(this.layout)?this.jsf.layout=A.cloneDeep(this.layout):W(this.form)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.layout=A.cloneDeep(this.form)):this.form&&W(this.form.form)?(this.jsf.JsonFormCompatibility=!0,this.jsf.layout=e(A.cloneDeep(this.form.form))):this.form&&W(this.form.layout)?this.jsf.layout=A.cloneDeep(this.form.layout):this.jsf.layout=["*"];var t=null;z(this.UISchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,t=A.cloneDeep(this.UISchema)):J(this.form,"UISchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,t=A.cloneDeep(this.form.UISchema)):J(this.form,"uiSchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,t=A.cloneDeep(this.form.uiSchema)):J(this.form,"customFormItems")&&(this.jsf.JsonFormCompatibility=!0,t=e(A.cloneDeep(this.form.customFormItems))),t&&L.forEachDeep(t,function(e,t){var n=t.replace(/\//g,"/properties/").replace(/\/properties\/items\/properties\//g,"/items/properties/").replace(/\/properties\/titleMap\/properties\//g,"/titleMap/properties/");if(y(e)&&y(t)){var r=L.toKey(t),o=(L.parse(n)||[]).slice(0,-2),i=void 0;"ui:order"===r.toLowerCase()?i=q.__spread(o,["ui:order"]):("ui:"===r.slice(0,3).toLowerCase()&&(r=r.slice(3)),i=q.__spread(o,["x-schema-form",r])),L.has(a.jsf.schema,o)&&!L.has(a.jsf.schema,i)&&L.set(a.jsf.schema,i,e)}})},e.prototype.activateForm=function(){var t=this;if(R(this.jsf.schema)&&(R(this.jsf.formValues)||this.jsf.buildSchemaFromData()),R(this.jsf.schema)||(this.jsf.compileAjvSchema(),this.jsf.buildLayout(this.widgetLibrary),this.jsf.buildFormGroupTemplate(this.jsf.formValues),this.jsf.buildFormGroup()),this.jsf.formGroup){R(this.jsf.formValues)||!0===this.jsf.formOptions.setSchemaDefaults||!0===this.jsf.formOptions.setLayoutDefaults||this.setFormValues(this.jsf.formValues),this.jsf.dataChanges.subscribe(function(e){t.onChanges.emit(t.objectWrap?e[1]:e),t.formValuesInput&&-1===t.formValuesInput.indexOf(".")&&t[t.formValuesInput+"Change"].emit(t.objectWrap?e[1]:e)}),this.jsf.formGroup.statusChanges.subscribe(function(){return t.changeDetector.markForCheck()}),this.jsf.isValidChanges.subscribe(function(e){return t.isValid.emit(e)}),this.jsf.validationErrorChanges.subscribe(function(e){return t.validationErrors.emit(e)}),this.formSchema.emit(this.jsf.schema),this.formLayout.emit(this.jsf.layout),this.onChanges.emit(this.objectWrap?this.jsf.data[1]:this.jsf.data);var e=L.get(this.jsf,"/formOptions/validateOnRender");if(e){var n=function(t){(!0===e||y(t.value))&&t.markAsTouched(),Object.keys(t.controls||{}).forEach(function(e){return n(t.controls[e])})};n(this.jsf.formGroup),this.isValid.emit(this.jsf.isValid),this.validationErrors.emit(this.jsf.ajvErrors)}}},e}();Ae.decorators=[{type:a.Component,args:[{selector:"json-schema-form",template:'\n    <div *ngFor="let stylesheet of stylesheets">\n      <link rel="stylesheet" [href]="stylesheet">\n    </div>\n    <div *ngFor="let script of scripts">\n      <script type="text/javascript" [src]="script"><\/script>\n    </div>\n    <form class="json-schema-form" (ngSubmit)="submitForm()">\n      <root-widget [layout]="jsf?.layout"></root-widget>\n    </form>\n    <div *ngIf="debug || jsf?.formOptions?.debug">\n      Debug output: <pre>{{debugOutput}}</pre>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[ce,qe]}]}],Ae.ctorParameters=function(){return[{type:a.ChangeDetectorRef},{type:Ee},{type:Se},{type:ce},{type:d.DomSanitizer}]},Ae.propDecorators={schema:[{type:a.Input}],layout:[{type:a.Input}],data:[{type:a.Input}],options:[{type:a.Input}],framework:[{type:a.Input}],widgets:[{type:a.Input}],form:[{type:a.Input}],model:[{type:a.Input}],JSONSchema:[{type:a.Input}],UISchema:[{type:a.Input}],formData:[{type:a.Input}],ngModel:[{type:a.Input}],language:[{type:a.Input}],loadExternalAssets:[{type:a.Input}],debug:[{type:a.Input}],value:[{type:a.Input}],onChanges:[{type:a.Output}],onSubmit:[{type:a.Output}],isValid:[{type:a.Output}],validationErrors:[{type:a.Output}],formSchema:[{type:a.Output}],formLayout:[{type:a.Output}],dataChange:[{type:a.Output}],modelChange:[{type:a.Output}],formDataChange:[{type:a.Output}],ngModelChange:[{type:a.Output}]};var Re=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.jsf.initializeControl(this)},e}();Re.decorators=[{type:a.Component,args:[{selector:"hidden-widget",template:'\n    <input *ngIf="boundControl"\n      [formControl]="formControl"\n      [id]="\'control\' + layoutNode?._id"\n      [name]="controlName"\n      type="hidden">\n    <input *ngIf="!boundControl"\n      [disabled]="controlDisabled"\n      [name]="controlName"\n      [id]="\'control\' + layoutNode?._id"\n      type="hidden"\n      [value]="controlValue">'}]}],Re.ctorParameters=function(){return[{type:ce}]},Re.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Te=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},e}();Te.decorators=[{type:a.Component,args:[{selector:"tab-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <root-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layout]="layoutNode.items"></root-widget>\n    </div>'}]}],Te.ctorParameters=function(){return[{type:ce}]},Te.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var $e=[me,fe,he,ye,ge,be,Re,Ie,xe,je,Fe,Ce,we,Oe,De,Pe,_e,ke,Te,Ne,Me,Ve],ze=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[ce]}},e}();ze.decorators=[{type:a.NgModule,args:[{imports:[p.CommonModule,u.FormsModule,u.ReactiveFormsModule],declarations:q.__spread($e,[ve]),exports:q.__spread($e,[ve]),entryComponents:q.__spread($e),providers:[ce]}]}];var We=function(){};We.decorators=[{type:a.Component,args:[{selector:"no-framework",template:'\n    <select-widget-widget\n      [dataIndex]="dataIndex"\n      [layoutIndex]="layoutIndex"\n      [layoutNode]="layoutNode"></select-widget-widget>'}]}],We.propDecorators={layoutNode:[{type:a.Input}],layoutIndex:[{type:a.Input}],dataIndex:[{type:a.Input}]};var Je=function(t){function e(){var e=t.apply(this,q.__spread(arguments))||this;return e.name="no-framework",e.framework=We,e}return q.__extends(e,t),e}(Le);Je.decorators=[{type:a.Injectable}];var He=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:Le,useClass:Je,multi:!0}]}},e}();He.decorators=[{type:a.NgModule,args:[{imports:[p.CommonModule,ze],declarations:[We],exports:[We],entryComponents:[We]}]}];var Ge=function(){function r(){}return r.forRoot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length?e.map(function(e){return e.forRoot().providers[0]}):[{provide:Le,useClass:Je,multi:!0}];return{ngModule:r,providers:q.__spread([ce,Ee,Se],n)}},r}();Ge.decorators=[{type:a.NgModule,args:[{imports:[p.CommonModule,u.FormsModule,u.ReactiveFormsModule,ze,He],declarations:[Ae],exports:[Ae,ze]}]}],e.b=Le,e.a=Ee,e.bd=We,e.bc=He,e.be=Je,e.bb=ve,e.f=me,e.h=he,e.i=ye,e.j=ge,e.k=be,e.l=Re,e.e=$e,e.m=Ie,e.n=xe,e.o=je,e.p=Fe,e.g=fe,e.q=Ce,e.r=we,e.s=Oe,e.u=Pe,e.v=_e,e.t=De,e.w=ke,e.x=Te,e.y=Ne,e.z=Me,e.ba=Ve,e.d=ze,e.c=Se,e.JsonSchemaFormService=ce,e.JSON_SCHEMA_FORM_VALUE_ACCESSOR=qe,e.JsonSchemaFormComponent=Ae,e.JsonSchemaFormModule=Ge,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular2-json-schema-form.umd.min.js.map
